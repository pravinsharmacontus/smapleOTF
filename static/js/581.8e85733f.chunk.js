"use strict";(self.webpackChunkonthefly=self.webpackChunkonthefly||[]).push([[581],{57057:(e,t,a)=>{a.r(t),a.d(t,{default:()=>qt});var i=a(72791),l=a(22020),n=a(3042),o=a(88503),s=a(80184);const d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{tabParent:t="",allCheckData:a,deleteItem:i=[],checked:d=!1,bulkDeleteCusData:c,userRoleId:r}=e,{t:u}=(0,l.$)();return(0,s.jsx)(s.Fragment,{children:"Past"===t?(0,s.jsxs)(n.Row,{children:[(0,s.jsx)(n.Cell,{className:"TM resetCell"}),3!==r?(0,s.jsx)(n.Cell,{className:"TM chkBox",children:(0,s.jsx)(o.Z,{checked:d,deleteItem:i,allCheckData:a,bulkDeleteCusData:c})}):null,(0,s.jsx)(n.Cell,{style:{width:3===r?"30%":"25%"},className:"TM ",children:u("TABLE.Title")}),(0,s.jsx)(n.Cell,{style:{width:3===r?"30%":"25%"},className:"TM ",children:u("TABLE.CREATED_ON")}),(0,s.jsx)(n.Cell,{style:{width:"20%"},className:"TM ",children:"Duration"}),(0,s.jsx)(n.Cell,{className:"TM resetCell",style:{width:"10%"}}),3!==r?(0,s.jsx)(n.Cell,{style:{width:"25%"},className:"TM text-center Action",children:"Action"}):null,(0,s.jsx)(n.Cell,{className:"TM resetCell"})]}):(0,s.jsxs)(n.Row,{children:[(0,s.jsx)(n.Cell,{className:"TM resetCell"}),3!==r?(0,s.jsx)(n.Cell,{className:"TM chkBox",children:(0,s.jsx)(o.Z,{checked:d,deleteItem:i,allCheckData:a,bulkDeleteCusData:c})}):null,(0,s.jsx)(n.Cell,{style:{width:3===r?"40%":"30%"},className:"TM ",children:u("TABLE.Title")}),(0,s.jsx)(n.Cell,{style:{width:3===r?"40%":"30%"},className:"TM ",children:u("TABLE.CREATED_ON")}),(0,s.jsx)(n.Cell,{className:"TM ",children:u("Scheduled On")}),3!==r?(0,s.jsx)(n.Cell,{style:{width:"20%"},className:"TM text-center Action"}):null,(0,s.jsx)(n.Cell,{style:{width:"20%"},className:"TM text-center Action",children:3!==r?u("TABLE.ACTION"):null}),(0,s.jsx)(n.Cell,{className:"TM resetCell"})]})})},c=i.memo(d);var r=a(59741),u=a.n(r);const v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{text:t="",color:a="",className:l="",bgColor:n=""}=e;return(0,s.jsx)(i.Fragment,{children:(0,s.jsx)("div",{style:{color:a,background:n},className:"Badge ".concat(l||""),children:(0,s.jsx)("span",{className:"badge-inner",children:t})})})},m=i.memo(v);var h=a(62235),p=a(80180),g=a(5060),f=a(34523),x=a(42997);var S=a(55402),b=a(91523);const j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=!1,{loading:a=!1,tabParent:o="",handleDelete:d=(()=>{}),handleMemberEdit:c=(()=>{}),handleJoinMeeting:r=(()=>{}),sessionInfo:v=[],handleSingleCheckboxChange:j=(()=>{}),userRoleId:_}=e,{t:y}=(0,l.$)(),N=function(){return"Past"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")?"30%":"40%"};return(0,s.jsxs)(s.Fragment,{children:[v.length>0&&a?(0,s.jsx)(s.Fragment,{children:null===v||void 0===v?void 0:v.map(((e,a)=>{var l;const v=!(0,S.Dj)(null===e||void 0===e?void 0:e.scheduledTime)&&"ended"!==(null===e||void 0===e?void 0:e.callStatus)&&"timeout"!==(null===e||void 0===e?void 0:e.callStatus);return(0,s.jsx)(i.Fragment,{children:(0,s.jsxs)(n.Row,{children:[(0,s.jsx)(n.Cell,{className:"TM resetCell"}),3!==_?(0,s.jsx)(n.Cell,{className:"TM",children:(0,s.jsxs)("div",{style:{opacity:"on-live"===(null===e||void 0===e?void 0:e.callStatus)?.5:1,cursor:"default"},className:"checkbox-custom new",children:[(0,s.jsx)("input",{type:"checkbox",id:"savecard-".concat(a),defaultValue:!1,checked:"on-live"!==(null===e||void 0===e?void 0:e.callStatus)&&!0===e.isCheck,onChange:()=>{"on-live"!==(null===e||void 0===e?void 0:e.callStatus)&&j(a)}}),(0,s.jsx)("label",{style:{opacity:"on-live"===(null===e||void 0===e?void 0:e.callStatus)?.5:1,cursor:"default"},htmlFor:"savecard-".concat(a)})]})}):null,(0,s.jsx)(n.Cell,{style:{width:3===_?N(o):"25%"},className:"TM",children:(0,s.jsxs)("div",{className:"flex item-center onlive_wraper",children:["on-live"===(null===e||void 0===e?void 0:e.callStatus)&&(0,s.jsx)(u(),{style:{width:"40px",height:"40px"},className:"icon_animate",animationData:g.YZ,loop:!0}),v&&(0,s.jsx)(u(),{style:{width:"26px",height:"26px"},className:"icon_animate LottieCallendar",animationData:g.HK,loop:!0}),(0,s.jsx)("div",{title:null===e||void 0===e?void 0:e.sessionName,className:"onlive_action overflow_200px",children:(0,h.CX)(null===e||void 0===e?void 0:e.sessionName)}),console.log(null===e||void 0===e?void 0:e.callStatus,"callStatus"),!(0,S.Dj)(null===e||void 0===e?void 0:e.scheduledTime)&&"ended"!==(null===e||void 0===e?void 0:e.callStatus)&&"timeout"!==(null===e||void 0===e?void 0:e.callStatus)&&(0,s.jsx)(m,{text:""===(null===e||void 0===e?void 0:e.callStatus)?"Scheduled":null===e||void 0===e?void 0:e.callStatus,color:""===(null===e||void 0===e?void 0:e.callStatus)?"#7E8299":"#FF0935",className:"badge_onlive badge_medium rounded ",bgColor:""===(null===e||void 0===e?void 0:e.callStatus)?"#f5f5f5":"rgba(255, 9, 53, .12)"}),"on-live"===(null===e||void 0===e?void 0:e.callStatus)&&(0,s.jsx)(m,{text:"on-live",color:"#FF0935",className:"badge_onlive badge_medium rounded ",bgColor:"rgba(255, 9, 53, .12)"})]})}),t,(0,s.jsx)(n.Cell,{className:"TM date",children:(0,x.WD)(null===e||void 0===e?void 0:e.createdAt)}),"Past"!==o&&(0,s.jsx)(n.Cell,{className:"TM date",children:null!==e&&void 0!==e&&e.scheduledTime?(0,x.WD)((0,S.mZ)(null===e||void 0===e?void 0:e.scheduledTime)):"-"}),"Past"===o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Cell,{style:{width:"20%"},className:"TM date",children:""===e.duration||"0"===e.duration?"0m":(0,S.Ct)(e.duration)}),(0,s.jsx)(n.Cell,{className:"TM date",children:null!==e.recordingPath?(0,s.jsx)(b.rU,{to:"/videos?orgId=".concat(null===e||void 0===e?void 0:e.orgId,"&channleArn=").concat(null===e||void 0===e||null===(l=e.channelDetails)||void 0===l?void 0:l.channelArn),className:"action_join",children:"Recording"}):(0,s.jsx)("div",{className:"action_join disable",children:"Recording"})})]}):(0,s.jsx)(n.Cell,{style:{width:"20%"},className:"TM Action",children:(0,s.jsx)("div",{className:"btn-grp",children:(0,s.jsxs)("button",{className:"action_join ".concat((0,S.Dj)(null===e||void 0===e?void 0:e.scheduledTime)?"  ":" disable "),type:"button",onClick:(0,S.Dj)(null===e||void 0===e?void 0:e.scheduledTime)?()=>r(e):()=>{},children:[" ","completed"===(null===e||void 0===e?void 0:e.callStatus)?"Completed":"Join"]})})}),3!==_?(0,s.jsx)(n.Cell,{className:"TM Action",children:(0,s.jsxs)("div",{className:"btn-grp",children:[(0,s.jsxs)(s.Fragment,{children:[t,"Past"!==o&&(0,s.jsx)("button",{type:"button",className:"".concat(null!==e&&void 0!==e&&e.scheduledTime&&0===(null===e||void 0===e?void 0:e.hostId)?"cp-btn-icon blue rounded":"cp-btn-icon rounded cursor-default disabled"),title:y("COMMON.EDIT"),"data-jest-id":"jesteditCusAction",onClick:()=>(null===e||void 0===e?void 0:e.scheduledTime)&&0===(null===e||void 0===e?void 0:e.hostId)&&c(e),children:(0,s.jsx)("i",{children:(0,s.jsx)(p.ZwU,{})})}),t]}),(0,s.jsx)("button",{type:"button",style:{opacity:"on-live"===(null===e||void 0===e?void 0:e.callStatus)?.6:1},className:" ".concat("on-live"===(null===e||void 0===e?void 0:e.callStatus)?" _disabled_btn ":" ","  cp-btn-icon red rounded"),title:y("COMMON.DELETE"),"data-jest-id":"jestcusDelete",onClick:()=>{"on-live"!==(null===e||void 0===e?void 0:e.callStatus)&&d(e,"singleDelete")},children:(0,s.jsx)("i",{children:(0,s.jsx)(p.ndb,{})})})]})}):null,(0,s.jsx)(n.Cell,{className:"TM resetCell"})]})},(0,h.rv)(a+"idMemberAdded-sj"))}))}):null,(0,f.Y)("memberTable")]})},_=i.memo(j);var y=a(52024),N=a(53734),I=a(77983);const C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{initialPage:t=1,bottomDetails:a={},pageSizeChange:l=(()=>{}),changePageactive:n=(()=>{}),searchEnable:o,setSearchEnable:d=(()=>{})}=e||{},c=a.totalPages>=2;return console.log(e,"viewFooter"),(0,s.jsx)(i.Fragment,{children:(0,s.jsxs)("div",{className:"TableOpertion",children:[(0,s.jsxs)("div",{className:"pagesInfo",children:[(0,s.jsx)(N.Z,{bottomDetails:a}),a.totalRecords>10&&(0,s.jsx)(i.Fragment,{children:(0,s.jsx)("div",{className:"pageSize",children:(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)("span",{children:"Results per page"}),(0,s.jsx)(y.th,{OriginalData:I.yj,onChange:l,pageSize:a.size})]})})})]}),c&&(0,s.jsx)(y.tl,{initialPage:t,onChangePage:n,bottomDetails:a,searchEnable:o,setSearchEnable:d})]})})},k=i.memo(C);var T=a(72426),w=a.n(T),E=a(19800),D=a(49050);a(15298);const O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{onOpenCalendar:t=(()=>{}),onCalendarHandle:a=!1,addMemberInputData:l={},_onChangeTeamsData:n=(()=>{}),handleMemberPopupOpen:o=(()=>{}),userRoleId:d,searchTerm:c,tabParent:r}=e,{sDate:u=null,eDate:v=null}=l,[m,h]=(0,i.useState)(!1),[p,g]=(0,i.useState)(!0),[f,x]=(0,i.useState)(!1),[S,b]=(0,i.useState)(!1),[j,_]=(0,i.useState)(!1),N="BroadcastTableSubHead";console.log(m,"MoreFilter");return(0,s.jsxs)(D.ZP,{filterId:N,parentClass:"cus_top",setMoreFilter:e=>h(e),getEnableSliderFilter:e=>{b(e)},children:[(0,s.jsx)(D.wx,{enableSearch:f,setEnableSearch:x,children:(0,s.jsx)(y.Az,{type:"text",value:c,name:"searchTerm",placeholder:"Search by broadcast title",handleSetSearchInput:n,handleInputboxClear:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";setTimeout((()=>{(0,D.eu)(N)}),100),n({target:{name:e,value:""}})}("searchTerm"),parentClass:" tableSearch-absolute ".concat(f?" ":" mobileHide")})}),!1,(0,s.jsx)(D.Od,{EnableSliderFilter:S,setEnableFilterButton:_,children:3!==d&&"Past"!==r&&(0,s.jsx)(E.Z,{className:"b-r-30",children:(0,s.jsx)("button",{className:"b-rounded b-md bt-red cp-btn text-md",onClick:()=>o(!0),children:(0,s.jsx)("span",{children:"Create"})})})})]})},A=i.memo(O);var B=a(16030),M=a(26181),L=a.n(M),Z=a(49908),R=a(7706),P=a(62641),F=a(37607);var U=a(70019),V=a(16e3),H=a(72757),q=a(19350);const z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{handleBroadcastInfo:t=(()=>{}),handleJoinMeeting:a=(()=>{}),sessionInfo:l=[],_handleTableBroadcastCreate:o=(()=>{}),userRoleId:d,resetMuiltipleClick:r,searchTerm:u="",_onChangeData:v="",initialPage:m=0,pageSizeChange:h=(()=>{}),changePageactive:p=(()=>{}),bottomDetails:f={},searchEnable:x,setSearchEnable:S=(()=>{}),setNoDeviceFound:b,_userRoleId:j,handleTableType:y,enableEdits:N=(()=>{}),userId:I=0,currentOrg:C=0,_searchData:T={}}=e||{},[E,D]=(0,i.useState)(!1),[O,M]=(0,i.useState)(!1),[z,W]=(0,i.useState)(""),[J,Y]=(0,i.useState)("Upcoming"),[G,$]=(0,i.useState)(2),[K,X]=(0,i.useState)(!1),[Q,ee]=(0,i.useState)([]),[te,ae]=(0,i.useState)([]),[ie,le]=(0,i.useState)(!1),[ne,oe]=(0,i.useState)(!1),[se,de]=(0,i.useState)(!1),[ce,re]=(0,i.useState)({userID:{},bulkDelete:!1}),ue=(0,B.v9)((e=>null===e||void 0===e?void 0:e.deviceGrant)),ve=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.deleteReducer)||void 0===t?void 0:t.isLoading})),me=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.currentOrganisationReducer)||void 0===t?void 0:t.currentOrganisation})),he=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=(0,U.S9)(e);return $(L()(t,"length",0)),le(!(t.length<=1)),t},pe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";y(e),Y(e),ee(l)},ge=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];le(e);const t=[...Q];t.forEach((t=>(t.isCheck=e,t))),ee(t),he(t)},fe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"singleDelete"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")?(ae([e.stageArn]),W(e.sessionName),D(!0),re({...ce,bulkDelete:!1})):(re({...ce,bulkDelete:!0}),ae(e),D(!0))};(0,i.useEffect)((()=>{setTimeout((()=>{(0,H.bA)(),oe(!0),de(!1)}),1e3),de(!0)}),[]);return(0,i.useEffect)((()=>{ee((e=>{const t=null===e||void 0===e?void 0:e.filter((e=>null===e||void 0===e?void 0:e.scheduledTime)),a=null===e||void 0===e?void 0:e.filter((e=>!(null!==e&&void 0!==e&&e.scheduledTime))),i=null===t||void 0===t?void 0:t.map((e=>({...e,date:new Date(w()(e.scheduledTime).toDate())})));return[...null===i||void 0===i?void 0:i.sort(((e,t)=>Number(w()(t.date).toDate())-Number(w()(e.date).toDate()))),...a]})(l)),le(!1)}),[l,ve,me,J]),(0,i.useEffect)((()=>(P.Z.dispatch((0,q.Af)(!1)),()=>{oe(!1),X(!1),le(!1),ee([])})),[]),(0,i.useEffect)((()=>{X(!1)}),[r]),(0,i.useEffect)((()=>{M(!0),setTimeout((()=>{M(!1)}),500)}),[J]),(0,i.useEffect)((()=>{X(!1)}),[ue]),(0,i.useEffect)((()=>{b&&X(!1)}),[b]),(0,s.jsxs)(i.Fragment,{children:[se&&(0,s.jsx)(V.Z,{type:"fixed overlay"}),(0,s.jsx)("div",{className:"custom-tab",children:(0,s.jsxs)("div",{className:"ul",children:[(0,s.jsx)("button",{type:"button",className:" li ".concat("Upcoming"===J?"active":""),onClick:()=>pe("Upcoming"),children:"Upcoming"}),(0,s.jsx)("button",{type:"button",className:"li ".concat("Past"===J?"active":""),onClick:()=>pe("Past"),children:"Past"})]})}),(0,s.jsxs)("div",{className:"ContentWrapper ".concat(O?" fadeIn-exit-active_ ":" fadeIn-enter-active_ "),style:{paddingTop:"60px"},children:[(0,s.jsxs)("div",{className:"TeamWrapper df-11a df-col  ".concat(0===(null===l||void 0===l?void 0:l.length)?" empty ":" "," "),children:[(0,s.jsx)(A,{onCalendarHandle:!0,handleMemberPopupOpen:o,userRoleId:d,searchTerm:u,_onChangeTeamsData:v,tabParent:J}),(0,s.jsx)("div",{className:"".concat((0,R.Ye)(R.Feature.FixedHeaderInTables)),children:(0,s.jsxs)("div",{className:"table-common stickyHeader\n                         ".concat(l.length>0&&l.length<=6?"minHeight":"","\n                        "),children:[(0,s.jsxs)("div",{className:"table-responsive memberTable  ".concat(0===(null===l||void 0===l?void 0:l.length)?" ":" adjustHeight "),children:[(0,s.jsxs)(n.StickyTable,{leftStickyColumnCount:0,borderColor:"#DEDEDE",borderWidth:"0.5px",stickyHeaderCount:1,children:[(0,s.jsx)(c,{tabParent:J,checked:ie,deleteItem:G,allCheckData:()=>{ge(!ie)},bulkDeleteCusData:()=>{const e=he(Q);fe(e,"bulk")},userRoleId:j}),(0,s.jsx)(_,{loading:!se,tabParent:J,handleMemberEdit:e=>{return N(t=e),void console.log(t,"sessionDate");var t},handleBroadcastInfo:t,handleJoinMeeting:e=>(e=>{K||(a(e),X(!0))})(e),handleDelete:fe,handleSingleCheckboxChange:e=>{const t=[...Q];t[e]={...t[e],isCheck:!L()(t[e],"isCheck",!1)},ee(t),he(t)},sessionInfo:Q,userRoleId:j})]}),0===(null===Q||void 0===Q?void 0:Q.length)&&(0,s.jsxs)("div",{className:"empty_table",style:{opacity:ne?1:0},children:[(0,s.jsx)(g.Xf,{}),"Past"===J?(0,s.jsxs)("div",{className:"content",children:[(0,s.jsx)("strong",{children:"No Past Events Yet"}),(0,s.jsx)("p",{children:"There are currently no past events to display here."})]}):(0,s.jsxs)("div",{className:"content",children:[(0,s.jsx)("strong",{children:"No Upcoming Events Yet"}),(0,s.jsx)("p",{children:"There are currently no upcoming events to display here."})]})]})]}),Q.length>0&&!se?(0,s.jsx)(k,{initialPage:m,pageSizeChange:h,changePageactive:p,bottomDetails:{size:f.size,totalPages:f.totalPages,totalRecords:f.totalRecords,page:f.page},searchEnable:x,setSearchEnable:e=>S(e)}):null]})})]}),E&&(0,s.jsx)(Z.Z,{maxWidth:"520px",minWidth:"0",_bulkContent:ce.bulkDelete?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("span",{children:["Are you sure? You're about to ",(0,s.jsx)("strong",{children:"bulk delete"})," selected events from the broadcast list. "]})}):(0,s.jsxs)(s.Fragment,{children:[" ",(0,s.jsxs)("span",{children:["Are you sure you want to delete the current broadcast",(0,s.jsxs)("strong",{children:[' "',"".concat(z),'"?']})]})]}),heading:ce.bulkDelete?"Delete?":"Delete Broadcast?",hightlightText:z,handleDeleteClose:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?(P.Z.dispatch(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return console.log("action@@@",e),{type:F.fr,data:e,tabType:t}}(te,{userId:I,orgId:C,searchData:T,position:J})),P.Z.dispatch({type:"DO_LOADING_PAGE",loading:!0}),D(!1),le(!1)):D(e)},onExited:()=>function(){D(arguments.length>0&&void 0!==arguments[0]&&arguments[0])}(!1)})]})]})},W=i.memo(z);const J=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{t:t}=(0,l.$)(),{handleCreateStreaming:a=(()=>{}),userRoleId:n}=e,o=(0,B.v9)((e=>{var t,a;return null===e||void 0===e||null===(t=e.CusPage)||void 0===t||null===(a=t.customerDtls)||void 0===a?void 0:a.emailVerified})),[d,c]=(0,i.useState)(!1),[r,v]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{c(3!==n),v(0!==o)})),console.log("userroleid",n,3!==n,1!==o,r,d),(0,s.jsxs)("div",{className:"broadcasting_initiate",children:[(0,s.jsx)(u(),{className:"icon_animate",animationData:g.Mq,loop:!0}),d&&r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:"heading",children:t("BROADCAST.BROADCAST_MAIN_TITLE")}),(0,s.jsx)("p",{className:"desc",children:t("BROADCAST.BROADCAST_MAIN_CAPTION")}),(0,s.jsx)("button",{onClick:a,className:"action",type:"button",children:t("COMMON.CREATE_BUTTON")})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:"heading",children:"No Live streaming events available to join"}),(0,s.jsx)("p",{className:"desc",children:"Join an organisation as host to create your own live stream"})]})]})};const Y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{handleLayoutViewType:t=(()=>{}),layoutCount:a=0,currentLayout:l="",isUserChanged:n=(()=>{}),isScreenShare:o}=e,[d,c]=(0,i.useState)("layout1"),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t(e,"clicked"),n(!0),e};return(0,i.useEffect)((()=>{t(d,"initial")}),[]),(0,i.useEffect)((()=>{c(l)}),[l]),(0,s.jsx)("div",{className:"broadcast_video_layout_wraper",children:(0,s.jsxs)("div",{className:"broadcast_video_layout_list",children:[(0,s.jsx)("button",{onClick:o?()=>{}:()=>r("layout1"),style:{cursor:o?" default ":""},className:"",type:"button",children:"layout1"===d?(0,s.jsx)(g.iA,{}):(0,s.jsx)(g.Gi,{})}),(0,s.jsx)("button",{onClick:a>1&&!o?()=>r("layout2"):()=>{},style:{cursor:a>1&&!o?"":" default "},className:"",type:"button",children:"layout2"===d?(0,s.jsx)(g.$X,{}):(0,s.jsx)(g.hK,{})}),(0,s.jsx)("button",{style:{cursor:"default"},className:"",type:"button",children:o?(0,s.jsx)(g.lY,{}):(0,s.jsx)(g.x_,{})}),!1]})})};a(83648);var G=a(59332),$=(a(15580),a(39888)),K=a(14476),X=a(72764),Q=a(27513),ee=a(96211),te=a(82804),ae=a(30276),ie=a(10830),le=a(80077),ne=a(92444);const oe=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e||alert("Please upload an image first!");const{orgId:i="",stageArn:l=""}=t,n=(0,ae.iH)(le.I,"/".concat(i,"/").concat((0,U.Wk)((0,U.Jj)(l)),"/").concat(e.name)),o=(0,ae.B0)(n,e);if("no-image"===a)return P.Z.dispatch((0,ie.qt)(a)),void(0,ne.uF)(i,l,a);o.on("state_changed",(e=>{const t=Math.round(e.bytesTransferred/e.totalBytes*100);console.log(t,"percentpercentpercent")}),(e=>console.log(e)),(()=>{(0,ae.Jt)(o.snapshot.ref).then((e=>{console.log(e,"getDownloadURL"),P.Z.dispatch((0,ie.qt)(e)),(0,ne.uF)(i,l,e)}))}))},se=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{disableClick:t=!1}=e,a=(0,i.useRef)(),l=(0,i.createRef)(),[n,o]=(0,i.useState)(!1),[d,c]=(0,i.useState)(""),[r,u]=(0,i.useState)(""),v=(0,B.v9)((e=>null===e||void 0===e?void 0:e.awsStageReducer)),m="create"===v.method?(0,Q.yN)(v):v,[h,f]=(0,i.useState)(!1),{closeDropDown:x=(()=>{}),trailOrPaidUser:b="",_handleResizedImage:j=(()=>{})}=e,_=(e,t,a)=>{["image/png","image/jpeg","image.jpg"].includes(e.type)?(oe(e,m),(0,ne.kA)((0,S.fv)(),(0,S.yk)(v),t,a)):y.kl.error("Image type only allowed to upload")},N=()=>{f(!1)};return(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)("input",{style:{zIndex:-999,position:"relative",width:0,height:0,opacity:0},ref:a,type:"file",accept:"image/*",id:"logoUpload",onChange:function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var a;if(t.preventDefault(),t.dataTransfer)e=null===(a=t.dataTransfer)||void 0===a?void 0:a.files[0];else if(t.target){var i;e=null===(i=t.target)||void 0===i?void 0:i.files[0]}const l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.name,a=Math.round(e.size/1024);return/\.(jpe?g|png)$/i.test(t)?a>X.nZ?(te.Z.errorToast("Please Upload Image Size less than 5 MB"),{messsage:"Please Upload Image Size less than 5 MB",error:!0}):{error:!1}:(te.Z.errorToast("Image should be in jpeg or png format"),{messsage:"Image type only allowed to upload",error:!0})}(e);if(t.target.value="",l.error)y.kl.error(l.messsage),t.preventDefault();else{f(!0);const{name:t=""}=e;u(t);const a=new FileReader;a.onload=()=>{c(a.result)},a.readAsDataURL(e)}},onClick:x}),(0,s.jsxs)("button",{type:"button",onClick:"BASIC"!==b?e=>{e.preventDefault(),a.current.click()}:()=>{o(!0)},className:"brand_image choose",children:[(0,s.jsx)("i",{className:"plus",children:(0,s.jsx)(g.EE,{})}),"BASIC"===b?(0,s.jsx)("i",{className:"icon_premium ".concat(n?"visible":""),children:(0,s.jsx)(p.kuk,{})}):null,(0,s.jsx)("span",{children:"Upload"})]}),h?(0,s.jsx)($.Z,{children:(0,s.jsx)("div",{class:"PopupWrapper fixed xs",children:(0,s.jsx)("div",{class:"PopupInner ActionPopup ",children:(0,s.jsx)("div",{className:"scroll",children:(0,s.jsx)("div",{className:"croppie_wraper",children:(0,s.jsxs)(ee.default,{className:"cropper_wraper",onOutsideClick:t?()=>{}:()=>{N()},children:[(0,s.jsx)("div",{className:"croppie_header",children:(0,s.jsx)("h4",{children:"Crop Logo"})}),(0,s.jsx)("div",{className:"croppie_body",children:(0,s.jsx)(G.Z,{ref:l,style:{height:490,width:"100%"},zoomTo:.5,initialAspectRatio:1,src:d,viewMode:1,minCropBoxHeight:10,minCropBoxWidth:10,background:!1,responsive:!0,autoCropArea:1,checkOrientation:!1,guides:!0})}),(0,s.jsx)("div",{className:"croppie_actions",children:(0,s.jsxs)("div",{className:"croppie_actions_list",children:[(0,s.jsx)("button",{type:"button",onClick:N,className:"default ",children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:()=>{var e;if("undefined"!==typeof(null===(e=l.current)||void 0===e?void 0:e.cropper)){var t;const e=l.current.cropper.getData(),a=Math.round(e.width),i=Math.round(e.height);console.log(e,a,i,"imageDataimageData");((e,t,a)=>{const i=185;if(t===a&&t>0&&a>=76)j(76,76),_(e,76,76);else if(t>a)if(t>i)if(console.log("_getWidth > staticWidth landscape img"),i*a/t<59){const l=i,n=i*a/t;console.log(l,n,"(staticWidth * _getHeight) / _getWidth < staticHeight landscape img"),j(l,n),_(e,l,n)}else{const i=59*t/a,l=59;console.log(i,l,"else (staticWidth * _getHeight) / _getWidth < staticHeight landscape img"),j(i,l),_(e,i,l)}else console.log(t,a," img"),j(t,a),_(e,t,a);else if(t<a){const i=59*t/a,l=59;j(i,l),_(e,i,l)}else j(t<50?50:t,a<50?50:a),_(e,t<50?50:t,a<50?50:a)})(((e,t)=>{f(!0);const a=e.split(","),i=a[0].match(/:(.*?);/)[1],l=atob(a[1]);let n=l.length;const o=new Uint8Array(n);for(;n--;){const e=l.charCodeAt(n);o[n]=e}const s=new Blob([o],{type:i});return s.lastModifiedDate=new Date,s.name=t,s})(null===(t=l.current)||void 0===t?void 0:t.cropper.getCroppedCanvas().toDataURL(),r||""),a,i)}f(!1)},className:"action red",children:"Crop"})]})})]})})})})})}):null,n?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>o(!1),type:"TrailUserLogo"}):null]})};var de=a(69017);const ce=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{id:t="",name:a="",jestId:l="",status:n=!1,onChange:o=(()=>{}),parentId:d="statusChange",toggleType:c="style1"}=e,[r,u]=i.useState(!1);return(0,i.useEffect)((()=>{u(n)}),[n]),(0,s.jsx)("div",{id:d,"data-jest-id":l,className:"grp-input mb-0",children:(0,s.jsxs)("label",{className:"".concat(c,' " switch noTranision'),htmlFor:t,children:[(0,s.jsx)("input",{id:t,name:a,type:"checkbox",onChange:()=>(u(!r),void o({target:{name:a,value:!r}})),"data-jest-id":"jestIdonChange",checked:r}),(0,s.jsx)("span",{className:"slider round noTranision"})]})})},re=i.memo(ce);const ue=function(e){const{handleResizedImage:t=(()=>{}),disableClick:a=!1}=e,[l,n]=(0,i.useState)(!1),o=(0,B.v9)((e=>null===e||void 0===e?void 0:e.awsStageReducer)),d=(0,B.v9)((e=>null===e||void 0===e?void 0:e.broadcastLogo)),c=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.broadcastBranding)||void 0===t?void 0:t.isLogoRight})),r=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.paidTrailLogoUpdateReducer)||void 0===t?void 0:t.paidLogoUpdate})),u=(0,S.yk)(o),[v,m]=(0,i.useState)("no-image"),h="create"===o.method?(0,Q.yN)(o):o,f=function(){n(arguments.length>0&&void 0!==arguments[0]&&arguments[0])};return(0,i.useEffect)((()=>{m(d)}),[d]),(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)("div",{className:"",children:(0,s.jsxs)("form",{action:"",className:"",children:[(0,s.jsxs)("div",{className:"brand_image_list",children:["no-image"!==v&&v!==g.r6&&(0,s.jsxs)("div",{className:"brand_image selected",children:[(0,s.jsx)("button",{onClick:"BASIC"===r?()=>f(!0):()=>(m("no-image"),void oe("no-image",h,"no-image")),title:"Remove",type:"button",className:"remove_brand_image",children:(0,s.jsx)(p.bMz,{})}),(0,s.jsx)("img",{id:"preview-image",src:v||g.r6,alt:"logo"}),(0,s.jsx)("div",{style:{display:"none"},className:"response_loader_wraper",children:(0,s.jsx)("img",{src:p.BJI,className:"response_loader",alt:"response-loader"})})]}),(0,s.jsx)(se,{_handleResizedImage:t,trailOrPaidUser:r,disableClick:a}),(0,s.jsx)("div",{className:"info",children:"(Image should be in jpeg or png format and less than 5MB)"})]}),(0,s.jsxs)("div",{style:{marginTop:"1px"},className:"broadcast_video_banner_action",children:[(0,s.jsx)(re,{toggleType:" style2 ",jestId:"Status-1",name:"getIsLogoRight",onChange:e=>{var t,a;console.log(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value,"getIsLogoRight"),(0,ne.TM)((0,S.fv)(),u,null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.value)},id:"getIsLogoRight",status:c,parentId:"isLogoRight"}),(0,s.jsx)("label",{htmlFor:"getIsLogoRight",className:"info",children:"Display logo on right"})]})]})}),l?(0,s.jsx)(de.Z,{_handleOnOutsideClick:()=>f(!1)}):null]})};var ve=a(90427);const me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{handleChangeColor:t=(()=>{}),handleGetcolorCode:a=(()=>{}),_handleOnOutsideClick:l=(()=>{}),_getColor:n=""}=e,[o,d]=(0,i.useState)("");return(0,i.useEffect)((()=>{d(n)}),[]),(0,s.jsx)(ee.default,{class:"asd",className:"as",onOutsideClick:()=>l(),children:(0,s.jsxs)("div",{className:"color_pallete_box",children:[(0,s.jsx)("button",{title:"close",onClick:()=>l(),type:"button",className:"close",children:(0,s.jsx)(g.kL,{})}),(0,s.jsx)(ve.AI,{color:o,onChange:t,onChangeComplete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log(e,"color"),d(e.hex),a(e.hex)},disableAlpha:!0,body:"display:none"})]})})};var he=a(86299),pe=a(62644),ge=a(38456);const fe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{t:t}=(0,l.$)(),[a,n]=(0,i.useState)(0),o=(0,B.v9)((e=>null===e||void 0===e?void 0:e.awsStageReducer)),d=(0,S.yk)(o),{_handleInput:c=(()=>{}),bannerStatus:r=!0,bannerText:u="Hello"}=e,v=(0,B.v9)((e=>null===e||void 0===e?void 0:e.broadcastBranding)),m=(null===v||void 0===v?void 0:v.bannerBgColor)||"",h=(null===v||void 0===v?void 0:v.bannerStyle)||"",p=(null===v||void 0===v?void 0:v.bannerTextColor)||"",g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;console.log(h,e,"fbBannerBgColor"),(0,ne.bv)((0,S.fv)(),d,e),n(e)};return(0,i.useEffect)((()=>{n(h)}),[h]),(0,s.jsxs)("div",{className:"banner_theme_wraper",children:[(0,s.jsxs)("div",{className:"banner_theme_list",children:[(0,s.jsx)("button",{onClick:()=>g(0),type:"buton",className:"banner_theme ".concat(""===a||0===a?"selected":" "),children:(0,s.jsx)("div",{style:{color:"#fff",backgroundImage:"linear-gradient(to right, ".concat(m," 15px, #000 15px)")},className:"theme_style theme_style_1 ",children:u})}),(0,s.jsx)("button",{onClick:()=>g(1),type:"buton",className:"banner_theme ".concat(1===a?"selected":" "),children:(0,s.jsx)("div",{style:{color:m&&p?"#fff":"#000",backgroundColor:m},className:"theme_style theme_style_2",children:u})}),(0,s.jsx)("button",{onClick:()=>g(2),type:"buton",className:"banner_theme ".concat(2===a?"selected":" "),children:(0,s.jsx)("div",{style:{color:""!==m&&p?"#fff":"#000",backgroundColor:m},className:"theme_style theme_style_3",children:u})})]}),!1]})};const xe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,a]=(0,i.useState)(0),{_handleInput:l=(()=>{})}=e,n=(0,B.v9)((e=>null===e||void 0===e?void 0:e.awsStageReducer)),o=(0,S.yk)(n),d=(0,B.v9)((e=>null===e||void 0===e?void 0:e.broadcastBranding)),c=(null===d||void 0===d?void 0:d.bannerBackground)||"",r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t="create"===(null===n||void 0===n?void 0:n.method)?(0,Q.yN)(n):n;(0,ne.Ge)((0,S.fv)(),o,e),a(e),(0,pe.JF)(e,null===t||void 0===t?void 0:t.stageArn)},u=()=>(0,s.jsx)("div",{className:"tick_box",children:(0,s.jsx)(g.Tq,{})});return(0,i.useEffect)((()=>{a(""===c?0:c)}),[c]),console.log(c,"fbBannerBackground"),(0,s.jsx)("div",{className:"banner_bg_theme_wraper",children:(0,s.jsxs)("div",{className:"banner_theme_list",children:[(0,s.jsx)("button",{onClick:()=>r(0),type:"buton",className:"banner_theme ".concat(0===t?"selected":" "),children:(0,s.jsx)("div",{className:"theme_style",children:"None"})}),(0,s.jsxs)("button",{onClick:()=>r(1),type:"buton",className:"banner_theme ".concat(1===t?"selected":" "),children:[(0,s.jsx)("img",{src:g.Rt,alt:"banner1"}),1===t?u():null]}),(0,s.jsxs)("button",{onClick:()=>r(2),type:"buton",className:"banner_theme ".concat(2===t?"selected":" "),children:[(0,s.jsx)("img",{src:g.kQ,alt:"banner2"}),2===t?u():null]}),(0,s.jsxs)("button",{onClick:()=>r(3),type:"buton",className:"banner_theme ".concat(3===t?"selected":" "),children:[(0,s.jsx)("img",{src:g.qW,alt:"banner3"}),3===t?u():null]}),!1]})})};const Se=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,a]=(0,i.useState)(0),{_handleInput:l=(()=>{})}=e,n=(0,B.v9)((e=>null===e||void 0===e?void 0:e.awsStageReducer)),o=(0,S.yk)(n),d=(0,B.v9)((e=>null===e||void 0===e?void 0:e.broadcastBranding)),c=(null===d||void 0===d?void 0:d.bannerTopOverlay)||0,r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t="create"===(null===n||void 0===n?void 0:n.method)?(0,Q.yN)(n):n;(0,ne.zO)((0,S.fv)(),o,e),a(e),(0,pe.yV)(e,null===t||void 0===t?void 0:t.stageArn)},u=()=>(0,s.jsx)("div",{className:"tick_box",children:(0,s.jsx)(g.Tq,{})});return(0,i.useEffect)((()=>{a(""===c?0:c)}),[c]),console.log(c,"FbBannerTopOverlay"),(0,s.jsxs)("div",{className:"banner_bg_theme_wraper",children:[(0,s.jsxs)("div",{className:"banner_theme_list",children:[(0,s.jsx)("button",{onClick:()=>r(0),type:"buton",className:"banner_theme ".concat(0===t?"selected":" "),children:(0,s.jsx)("div",{className:"theme_style",children:"None"})}),(0,s.jsxs)("button",{onClick:()=>r(1),type:"buton",style:{padding:"3px"},className:"banner_theme ".concat(1===t?"selected":" "),children:[(0,s.jsx)("img",{src:g.CA,alt:"overlay-banner1"}),1===t?u():null]}),(0,s.jsxs)("button",{onClick:()=>r(2),type:"buton",style:{padding:"3px"},className:"banner_theme ".concat(2===t?"selected":" "),children:[(0,s.jsx)("img",{src:g.WC,alt:"overlay-banner2"}),2===t?u():null]}),(0,s.jsxs)("button",{onClick:()=>r(3),type:"buton",style:{padding:"3px"},className:"banner_theme ".concat(3===t?"selected":" "),children:[(0,s.jsx)("img",{src:g.JR,alt:"overlay-banner3"}),3===t?u():null]}),false]}),false]})},be=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{t:t}=(0,l.$)(),{handleLayoutViewType:a=(()=>{}),disableClick:n=!1,_handleInput:o=(()=>{}),getBannerText:d="",handleResizedImage:c=(()=>{})}=e,{getColor:r=""}=d,[u,v]=(0,i.useState)(!1),[m,p]=(0,i.useState)(!1),[g,f]=(0,i.useState)(r),[x,b]=(0,i.useState)(""),j=(0,B.v9)((e=>null===e||void 0===e?void 0:e.awsStageReducer)),_=(0,S.yk)(j),N=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(e),"getColor"===e.target.name&&(f(e.target.value),p(!S.fz.test(e.target.value)),0===e.target.value.length)){const e="#FF0935";o({target:{name:"getColor",value:e}}),p(!S.fz.test(e))}},I=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.broadcastBranding)||void 0===t?void 0:t.bannerText})),C=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.broadcastBranding)||void 0===t?void 0:t.bannerStatus}));(0,i.useEffect)((()=>{b((0,S.sf)(I))}),[I]),(0,i.useEffect)((()=>{p(!S.fz.test(r))}),[r]);return console.log(m,"getColorCodeError"),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"broadcast_video_brand_color",children:[(0,s.jsx)("h5",{className:"broadcast_title",children:t("BROADCAST.LAYOUT_OPTIONS.BRAND_COLOR")}),(0,s.jsx)("p",{className:"broadcast_info",children:t("BROADCAST.LAYOUT_OPTIONS.BRANCH_CAPTIONS")}),(0,s.jsxs)("div",{className:"color_pallete",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{v(!u)},style:{background:g||r},className:"color_pallete_circle"}),u?(0,s.jsx)(me,{_handleOnOutsideClick:()=>{window.sessionStorage.getItem("EndSessionPopStatus")||v(!1)},_getColor:r,handleGetcolorCode:function(){o({target:{name:"getColor",value:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}})},handleChangeColor:function(){f((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).hex)}}):null,(0,s.jsx)(he.Z,{enableCustomLabel:!1,className:"w-full mb-0",mustFill:!1,error:m,type:"text",name:"getColor",value:g||r,palceholder:"",_maxLength:7,_onchange:N,_onKeyDown:e=>{e.ctrlKey&&"z"===e.key&&e.preventDefault()},_onBlur:()=>{}})]})]}),(0,s.jsxs)("div",{className:"broadcast_video_brand_logo top_space_even",children:[(0,s.jsx)("h5",{className:"broadcast_title",children:t("BROADCAST.LAYOUT_OPTIONS.LOGO")}),(0,s.jsx)("p",{className:"broadcast_info",children:t("BROADCAST.LAYOUT_OPTIONS.LOGO_CAPTIONS")}),(0,s.jsx)(ue,{disableClick:n,handleResizedImage:c})]}),(0,s.jsxs)("div",{className:"broadcast_video_brand_logo top_space_even",children:[(0,s.jsx)("h5",{className:"broadcast_title",children:"Theme"}),(0,s.jsx)("p",{className:"broadcast_info",children:"Choose the style to fit your brand. This will be displayed in the live screen"}),(0,s.jsx)(fe,{})]}),false,(0,s.jsxs)("div",{className:"broadcast_video_banner top_space_even",children:[(0,s.jsx)("h5",{className:"broadcast_title",children:t("BROADCAST.LAYOUT_OPTIONS.BANNER")}),(0,s.jsx)("p",{className:"broadcast_info",children:t("BROADCAST.LAYOUT_OPTIONS.BANNER_CAPTION")}),(0,s.jsx)(y.ld,{textAreaType2:!1,type:"textarea",mustFill:!0,className:"mb-0",value:x,name:"getCaption",id:"action_reason",customClass:"commonTextarea",_onchange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{value:t=""}=e.target||{};b(t)},error:"",palceholder:"",placeholder:"",_maxLength:200,_onBlur:()=>{}}),(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"broadcast_info",children:t("BROADCAST.LAYOUT_OPTIONS.BANNER_TEXT_LIMIT")})}),(0,s.jsxs)("div",{className:"broadcast_video_banner_action_wraper",children:[(0,s.jsxs)("div",{className:"broadcast_video_banner_action",children:[(0,s.jsx)(re,{toggleType:" style2 ",toggleAnimate:!0,jestId:"Status-1",name:"getBannerStatus",onChange:e=>{var t;N(e),(0,ne.kK)((0,S.fv)(),_,null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},id:"videoBannerAction",status:C,parentId:"broadcast_video_banner"}),(0,s.jsx)("label",{htmlFor:"videoBannerAction",className:"info",children:t("BROADCAST.LAYOUT_OPTIONS.ENABLE_THE_BANNER")})]}),(0,s.jsxs)("div",{className:"update_group",children:[I!==x&&(0,s.jsx)("button",{name:"getUpdateBanner",style:{paddingTop:"14px",marginRight:"16px"},onClick:()=>{b((0,S.sf)(I))},className:"update_action",type:"button",children:"Restore"}),(0,s.jsx)("button",{name:"getUpdateBanner",style:{paddingTop:"14px"},onClick:()=>{(0,U.s9)()||((0,h.wY)(x)?(b((0,S.sf)(x)),(0,ne.Hy)((0,S.fv)(),_,(0,S.sf)(x)),(0,pe.ix)((0,S.sf)(x),_,C),y.kl.successToast("Banner updated successfully.")):((0,ge.x_)("You Cannot Update Empty Banner"),b((0,S.sf)(I))))},className:(0,h.wY)(x)?"update_action":"update_action_deactive",type:"button",children:"Update"})]})]})]}),false,(0,s.jsxs)("div",{className:"broadcast_video_brand_logo top_space_even",children:[(0,s.jsx)("h5",{className:"broadcast_title",children:"Backgrounds"}),(0,s.jsx)("p",{className:"broadcast_info",children:"Choose a background to fit your brand. This will be displayed in the live screen"}),(0,s.jsx)(xe,{})]}),(0,s.jsxs)("div",{className:"broadcast_video_brand_logo top_space_even",children:[(0,s.jsx)("h5",{className:"broadcast_title",children:"Overlay"}),(0,s.jsx)("p",{className:"broadcast_info",children:"Overlays are customised visuals that appear on top of your screen"}),(0,s.jsx)(Se,{})]})]})};var je=a(28598);a(77978);const _e=function(){var e;const[t,a]=(0,i.useState)(!1),[l,n]=(0,i.useState)(""),o=null===(e=P.Z.getState())||void 0===e?void 0:e.awsStageReducer;return console.log("qwqw awsStageData",o),(0,i.useEffect)((()=>(setTimeout((()=>{a(!0)}),500),()=>{a(!1)})),[]),(0,i.useEffect)((()=>{n("");const e=(0,Q.DT)(o);console.log("qwqw constructedRequestData",e),n(null===e||void 0===e?void 0:e.sessionJid)}),[]),(0,s.jsx)(s.Fragment,{children:t?(0,s.jsx)("div",{className:"BroadcastChat_chat_image",children:""===l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{alt:"chat",src:g.HC}),(0,s.jsx)("div",{className:"chat_text",children:"Chat is currently unavailable at this moment. Please try again later."})]}):(0,s.jsx)("div",{className:"Broadcastchat_wrapper",children:(0,s.jsx)(je.R8,{sdkInitial:!0,userId:l,chatType:"groupchat",width:"100%",height:"100%"})})}):null})},ye=(0,i.memo)(_e);var Ne=a(41554),Ie=a(96728),Ce=a(49853),ke=a(86831);const Te=function(e){var t,a,l,n,o,d;const{_handleScreenShare:c=(()=>{}),isHost:r=!1,isScreenShare:u=!1,userName:v="Prabhu Mariappan",getGoLive:m}=e,[h,f]=(0,i.useState)(!1),[b,j]=(0,i.useState)(!1),[_,N]=(0,i.useState)(u),[I,C]=(0,i.useState)(!1),[k,T]=(0,i.useState)(""),[w,E]=(0,i.useState)(""),D=(0,B.v9)((e=>null===e||void 0===e?void 0:e.stageParticipants)),O=(0,B.v9)((e=>null===e||void 0===e?void 0:e.stageParticipantsData)),[A,M]=(0,i.useState)({}),L=null===(t=P.Z.getState())||void 0===t||null===(a=t.participantListReducer)||void 0===a?void 0:a.participantList,Z=null===(l=P.Z.getState())||void 0===l?void 0:l.awsStageReducer,R=null===(n=P.Z.getState())||void 0===n?void 0:n.broadcastBranding,U=(null===R||void 0===R?void 0:R.videoMutedParticipants)||[],V=(null===R||void 0===R?void 0:R.audioMutedParticipants)||[],H=(null===R||void 0===R?void 0:R.hlsLink)||"",q=(null===R||void 0===R?void 0:R.removeParticipant)||!1,z=(null===R||void 0===R?void 0:R.host)||"",W=(null===R||void 0===R?void 0:R.postion1)||"",J=(null===R||void 0===R?void 0:R.postion2)||"",Y=(null===R||void 0===R?void 0:R.postion3)||"",G=(null===R||void 0===R?void 0:R.isScreenShare)||!1,K=(0,ke.cV)()||{},{data:{email:X=""}={}}=K,ee=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};T(null===t||void 0===t?void 0:t.userName),E(t),f(e),e||(()=>{const e=[...V,null===w||void 0===w?void 0:w.userId];(0,ne.OC)((0,S.fv)(),(0,S.yk)(Z),e),y.kl.infoToastblue((0,s.jsxs)("div",{className:"customToast",children:[(0,s.jsx)("i",{className:"info",children:(0,s.jsx)(p.Zog,{})}),(0,s.jsx)("p",{children:"You muted ".concat(null===w||void 0===w?void 0:w.userName," for everyone in the ").concat(m?" broadcast ":" live stream")})]}))})()},te=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};T(null===t||void 0===t?void 0:t.userName),E(t),N(e),e||((0,ne.zV)((0,S.fv)(),!1),y.kl.infoToastblue((0,s.jsxs)("div",{className:"customToast",children:[(0,s.jsx)("i",{className:"info",children:(0,s.jsx)(p.Zog,{})}),(0,s.jsx)("p",{children:"You stopped ".concat(null===w||void 0===w?void 0:w.userName," screen share for everyone in the  ").concat(m?" broadcast ":" live stream")})]})))},ae=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};T(null===t||void 0===t?void 0:t.userName),E(t),j(e),e||(()=>{console.log(U,null===w||void 0===w?void 0:w.userId,"videoMuteSettervideoMuteSetter");const e=[...U,null===w||void 0===w?void 0:w.userId];(0,ne.mZ)((0,S.fv)(),(0,S.yk)(Z),e),y.kl.infoToastblue((0,s.jsxs)("div",{className:"customToast",children:[(0,s.jsx)("i",{className:"info",children:(0,s.jsx)(p.Zog,{})}),(0,s.jsx)("p",{children:"You tuned off ".concat(null===w||void 0===w?void 0:w.userName,"'s camera for everyone in the ").concat(m?" broadcast ":" live stream")})]}))})()},ie=function(){C(arguments.length>0&&void 0!==arguments[0]&&arguments[0])},le=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T(""===e.userName?e.userEmail.split("@")[0]:e.userName),M(e),C(!0)},oe=()=>{P.Z.dispatch(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return console.log("removeParticipantAction",e),{type:F.xe,data:e}}(A)),C(!1),(0,ne.qm)((0,S.fv)(),(0,S.yk)(Z),L.length)},se=function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:""){case"audio":ee(!1);break;case"video":ae(!1);break;case"screenShare":te(!1);break;default:return!1}};(0,i.useEffect)((()=>{P.Z.dispatch((0,Ce.z)((0,S.yk)(Z)))}),[q,O]),(0,i.useEffect)((()=>{G||N(G)}),[G]);const de=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""===e?(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").split("@")[0]:e},ce=e=>e.filter((e=>null!==(null===e||void 0===e?void 0:e.userId))).filter((e=>D.findIndex((t=>(null===t||void 0===t?void 0:t.userId)==(null===e||void 0===e?void 0:e.userId)))<0)),re=e=>(0,Q.Xm)(O[e],"audio"),ue=e=>(0,Q.Xm)(O[e],"video"),ve=e=>{var t;const a=null===D||void 0===D?void 0:D.find((e=>{var t;return"screenShare"===(null===e||void 0===e||null===(t=e.attributes)||void 0===t?void 0:t.type)}));return(null===(t=O[e])||void 0===t?void 0:t.userId)===(null===a||void 0===a?void 0:a.userId)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"participants_list_wraper",children:[(0,s.jsx)("div",{className:"participants_list",children:(e=>{let t=e;return e.length>1&&(t=(0,S.$w)(e,(0,S.f1)(e,z.toString()),z.toString()),t=(0,S.i)(t,(0,S.f1)(e,z.toString()),W,J,Y)),t})((me=L,me.filter((e=>D.findIndex((t=>(null===t||void 0===t?void 0:t.userId)==(null===e||void 0===e?void 0:e.userId)))>-1)))).map((e=>O[null===e||void 0===e?void 0:e.stageParticipantId]&&(0,s.jsxs)(i.Fragment,{children:[(0,s.jsxs)("div",{style:{paddingRight:0},className:"participants_list_info",children:[(0,s.jsxs)("div",{className:"participant_info",children:[null!==(null===e||void 0===e?void 0:e.userId)?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("span",{"data-email":e.userEmail,style:{background:null!==(null===e||void 0===e?void 0:e.userId)?(0,S.yC)(e.userEmail):"transparent"},className:"initial relative",children:[e.userId===z?(0,s.jsx)("div",{className:"icon_crown",children:(0,s.jsx)(g.rr,{})}):null,(0,x.Qm)(de(e.userName,e.userEmail))]})}):(0,s.jsxs)("div",{className:"relative",children:[0===e.isHost?(0,s.jsx)("div",{className:"icon_crown",children:(0,s.jsx)(g.rr,{})}):null,(0,s.jsx)(Ne.Z,{style:{width:"32px",height:"32px"},src:g.C,name:v,className:"img",placeholder:g.C})]}),(0,s.jsx)("strong",{title:""===e.userName?e.userEmail.split("@")[0]:e.userName,className:"",children:""===e.userName?e.userEmail.split("@")[0]:e.userName}),X===e.userEmail?(0,s.jsx)("span",{className:"badge_you",children:"You"}):null]}),(0,s.jsxs)("div",{className:"call_actions",children:[ve(null===e||void 0===e?void 0:e.stageParticipantId)?(0,s.jsxs)("button",{onClick:()=>{r&&e.userId!==(0,S.rc)()&&ve(null===e||void 0===e?void 0:e.stageParticipantId)&&te(!0,e)},style:{cursor:r&&e.userId!==(0,S.rc)()?" pointer ":" default "},className:" ".concat(r&&e.userId!==(0,S.rc)()?" hover_btn ":""," call_action_button  tooltip_black_wraper relative ").concat(ve(null===e||void 0===e?void 0:e.stageParticipantId)?" active ":" inactive "),type:"button",children:[(0,s.jsx)(g.Sx,{}),r&&e.userId!==(0,S.rc)()&&(0,s.jsx)("div",{className:"tooltip_black left flex full",children:ve(null===e||void 0===e?void 0:e.stageParticipantId)?(0,s.jsxs)(s.Fragment,{children:["Stop ",(0,s.jsx)("span",{title:""===e.userName?e.userEmail.split("@")[0]:e.userName,className:"text_controler",style:{maxWidth:"120px"},children:""===e.userName?e.userEmail.split("@")[0]:e.userName}),"'s "," "," Screen share"]}):""})]}):null,(0,s.jsxs)("button",{style:{cursor:r&&X!==e.userEmail&&e.userId!==(0,S.rc)()&&!ue(null===e||void 0===e?void 0:e.stageParticipantId)?" pointer ":" default "},onClick:()=>{r&&e.userId!==(0,S.rc)()&&!ue(null===e||void 0===e?void 0:e.stageParticipantId)&&ae(!0,e)},className:" ".concat(r&&e.userId!==(0,S.rc)()?" hover_btn ":""," call_action_button tooltip_black_wraper relative ").concat(ue(null===e||void 0===e?void 0:e.stageParticipantId)?" inactive ":" active "),type:"button",children:[ue(null===e||void 0===e?void 0:e.stageParticipantId)?(0,s.jsx)(g.yQ,{style:{color:e.userId===z?"#959595":""}}):(0,s.jsx)(g.AC,{style:{color:e.userId===z?"#959595":""}}),r&&e.userId!==(0,S.rc)()&&(0,s.jsx)("div",{className:"tooltip_black left flex full",children:ue(null===e||void 0===e?void 0:e.stageParticipantId)?"You can't turn on someone's Camera":(0,s.jsxs)(s.Fragment,{children:["Turn Off ",(0,s.jsxs)("span",{title:""===e.userName?e.userEmail.split("@")[0]:e.userName,className:"text_controler",children:[" ",""===e.userName?e.userEmail.split("@")[0]:e.userName]}),"'s Camera"]})})]}),(0,s.jsxs)("button",{style:{cursor:r&&X!==e.userEmail&&e.userId!==(0,S.rc)()&&!re(null===e||void 0===e?void 0:e.stageParticipantId)?" pointer ":" default "},className:"".concat(r&&e.userId!==(0,S.rc)()?" hover_btn ":""," call_action_button tooltip_black_wraper relative ").concat(re(null===e||void 0===e?void 0:e.stageParticipantId)?" inactive ":" active "),onClick:()=>{r&&e.userId!==(0,S.rc)()&&!re(null===e||void 0===e?void 0:e.stageParticipantId)&&ee(!0,e)},type:"button",children:[re(null===e||void 0===e?void 0:e.stageParticipantId)?(0,s.jsx)(g.FA,{style:{color:e.userId===z?"#959595":""}}):(0,s.jsx)(g.$W,{style:{color:e.userId===z?"#959595":""}}),r&&e.userId!==(0,S.rc)()&&(0,s.jsx)("div",{className:"tooltip_black left flex full",children:re(null===e||void 0===e?void 0:e.stageParticipantId)?"You can't unmute someone's Mic":(0,s.jsxs)(s.Fragment,{children:["Mute ",(0,s.jsxs)("span",{title:""===e.userName?e.userEmail.split("@")[0]:e.userName,className:"text_controler",children:[" ",""===e.userName?e.userEmail.split("@")[0]:e.userName]}),"'s Mic"]})})]}),r&&(0,s.jsx)("button",{style:{cursor:r&&X!==e.userEmail?" pointer ":" default ",visibility:r&&e.userId!==(0,S.rc)()?"visible":"hidden"},title:"Remove",className:"call_action_remove",onClick:0!==(r&&e.isHost)?()=>le(e):()=>{},type:"button",children:(0,s.jsx)(p.kLi,{})})]})]}),"              "]},e.userId)))}),((null===(o=ce(L))||void 0===o?void 0:o.length)>0||(null===(d=L.filter((e=>!e.userId)))||void 0===d?void 0:d.length)>0)&&(0,s.jsx)("div",{className:"invited_participants",children:(0,s.jsxs)("div",{className:"invited_participants_inner",children:[(0,s.jsx)("div",{className:"invited_participants_head",children:(0,s.jsx)("h4",{children:"Invited Participants"})}),(0,s.jsxs)("div",{className:"participants_list",children:[ce(L).map((e=>(0,s.jsx)(i.Fragment,{children:(0,s.jsxs)("div",{id:"Unjoined-Id-".concat(null===e||void 0===e?void 0:e.userEmail),className:"participants_list_info",children:[(0,s.jsxs)("div",{className:"participant_info",children:[null!==e&&void 0!==e&&e.userName?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("span",{"data-email":e.userEmail,style:{background:null!==(null===e||void 0===e?void 0:e.userId)?(0,S.yC)(e.userEmail):"transparent"},className:"initial relative",children:[e.userId===z?(0,s.jsx)("div",{className:"icon_crown",children:(0,s.jsx)(g.rr,{})}):null,(0,x.Qm)(de(e.userName,e.userEmail))]})}):(0,s.jsx)(Ne.Z,{style:{width:"32px",height:"32px"},src:g.C,name:null===e||void 0===e?void 0:e.userEmail,className:"img",placeholder:g.C}),(0,s.jsx)("strong",{title:""===e.userName?e.userEmail.split("@")[0]:e.userName,className:"",children:null!==e&&void 0!==e&&e.userName?null===e||void 0===e?void 0:e.userName:null===e||void 0===e?void 0:e.userEmail})]}),(0,s.jsxs)("div",{className:"call_actions",children:[(0,s.jsx)("span",{className:"status ".concat(null!==e&&void 0!==e&&e.userId?"not_joined":"joined"," "),children:null!==e&&void 0!==e&&e.userId?"Yet to join":"invited"}),!r||0===e.isHost&&0!==e.isHost?null:(0,s.jsx)("button",{style:{visibility:r&&0!==e.isHost?"visible":"hidden"},title:"Remove",className:"call_action_remove",onClick:0!==(r&&e.isHost)?()=>le(e):()=>{},type:"button",children:(0,s.jsx)(p.kLi,{})})]})]})},e.userId))),L.filter((e=>!e.userId)).map((e=>(0,s.jsx)(i.Fragment,{children:(0,s.jsxs)("div",{id:"Unjoined-Id-".concat(null===e||void 0===e?void 0:e.userEmail),className:"participants_list_info",children:[(0,s.jsxs)("div",{className:"participant_info",children:[null!==e&&void 0!==e&&e.userName?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("span",{"data-email":e.userEmail,style:{background:null!==(null===e||void 0===e?void 0:e.userId)?(0,S.yC)(e.userEmail):"transparent"},className:"initial relative",children:[e.userId===z?(0,s.jsx)("div",{className:"icon_crown",children:(0,s.jsx)(g.rr,{})}):null,(0,x.Qm)(de(e.userName,e.userEmail))]})}):(0,s.jsx)(Ne.Z,{style:{width:"32px",height:"32px"},src:g.C,name:null===e||void 0===e?void 0:e.userEmail,className:"img",placeholder:g.C}),(0,s.jsx)("strong",{title:null!==e&&void 0!==e&&e.userName?null===e||void 0===e?void 0:e.userName:null===e||void 0===e?void 0:e.userEmail,className:"",children:null!==e&&void 0!==e&&e.userName?null===e||void 0===e?void 0:e.userName:null===e||void 0===e?void 0:e.userEmail})]}),(0,s.jsxs)("div",{className:"call_actions",children:[(0,s.jsx)("span",{className:"status ".concat(null!==e&&void 0!==e&&e.userId?"not_joined":"joined"," "),children:null!==e&&void 0!==e&&e.userId?"Yet to join":"invited"}),!r||0===e.isHost&&0!==e.isHost?null:(0,s.jsx)("button",{style:{visibility:r&&0!==e.isHost?"visible":"hidden"},title:"Remove",className:"call_action_remove",onClick:0!==(r&&e.isHost)?()=>le(e):()=>{},type:"button",children:(0,s.jsx)(p.kLi,{})})]})]})},e.userId)))]})]})})]}),I?(0,s.jsx)($.Z,{children:(0,s.jsx)(Ie.Z,{iconComponentClass:"icon_custom_size",iconComponent:(0,s.jsx)(p.$_W,{}),title:"Remove Participant?",description:(0,s.jsxs)(s.Fragment,{children:["Are you sure you want to remove ",(0,s.jsxs)("strong",{children:[' "',k,'" ']})," ","from ",H?"the Live stream?":"the Broadcast?"]}),setActive:!0,onExited:()=>ie(!1),actionButtonText:"Remove",cancelButtonText:"Cancel",handleClose:()=>ie(!1),handleAction:()=>oe()})}):null,h?(0,s.jsx)($.Z,{children:(0,s.jsx)(Ie.Z,{iconComponent:(0,s.jsx)(g.FA,{}),title:"Mute Mic?",description:(0,s.jsxs)(s.Fragment,{children:[" Mute ",(0,s.jsxs)("strong",{children:[' "',k,'" ']})," "," for everyone in the call? Only ",k," can unmute themselves."]}),setActive:!0,onExited:()=>ee(!1),actionButtonText:"Mute",cancelButtonText:"Cancel",handleClose:()=>f(!1),handleAction:()=>se("audio")})}):null,b?(0,s.jsx)($.Z,{children:(0,s.jsx)(Ie.Z,{iconComponent:(0,s.jsx)(g.yQ,{}),title:"Turn Off Camera?",description:(0,s.jsxs)(s.Fragment,{children:["Turn Off ",(0,s.jsxs)("strong",{children:[' "',k,'" ']})," "," Camera for everyone in the live? Only ",k," can turn on themselves."]}),setActive:!0,onExited:()=>ae(!1),actionButtonText:"Turn Off",cancelButtonText:"Cancel",handleClose:()=>j(!1),handleAction:()=>se("video")})}):null,_?(0,s.jsx)($.Z,{children:(0,s.jsx)(Ie.Z,{iconComponent:(0,s.jsx)(g.p7,{}),title:"Stop Screen Share?",description:(0,s.jsxs)(s.Fragment,{children:["Stop ",(0,s.jsxs)("strong",{children:[' "',k,'" ']})," "," screen share for everyone in the ",H?"Live stream?":"Broadcast?"]}),setActive:!0,onExited:()=>N(!1),actionButtonText:"Stop",cancelButtonText:"Cancel",handleClose:()=>N(!1),handleAction:()=>se("screenShare")})}):null]});var me};var we=a(26831);const Ee=function(e){const{getvideoDetailsEle:t={},_videoId:a="",getMenusOpen:i=!1,getSelectedUrl:l="",playData:n={},getSelectedThumb:o=""}=e;return(0,s.jsxs)("div",{className:"share_live_broadcast_wraper",children:[(0,s.jsxs)("div",{className:"content_head",children:[(0,s.jsx)("h4",{children:"Share Live Broadcast"}),(0,s.jsx)("p",{children:"Use the below embed code link to stream in other websites."})]}),i&&(0,s.jsx)(we.Z,{_videoId:a,shareLiveUrl:!0,getvideoDetailsEle:t,getSelectedUrl:l,getSelectedThumb:o,playData:n})]})};const De=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{isHost:t=!1,_handleMenusOpen:a=(()=>{}),getMenus:i="",getMenusOpen:l=!1,handleLayoutViewType:n=(()=>{}),handleResizedImage:o=(()=>{}),getvideoDetailsEle:d={},getSelectedUrl:c="",getSelectedThumb:r="",playData:u={},handleInput:v=(()=>{}),getBannerText:m="",videoId:h="",disableClick:p=!1,_handleAudioMute:g=(()=>{}),_handleVideoMute:f=(()=>{}),getGoLive:x,muteStatus:S}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{display:""!==i&&l?"block":"none"},onClick:a,className:"broadcast_video_outside_click"}),(0,s.jsxs)("div",{id:"broadcast_video_info",className:"broadcast_video_info ".concat(""!==i&&l?" open ":" hidden "),children:[(0,s.jsx)("div",{className:"broadcast_video_info_header",children:(0,s.jsxs)("h3",{children:[" ","Brand"===i&&t?"Brand":null,"Chat"===i?"Private Chat":null,"Participants"===i?"Participants":null,"Share"===i?"Share":null]})}),(0,s.jsxs)("div",{className:"broadcast_video_info_inner",style:{padding:"Brand"!==i?" 0px ":""},children:["Brand"===i&&t?(0,s.jsx)(be,{handleResizedImage:o,getBannerText:m,_handleInput:v,disableClick:p,handleLayoutViewType:e=>n(e)}):null,"Chat"===i?(0,s.jsx)(ye,{}):null,"Participants"===i?(0,s.jsx)(Te,{muteStatus:S,_handleAudioMute:e=>g(e),_handleVideoMute:e=>f(e),isHost:t,getGoLive:x}):null,"Share"===i?(0,s.jsx)(Ee,{_videoId:h,shareLiveUrl:!0,getvideoDetailsEle:d,getSelectedUrl:c,getSelectedThumb:r,playData:u,getMenusOpen:l}):null]})]})]})};function Oe(e){const{largeVideo:t=!1,getCanvasHeight:a=0,participantsData:l={},type:n="",videoMute:o,_getZoom:d=!0,audioMute:c,getMetaData:r=(()=>{}),fbBannerStyle:u="",fbBannerBgColor:v="",FbBannerTextColor:m="",screenShareId:h=""}=e,p=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.broadcastBranding)||void 0===t?void 0:t.bannerStatus})),f=(0,B.v9)((e=>null===e||void 0===e?void 0:e.localStreams));console.log(l,"participantsDataparticipantsDataparticipantsData");const x={borderTopLeftRadius:""===u&&t?"calc(calc(1.25/100) * ".concat(a,"px) calc(calc(1.25/100) * ").concat(a,"px)"):null,borderBottomLeftRadius:""===u&&t?"calc(calc(1.25/100) * ".concat(a,"px) calc(calc(1.25/100) * ").concat(a,"px)"):null,marginLeft:t?"calc(calc(.5/100) * ".concat(a,"px)"):null,borderLeftWidth:""===u&&t?"calc(calc(2/100) * ".concat(a,"px)"):null,fontSize:t?"calc(calc(3.46/100) * ".concat(a,"px)"):null,padding:t?"calc(calc(1.4/100) * ".concat(a,"px) calc(calc(2.8/100) * ").concat(a,"px)"):null,borderLeftColor:""===u?v:"",background:""===u?" ":v,color:(0,S.Ic)(u,v,m)},[b,j]=(0,i.useState)(),[_,y]=(0,i.useState)(),[N,I]=(0,i.useState)(""),C=0!==Object.keys(l).length&&(0,Q.MV)(l,"video"),k=0!==Object.keys(l).length&&(0,Q.MV)(l,"audio"),T=function(){if(""===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")&&C&&(b!==(0,Q.Xm)(l,"video")||null!==l&&void 0!==l&&l.updateLocalStream)){const e=document.getElementById("video-".concat(n,"-").concat(l.id));e&&(e.srcObject=new MediaStream,e.srcObject.addTrack(C)),setTimeout((()=>{"participants"===n&&null!==l&&void 0!==l&&l.updateLocalStream&&P.Z.dispatch((0,ie.oD)({...l,updateLocalStream:"alter"}))}),[400])}if(k&&!l.isLocal&&_!==(0,Q.Xm)(l,"audio")){const e=document.getElementById("audio-participants-".concat(l.id));e&&(e.srcObject=new MediaStream,e.srcObject.addTrack(k))}if(h!==(0,S.rc)()){const e=document.getElementById("audio-screen-share-".concat(l.id));e&&(e.srcObject=new MediaStream,e.srcObject.addTrack(k))}(e=>{var t,a,i,l,n,o;const s="live"===(null===e||void 0===e||null===(t=e.stream)||void 0===t||null===(a=t.find((e=>"video"===e.streamType)))||void 0===a||null===(i=a.mediaStreamTrack)||void 0===i?void 0:i.readyState),d="live"===(null===e||void 0===e||null===(l=e.stream)||void 0===l||null===(n=l.find((e=>"audio"===e.streamType)))||void 0===n||null===(o=n.mediaStreamTrack)||void 0===o?void 0:o.readyState);s&&j((0,Q.Xm)(e,"video")),d&&y((0,Q.Xm)(e,"audio"))})(l)};return(0,i.useEffect)((()=>{console.log(l,"participantsData---participantsData"),T(),async function(){const e=await(0,U.d5)(null===l||void 0===l?void 0:l.userId);I(e)}()}),[l]),(0,i.useEffect)((()=>{T("audio")}),[c]),(0,i.useEffect)((()=>{T()}),[o]),(0,i.useEffect)((()=>(r("video-".concat(n,"-").concat(l.id)),()=>{j(),y()})),[]),(0,i.useEffect)((()=>{if(f){const{DeviceIds:{speaker:e}}=f;async function t(){const t=document.getElementById("audio-participants-".concat(l.id));t&&await t.setSinkId(e)}t()}}),[f]),(0,s.jsxs)(s.Fragment,{children:[o?(0,s.jsxs)("div",{className:"broadcast_particiapant_pic ",children:[(0,s.jsx)("img",{style:{"z:index":"100"},src:g.C,alt:"profile"}),p&&"broadcast-participants"===n||""===N?null:(0,s.jsx)("div",{style:{opacity:d?1:0},className:"broadcast_particiapant_name ".concat(o?"with_img":" with_vdo "),children:(0,s.jsxs)("span",{style:x,className:"broadcast_particiapant_badge ".concat(""===u?"default":"style"+u),id:"dpName-".concat(n,"-").concat(l.id),title:N,children:[N," "]})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("video",{id:"video-".concat(n,"-").concat(l.id),autoPlay:!0,preload:"none",className:"".concat(l.isLocal?"video_mirror":"")}),p&&"broadcast-participants"===n||""===N||"screen-share"===n?null:(0,s.jsx)("div",{style:{opacity:d?1:0},className:"broadcast_particiapant_name ".concat(o?"with_img":" with_vdo "),children:(0,s.jsxs)("span",{style:x,className:"broadcast_particiapant_badge ".concat(""===u?"default":"style"+u),id:"dpName-".concat(n,"-").concat(l.id),title:N,children:[N," "]})})]}),"participants"===n&&(0,Q.Xm)(l,"audio")?(0,s.jsx)("div",{className:"mic_inactive",children:(0,s.jsx)(g.FA,{})}):null,!c&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("audio",{id:"audio-".concat(n,"-").concat(l.id),autoPlay:!0})})]})}const Ae=i.memo(Oe);const Be=function(e){const{participants:t=[],participantsData:a={},localMuteStatus:i={},getSmCanvasWidth:l="",getSmCanvasHeight:n=""}=e;return(0,s.jsx)(s.Fragment,{children:(o=t,d=a,o.map((e=>{let t=i.audioMute,o=i.videoMute;return null!==e&&void 0!==e&&e.isLocal||d[null===e||void 0===e?void 0:e.id]&&(t=(0,Q.RN)(d[null===e||void 0===e?void 0:e.id],"audio").isMuted,o=(0,Q.RN)(d[null===e||void 0===e?void 0:e.id],"video").isMuted),(0,s.jsx)("div",{style:{width:"".concat(l,"px"),height:"".concat(n,"px")},className:"broadcast_particiapant",children:(0,s.jsx)(Ae,{type:"participants",participantsData:d[null===e||void 0===e?void 0:e.id],wholeParticipantsData:a,audioMute:t,videoMute:o},null===e||void 0===e?void 0:e.id)},null===e||void 0===e?void 0:e.id)})))});var o,d};var Me=a(12489);function Le(e,t,a,i){var l=e.createScriptProcessor(512);return l.onaudioprocess=Ze,l.clipping=!1,l.lastClip=0,l.volume=0,l.clipLevel=t||.98,l.averaging=a||.95,l.clipLag=i||750,l.connect(e.destination),l.checkClipping=function(){return!!this.clipping&&(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping)},l.shutdown=function(){this.disconnect(),this.onaudioprocess=null},l}function Ze(e){for(var t,a=e.inputBuffer.getChannelData(0),i=a.length,l=0,n=0;n<i;n++)t=a[n],Math.abs(t)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),l+=t*t;var o=Math.sqrt(l/i);this.volume=Math.max(o,this.volume*this.averaging)}var Re=null,Pe=null,Fe=null,Ue=500,Ve=500,He=null;function qe(e){Fe=document.getElementById("mic_volume").getContext("2d"),Re=new AudioContext,He=Re.createMediaStreamSource(e),Pe=Le(Re),He.connect(Pe),We()}function ze(e){Fe=document.getElementById("mic_volume1").getContext("2d"),Re=new AudioContext,He=Re.createMediaStreamSource(e),Pe=Le(Re),He.connect(Pe),We()}function We(e){Fe.clearRect(0,0,Ue,Ve),Pe.checkClipping(),Fe.fillStyle="green",Fe.fillRect(0,150,Ue,Pe.volume*Ve*-1.4),window.requestAnimationFrame(We)}const Je=a.p+"static/media/morning-garden-acoustic-chill-15013.87ba41f318d955cede1e.mp3";const Ye=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[t,a]=(0,i.useState)(!1),[n,o]=(0,i.useState)(),[d,c]=(0,i.useState)(),r=(0,B.v9)((e=>null===e||void 0===e?void 0:e.localDeviceLists)),{t:u}=(0,l.$)(),{micDeviceStream:v=(()=>{}),speakerDeviceStream:m=(()=>{}),initials:h=(()=>{}),isAudioMute:p,_handleOnOutsideClick:f=(()=>{})}=e,x=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.localDeviceLists)||void 0===t?void 0:t.audioDevices})),S=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.localDeviceLists)||void 0===t?void 0:t.audioOutputDevices})),b=(0,B.v9)((e=>null===e||void 0===e?void 0:e.localStreams)),j=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.tempStreams)||void 0===t?void 0:t.audio})),_=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.tempStreams)||void 0===t?void 0:t.speaker})),[y,N]=(0,i.useState)({getMicLabel:"",getSpeakerLabel:"",getAdjustMic:!1,getEchoCancellation:!1,getStereoAudio:!1,getShiftComments:!1});(0,i.useEffect)((()=>{!async function(e,t){var a,i,l,n,s,d,r,u;const v=(null===e||void 0===e?void 0:e.deviceData)||(null===b||void 0===b||null===(a=b.DeviceIds)||void 0===a?void 0:a.audio)||(null===(i=x[0])||void 0===i?void 0:i.deviceId),m=(null===t||void 0===t?void 0:t.deviceData)||(null===b||void 0===b||null===(l=b.DeviceIds)||void 0===l?void 0:l.speaker)||(null===(n=S[0])||void 0===n?void 0:n.deviceId),g=S.filter((e=>e.deviceId===m))[0];if(null!==e&&void 0!==e&&null!==(s=e.selectMic)&&void 0!==s&&s.active)o(null===e||void 0===e?void 0:e.selectMic),ze(null===e||void 0===e?void 0:e.selectMic);else{const e=p?{}:await(0,H.sS)(v);!p&&o(e),!p&&ze(e),P.Z.dispatch((0,ie.r4)({selectMic:e,deviceData:v}))}null!==t&&void 0!==t&&t.deviceData?c(null===t||void 0===t?void 0:t.speakerOut):(c(g),P.Z.dispatch((0,ie.gz)({speakerOut:g,deviceData:null===g||void 0===g?void 0:g.deviceId}))),null!==e&&void 0!==e&&null!==(d=e.selectMic)&&void 0!==d&&d.active||null!==t&&void 0!==t&&t.deviceData||h(x.filter((e=>e.deviceId===v)),S.filter((e=>e.deviceId===(null===g||void 0===g?void 0:g.deviceId)))),N({...y,getMicLabel:null===(r=x.filter((e=>e.deviceId===v))[0])||void 0===r?void 0:r.label,getSpeakerLabel:null===(u=S.filter((e=>e.deviceId===m))[0])||void 0===u?void 0:u.label})}(j,_)}),[]),(0,i.useEffect)((()=>{var e,t,a,i;const l=(0,H.tq)(null===b||void 0===b||null===(e=b.DeviceIds)||void 0===e?void 0:e.audio,"audio");let n="";if(l!==(null===b||void 0===b||null===(t=b.DeviceIds)||void 0===t?void 0:t.audio)){var s,d;const e=void 0;P.Z.dispatch((0,ie.r4)({selectMic:e,deviceData:l})),n=null===(s=x.filter((e=>(null===e||void 0===e?void 0:e.deviceId)===l))[0])||void 0===s?void 0:s.label,N({...y,getMicLabel:null===(d=x.filter((e=>(null===e||void 0===e?void 0:e.deviceId)===l))[0])||void 0===d?void 0:d.label}),console.log("selectCamera---1"),o(e),v(x.filter((e=>e.deviceId===l)))}const r=null===x||void 0===x?void 0:x.findIndex((e=>(null===e||void 0===e?void 0:e.deviceId)===(null===j||void 0===j?void 0:j.deviceData)));null!==j&&void 0!==j&&j.deviceData&&r<0&&(f(),(0,ge.LP)("Selected Mic Device Not Found"));const u=(0,H.tq)(null===b||void 0===b||null===(a=b.DeviceIds)||void 0===a?void 0:a.speaker,"speaker");if(u!==(null===b||void 0===b||null===(i=b.DeviceIds)||void 0===i?void 0:i.speaker)){var h,p;if(n)console.log(n,"tempMictempMictempMictempMictempMic"),N({...y,getMicLabel:n,getSpeakerLabel:null===(h=S.filter((e=>e.deviceId===u))[0])||void 0===h?void 0:h.label});else N({...y,getSpeakerLabel:null===(p=S.filter((e=>e.deviceId===u))[0])||void 0===p?void 0:p.label});m(S.filter((e=>e.deviceId===u)));const e=S.filter((e=>e.deviceId===u))[0];P.Z.dispatch((0,ie.gz)({speakerOut:e,deviceData:u})),c(e)}const g=null===S||void 0===S?void 0:S.findIndex((e=>(null===e||void 0===e?void 0:e.deviceId)===(null===_||void 0===_?void 0:_.deviceData)));null!==_&&void 0!==_&&_.deviceData&&g<0&&(f(),(0,ge.LP)("Selected Speaker Device Not Found"))}),[r]);const I=x.map((e=>({id:e.deviceId,option:e.label}))),C=S.map((e=>({id:e.deviceId,option:e.label}))),{getMicLabel:k,getSpeakerLabel:T}=y;return(0,i.useEffect)((()=>{!async function(){const e=document.getElementById("myAudio");await e.setSinkId(d.deviceId),t?e.play():e.pause()}()}),[t]),(0,i.useEffect)((()=>{if(!n&&b){const{localMic:e}=b;setTimeout((()=>{ze(e)}),[500])}n&&setTimeout((()=>{ze(n)}),[500])}),[b,n,d]),(0,i.useEffect)((()=>{a(!1);document.getElementById("myAudio").pause()}),[d]),(0,s.jsxs)(s.Fragment,{children:[" ",(0,s.jsxs)("audio",{id:"myAudio",children:[(0,s.jsx)("source",{src:Je,type:"audio/mpeg"}),"Your browser does not support the audio element."]}),(0,s.jsx)("fieldset",{children:(0,s.jsxs)("div",{className:"common-input-wrapper mb-0",children:[(0,s.jsx)("div",{className:"lableInfo",children:(0,s.jsx)("span",{className:"inputLabel ",children:u("BROADCAST.SETTINGS.AUDIO_TAB.MIC")})}),(0,s.jsxs)("div",{className:"drop_down_audio",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(Me.Z,{optionList:I,mustFill:!1,value:k,name:"getMic",_onBlur:()=>{},_onChange:async e=>{var t,a,i,l;const{value:s="",type:d="",checked:c=!1}=e.target||{};if(null!==n&&void 0!==n&&n.active){(null===n||void 0===n?void 0:n.getTracks()).forEach((e=>{null===e||void 0===e||e.stop()}))}const r=null===(t=P.Z.getState())||void 0===t||null===(a=t.tempStreams)||void 0===a?void 0:a.audio;if(null!==r&&void 0!==r&&r.active){(null===r||void 0===r?void 0:r.getTracks()).forEach((e=>{null===e||void 0===e||e.stop()}))}N({...y,getMicLabel:"checbox"===d?c:s});const u=null===(i=x.filter((e=>e.label===s))[0])||void 0===i?void 0:i.deviceId;v(x.filter((e=>e.label===s)));const m=!p&&await(0,H.sS)(null===(l=x.filter((e=>e.label===s))[0])||void 0===l?void 0:l.deviceId);P.Z.dispatch((0,ie.r4)({selectMic:m,deviceData:u})),o(m)},className:" ".concat("")})}),(0,s.jsxs)("div",{className:"audio_speaker_eqic ",children:[p?(0,s.jsx)(g.FA,{}):(0,s.jsx)(g.$W,{}),(0,s.jsxs)("div",{className:"audio_mic_animation",children:[(0,s.jsx)("canvas",{id:"mic_volume1",class:"mic_volume mic_volume_off mic_0 mic_30 mic_60 mic_90"}),(0,s.jsx)(g.qF,{})]})]})]})]})}),(0,s.jsx)("fieldset",{children:(0,s.jsxs)("div",{className:"common-input-wrapper mb-0",children:[(0,s.jsx)("div",{className:"lableInfo",children:(0,s.jsx)("span",{className:"inputLabel ",children:u("BROADCAST.SETTINGS.AUDIO_TAB.SPEAKER")})}),(0,s.jsxs)("div",{className:"drop_down_audio",children:[(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)(Me.Z,{optionList:C,mustFill:!1,value:T,name:"getSpeaker",_onBlur:()=>{},_onChange:async e=>{const{name:t="",value:a="",type:i="",checked:l=!1}=e.target||{};N({...y,getSpeakerLabel:"checbox"===i?l:a}),m(S.filter((e=>e.label===a)));const n=S.filter((e=>e.label===a))[0];P.Z.dispatch((0,ie.gz)({speakerOut:n,deviceData:null===n||void 0===n?void 0:n.deviceId})),c(S.filter((e=>e.label===a))[0])},className:" ".concat("")})}),(0,s.jsxs)("button",{onClick:()=>a(!t),type:"button",className:" audio_speaker_eqic ".concat(t?" active ":""),children:[(0,s.jsx)(g.DY,{}),(0,s.jsx)("span",{className:"btn_text",children:"Test"})]})]})]})})]})};const Ge=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{t:t}=(0,l.$)(),{cameraDeviceStream:a=(()=>{}),isVideoMute:n,_handleOnOutsideClick:o=(()=>{})}=e,d=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.localDeviceLists)||void 0===t?void 0:t.videoDevices})),c=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.tempStreams)||void 0===t?void 0:t.video})),r=(0,B.v9)((e=>null===e||void 0===e?void 0:e.localDeviceLists)),u=(0,B.v9)((e=>null===e||void 0===e?void 0:e.localStreams)),[v,m]=(0,i.useState)(),[h,p]=(0,i.useState)({getCameraLabel:"",getResolution:""}),f=async e=>{const t=document.getElementById("preview-camera");t.srcObject=new MediaStream;const a=new MediaStream(e);t.srcObject=a};(0,i.useEffect)((()=>{var e;v?setTimeout((()=>{f(v)}),[500]):(null===c||void 0===c||null===(e=c.selectCamera)||void 0===e?void 0:e.active)&&f(null===c||void 0===c?void 0:c.selectCamera)}),[u,v]),(0,i.useEffect)((()=>{!async function(){var e,t,i,l;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=(null===o||void 0===o?void 0:o.deviceData)||(null===u||void 0===u||null===(e=u.DeviceIds)||void 0===e?void 0:e.video)||(null===(t=d[0])||void 0===t?void 0:t.deviceId);if(console.log(o,"<<getStreamAsync>>"),null!==o&&void 0!==o&&null!==(i=o.selectCamera)&&void 0!==i&&i.active)console.log(null===o||void 0===o?void 0:o.selectCamera,"temp?.selectCamera?.active"),m(null===o||void 0===o?void 0:o.selectCamera);else{const e=!n&&await(0,H.bp)(s);P.Z.dispatch((0,ie.If)({selectCamera:e,deviceData:s})),m(e),a(d.filter((e=>e.deviceId===s)))}p({...h,getCameraLabel:null===(l=d.filter((e=>(null===e||void 0===e?void 0:e.deviceId)===s))[0])||void 0===l?void 0:l.label})}(c)}),[]),(0,i.useEffect)((()=>{var e,t;const i=(0,H.tq)(null===u||void 0===u||null===(e=u.DeviceIds)||void 0===e?void 0:e.video,"video");if(i!==(null===u||void 0===u||null===(t=u.DeviceIds)||void 0===t?void 0:t.video)){var l;const e=void 0;P.Z.dispatch((0,ie.If)({selectCamera:e,deviceData:i})),p({...h,getCameraLabel:null===(l=d.filter((e=>(null===e||void 0===e?void 0:e.deviceId)===i))[0])||void 0===l?void 0:l.label}),console.log("selectCamera---1"),m(e),a(d.filter((e=>e.deviceId===i)))}const n=null===d||void 0===d?void 0:d.findIndex((e=>(null===e||void 0===e?void 0:e.deviceId)===(null===c||void 0===c?void 0:c.deviceData)));console.log(n,"isSelectedStreamNotPresent"),null!==c&&void 0!==c&&c.deviceData&&n<0&&(o(),(0,ge.LP)("Selected Camera Device Not Found"))}),[r]);const x=d.map((e=>({id:e.deviceId,option:e.label}))),{getCameraLabel:S,getResolution:b}=h,j=async e=>{var t,i,l,o;if(null!==v&&void 0!==v&&v.active){(null===v||void 0===v?void 0:v.getTracks()).forEach((e=>{null===e||void 0===e||e.stop()}))}const s=null===(t=P.Z.getState())||void 0===t||null===(i=t.tempStreams)||void 0===i?void 0:i.video;if(null!==s&&void 0!==s&&s.active){(null===s||void 0===s?void 0:s.getTracks()).forEach((e=>{null===e||void 0===e||e.stop()}))}const{name:c="",value:r=""}=e.target||{};p({...h,[c+"Label"]:r});const u=null===(l=d.filter((e=>e.label===r))[0])||void 0===l?void 0:l.deviceId,g=!n&&await(0,H.bp)(null===(o=d.filter((e=>e.label===r))[0])||void 0===o?void 0:o.deviceId);P.Z.dispatch((0,ie.If)({selectCamera:g,deviceData:u})),m(g),a(d.filter((e=>e.label===r)))};return(0,s.jsx)("div",{className:"camera_settings_wraper",children:(0,s.jsxs)("div",{className:"camera_settings_inner",children:[(0,s.jsx)("div",{className:"camera_settings_video",children:n?(0,s.jsx)(g.yQ,{}):(0,s.jsx)("video",{className:"video_mirror",id:"preview-camera",autoPlay:!0})}),(0,s.jsx)("fieldset",{children:(0,s.jsxs)("div",{className:"common-input-wrapper mb-0",children:[(0,s.jsx)("div",{className:"lableInfo",children:(0,s.jsx)("span",{className:"inputLabel ",children:t("BROADCAST.SETTINGS.CAMERA")})}),(0,s.jsx)(Me.Z,{optionList:x,mustFill:!0,value:S,name:"getCamera",_onBlur:()=>{},_onChange:j,className:" ".concat("")})]})}),!1]})})};a(59706);function $e(e){const{t:t}=(0,l.$)(),{children:a="",handleAction:i=(()=>{})}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"stream_setting_tab",children:[(0,s.jsx)("div",{className:"stream_setting_tab_form",children:a}),(0,s.jsx)("div",{className:"action_tab_list",children:(0,s.jsx)("button",{onClick:i,type:"button",className:"action_tab",children:t("COMMON.DONE")})})]})})}const Ke=i.memo($e);var Xe=a(66310);var Qe=a(85445);const et=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=!1,{t:a}=(0,l.$)(),{_handleOnOutsideClick:n=(()=>{}),handleDone:o=(()=>{}),type:d="",isAudioMute:c,isVideoMute:r}=e,[u,v]=(0,i.useState)("Camera"),m=function(){v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")},[h,p]=(0,i.useState)({videoStream:[],audioStream:[],speakerOutput:[],isOpen:!1}),f=()=>{n(),o(h)};return(0,i.useEffect)((()=>{var e,t,a,i;!async function(){const e=await(0,H.PW)();P.Z.dispatch((0,ie.Fs)(e))}();const l=null===(e=P.Z.getState())||void 0===e?void 0:e.localStreams,n=(0,H.tq)(null===l||void 0===l||null===(t=l.DeviceIds)||void 0===t?void 0:t.video,"video"),o=(0,H.tq)(null===l||void 0===l||null===(a=l.DeviceIds)||void 0===a?void 0:a.audio,"audio"),s=(0,H.tq)(null===l||void 0===l||null===(i=l.DeviceIds)||void 0===i?void 0:i.speaker,"speaker");return P.Z.dispatch((0,ie._6)({...l,DeviceIds:{...l.DeviceIds,video:n,audio:o,speaker:s}})),()=>{var e,t,a,i,l,n;const o=null===(e=P.Z.getState())||void 0===e||null===(t=e.tempStreams)||void 0===t||null===(a=t.video)||void 0===a?void 0:a.selectCamera;if(null!==o&&void 0!==o&&o.active){(null===o||void 0===o?void 0:o.getTracks()).forEach((e=>{null===e||void 0===e||e.stop()}))}const s=null===(i=P.Z.getState())||void 0===i||null===(l=i.tempStreams)||void 0===l||null===(n=l.audio)||void 0===n?void 0:n.selectMic;if(null!==s&&void 0!==s&&s.active){(null===s||void 0===s?void 0:s.getTracks()).forEach((e=>{null===e||void 0===e||e.stop()}))}P.Z.dispatch((0,ie.O2)({}))}}),[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)($.Z,{children:(0,s.jsx)(Xe.Z,{setShow:!0,_handleOnOutsideClick:n,children:(0,s.jsx)("div",{className:"stream_settings_wraper",children:(0,s.jsxs)("div",{className:"stream_settings_inner",children:[(0,s.jsxs)("div",{className:"stream_settings_head",children:[(0,s.jsx)("i",{className:"icon_setting",children:(0,s.jsx)(g.k0,{})}),(0,s.jsx)("h3",{children:a("NAVBAR.SETTING")})]}),(0,s.jsxs)("div",{className:"stream_settings_body",children:[(0,s.jsxs)("div",{className:"stream_settings_options",children:[(0,s.jsx)(Qe.Z,{}),(0,s.jsxs)("div",{className:"stream_settings_options_list",children:[t,(0,s.jsx)("button",{onClick:()=>m("Camera"),className:"stream_settings_option ".concat("Camera"===u?" active ":" "),type:"button",children:a("BROADCAST.SETTINGS.CAMERA")}),(0,s.jsx)("button",{onClick:()=>m("Audio"),className:"stream_settings_option ".concat("Audio"===u?" active ":" "),type:"button",children:a("BROADCAST.SETTINGS.AUDIO")}),t]})]}),(0,s.jsxs)("div",{className:"stream_settings_types",children:[null,"Camera"===u?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(Ke,{handleAction:f,children:(0,s.jsx)(Ge,{cameraDeviceStream:e=>p({...h,videoStream:e}),isVideoMute:r,_handleOnOutsideClick:n})})}):null,"Audio"===u?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(Ke,{handleAction:f,children:(0,s.jsx)(Ye,{isAudioMute:c,_handleOnOutsideClick:n,micDeviceStream:e=>{p({...h,audioStream:e})},speakerDeviceStream:e=>p({...h,speakerOutput:e}),initials:(e,t)=>p({...h,audioStream:e,speakerOutput:t}),settingstype:d})})}):null,null]})]})]})})})})})},tt=i.memo(et);var at=a(54164);const it=document.getElementById("PortalHeader");class lt extends i.Component{constructor(e){super(e),this.element=document.createElement("div")}componentDidMount(){it&&it.appendChild&&it.appendChild(this.element)}componentWillUnmount(){it&&it.removeChild&&it.removeChild(this.element)}render(){return(0,at.createPortal)(this.props.children,this.element)}}const nt=lt;var ot=a(99958);const st=async()=>{let e={camera:"",mic:""};return await navigator.permissions.query({name:"microphone"}).then((t=>{e={...e,mic:t.state}})).catch((e=>{console.log("Got error :",e)})),await navigator.permissions.query({name:"camera"}).then((t=>{e={...e,camera:t.state}})).catch((e=>{console.log("Got error :",e)})),e},dt=async(e,t,a)=>{const{camera:i="",mic:l=""}=await st();if("granted"!==i||"granted"!==l){const a=await(0,H.RP)(e,t);a.getAudioTracks()[0].stop(),a.getVideoTracks()[0].stop()}return{localCamera:await(0,H.bp)(e),localMic:await(0,H.sS)(t),DeviceIds:{video:e,audio:t,speaker:a}}};var ct=a(89704),rt=a.n(ct),ut=a(44245);const vt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const a=rt().AES.encrypt(e,X.sk),i=await(0,ut.jv)(t,"".concat(a));if(200===(null===i||void 0===i?void 0:i.status))return null===i||void 0===i?void 0:i.data},mt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return(0,U.Wk)((0,U.Jj)(e))};var ht=a(94424),pt=a(47768),gt=a(57900),ft=a(61898);const xt=function(){const[e,t]=(0,i.useState)(!1),a=(0,B.v9)((e=>null===e||void 0===e?void 0:e.awsStageReducer)),l=(0,B.v9)((e=>null===e||void 0===e?void 0:e.broadcastBranding)),n=(null===l||void 0===l?void 0:l.isScreenShare)||!1,o=(0,B.v9)((e=>null===e||void 0===e?void 0:e.stageParticipants)),d=(null===l||void 0===l?void 0:l.hlsLink)||!1,c=async e=>{e||await(0,pt.Ti)(),t(e)},r=async e=>{t(!1),(0,ne.zV)((0,S.fv)(),(0,S.rc)());const i=await(async e=>{var t,a;const i="create"===(null===e||void 0===e?void 0:e.method)?null===e||void 0===e||null===(t=e.stage)||void 0===t?void 0:t.arn:null===e||void 0===e?void 0:e.stageArn,l={accessKeyId:X.O5,secretAccessKey:X.pU},n=new gt.J({region:"ap-south-1",credentials:l}),o={stageArn:i,duration:3e3,userId:(0,S.rc)().toString(),attributes:{type:"screenShare",displayName:(null===e||void 0===e?void 0:e.displayName)||(0,S._g)()},capabilities:[]},s=new ft.z(o),d=await n.send(s);if(200===(null===d||void 0===d||null===(a=d.$metadata)||void 0===a?void 0:a.httpStatusCode))return null===d||void 0===d?void 0:d.participantToken;(0,ne.zV)((0,S.fv)(),!1)})(a);(0,pt.i2)(i)};return(0,i.useEffect)((()=>{n!==(0,S.rc)()&&e&&(t(!1),y.kl.infoToastblue((0,s.jsxs)("div",{className:"customToast",children:[(0,s.jsx)("i",{className:"info",children:(0,s.jsx)(p.Zog,{})}),(0,s.jsx)("p",{children:"Someone has initialized to Present in the ".concat(d?" live stream":" broadcast ")})]})),(0,U.o)())}),[n]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"action_feild",children:(0,s.jsxs)("button",{onClick:async e=>{e.target.blur(),await c(!n)},className:"default setting tooltip_black_wraper ".concat(n?" active ":" "," ").concat(" "," "),type:"button",style:{cursor:""},children:[(0,s.jsx)(g.Sx,{style:{width:"19px",height:"19px"}}),(0,s.jsx)("div",{className:"tooltip_black flex full",style:{whiteSpace:"nowrap"},children:(()=>{if(n){var e,t,a,i;if(n===(0,S.rc)())return"You are Presenting the screen";const l=(0,S.hO)(o);return(null===l||void 0===l?void 0:l.length)>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{title:null===(e=l[0])||void 0===e||null===(t=e.attributes)||void 0===t?void 0:t.displayName,className:"text_controler ",children:null===(a=l[0])||void 0===a||null===(i=a.attributes)||void 0===i?void 0:i.displayName})," is Presenting"]}):"Someone is trying to Present"}return"Screen Share"})()})]})}),e?(0,s.jsx)(ht.Z,{children:(0,s.jsx)(Xe.Z,{parentClass:"common_action_popup",setShow:!0,_handleOnOutsideClick:async()=>await c(!1),children:(0,s.jsx)("div",{children:(0,s.jsxs)("div",{style:{width:"461px"},className:"ActionPopupInner ",children:[(0,s.jsxs)("div",{className:"Action_popup_header",children:[(0,s.jsx)("div",{className:"danger icon",children:(0,s.jsx)(g.Sx,{style:{color:"#FF4747"}})}),(0,s.jsx)("h4",{children:"Screen Share"})]}),(0,s.jsxs)("div",{className:"screen_share_content",children:[(0,s.jsx)("p",{style:{width:"360px",maxWidth:"360px"},className:"medium",children:"While sharing your screen:"}),(0,s.jsx)("p",{style:{width:"360px",maxWidth:"360px"},children:"- Make sure to always share the proper resolution. "}),(0,s.jsx)("p",{style:{width:"360px",maxWidth:"360px"},children:"- Screen sharing works best on a good computer."})]}),(0,s.jsxs)("div",{className:"group-btn",children:[(0,s.jsx)(E.Z,{className:"li",children:(0,s.jsx)("button",{type:"button",className:"btn-Blue sm red",onClick:()=>r(),children:"Share Screen"})}),(0,s.jsx)(E.Z,{className:"li",children:(0,s.jsx)("button",{type:"button",className:"btn-cancel sm cancel",onClick:()=>t(!1),children:"Cancel"})})]})]})})})}):null]})},St=function(){var e,t;let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_getGoLive:l=!1,handleHangup:n=(()=>{}),enableHangup:o=!0,enableAdditionAction:d=!1,_handleAudioMute:c=(()=>{}),_handleVideoMute:r=(()=>{}),enableAddParticipants:u=!1,muteStatus:v,type:m,_liveHls:h="",_isHost:f,_enteringStatus:x,handleCameraPermissions:b,handleMicPermissions:j,_handleTimeUpdate:_=(()=>{}),formattedTime:y,isVideoMute:N,isAudioMute:I,isScreenShare:C}=a,[k,T]=(0,i.useState)(null===v||void 0===v?void 0:v.isAudioMute),[w,E]=(0,i.useState)(null===v||void 0===v?void 0:v.isVideoMute),[D,O]=(0,i.useState)(!1),[A,M]=(0,i.useState)(!1),[L,Z]=(0,i.useState)(!1),R=null===(e=P.Z.getState())||void 0===e?void 0:e.awsStageReducer,F=null===(t=P.Z.getState())||void 0===t?void 0:t.participantListReducer,V=(0,B.v9)((e=>null===e||void 0===e?void 0:e.appOnlineStatus)),q=window.localStorage.getItem("currntOrgid")?JSON.parse(window.localStorage.getItem("currntOrgid")):{},z=(0,B.v9)((e=>{var t,a;return null===e||void 0===e||null===(t=e.broadcastKey)||void 0===t||null===(a=t.channel)||void 0===a?void 0:a.playbackUrl})),W=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.recordReducer)||void 0===t?void 0:t.recordTime})),[J,Y]=(0,i.useState)(!0),[G,$]=(0,i.useState)(0),[ee,te]=(0,i.useState)(!1),ae=(0,B.v9)((e=>null===e||void 0===e?void 0:e.localDeviceLists)),le=(0,B.v9)((e=>null===e||void 0===e?void 0:e.localStreams));(0,i.useEffect)((()=>{N&&E(N)}),[N]),(0,i.useEffect)((()=>{I&&T(I)}),[I]),(0,i.useEffect)((()=>{if(!!(l&&h&&J&&Object.values(W).length>0)){const e=setInterval((()=>{$((e=>e+1))}),1e3);return()=>{clearInterval(e)}}}),[l,h,J,Object.values(W).length>0]),(0,i.useEffect)((()=>{_(G)}),[G]);const ne=()=>{Y(V)},oe=()=>{Y(!V)};(0,i.useEffect)((()=>(window.addEventListener("offline",oe),window.addEventListener("online",ne),()=>{window.removeEventListener("offline",oe),window.removeEventListener("online",ne)})),[]),console.log(v,"muteStatus-----muteStatus");const se=e=>{const{audioDevices:t=[]}=ae;if("deviceRemoved"!==e){if(e.target.blur(),null===t||void 0===t||!t.length)return void(0,ge.LP)("Microphone Device Not Found");c(!k),T(!k)}else c(!0),T(!0)},de=e=>{const{videoDevices:t=[]}=ae;if(console.log(t,"isVideoPresent"),"deviceRemoved"!==e){if(e.target.blur(),null===t||void 0===t||!t.length)return void(0,ge.LP)("Camera Device Not Found");r(!w),E(!w)}else console.log("isVideoPresent---4"),r(!0),E(!0)};(0,i.useEffect)((()=>{var e,t,a,i,l;const n=null===le||void 0===le||null===(e=le.DeviceIds)||void 0===e?void 0:e.video,o=null===le||void 0===le||null===(t=le.DeviceIds)||void 0===t?void 0:t.audio,{videoDevices:s,audioDevices:d}=null===(a=P.Z.getState())||void 0===a?void 0:a.localDeviceLists,c=null===s||void 0===s?void 0:s.findIndex((e=>(null===e||void 0===e?void 0:e.deviceId)===n)),r=null===d||void 0===d?void 0:d.findIndex((e=>(null===e||void 0===e?void 0:e.deviceId)===o));(c<0||null===le||void 0===le||null===(i=le.localCamera)||void 0===i||!i.active)&&n&&de("deviceRemoved"),(r<0||null===le||void 0===le||null===(l=le.localMic)||void 0===l||!l.active)&&o&&se("deviceRemoved")}),[ae]);const ce=function(){O(arguments.length>0&&void 0!==arguments[0]&&arguments[0])},re=function(){M(arguments.length>0&&void 0!==arguments[0]&&arguments[0])},ue=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"video";const{audioDevices:a=[],audioOutputDevices:i=[],videoDevices:l=[]}=ae;return"video"===t?(null===l||void 0===l?void 0:l.findIndex((t=>(null===t||void 0===t?void 0:t.deviceId)===e)))>-1:"audio"===t?(null===a||void 0===a?void 0:a.findIndex((t=>(null===t||void 0===t?void 0:t.deviceId)===e)))>-1:(null===i||void 0===i?void 0:i.findIndex((t=>(null===t||void 0===t?void 0:t.deviceId)===e)))>-1},ve=e=>{var t,a,i,l,n,o,s,d,c;const{audio:r="",video:u="",speaker:v}=null===(t=P.Z.getState())||void 0===t||null===(a=t.localStreams)||void 0===a?void 0:a.DeviceIds,h={CamId:ue(null===(i=e.videoStream[0])||void 0===i?void 0:i.deviceId,"video")?null===(l=e.videoStream[0])||void 0===l?void 0:l.deviceId:u,MicId:ue(null===(n=e.audioStream[0])||void 0===n?void 0:n.deviceId,"audio")?null===(o=e.audioStream[0])||void 0===o?void 0:o.deviceId:r,SpeakerId:ue(null===(s=e.speakerOutput[0])||void 0===s?void 0:s.deviceId,"audio")?null===(d=e.speakerOutput[0])||void 0===d?void 0:d.deviceId:v};if((0,ot.KP)(h),"broadcastView"===m){var p,g,f,x;if((null!==(p=e.audioStream[0])&&void 0!==p&&p.deviceId||null!==(g=e.videoStream[0])&&void 0!==g&&g.deviceId)&&(r!==(null===(f=e.audioStream[0])||void 0===f?void 0:f.deviceId)||u!==(null===(x=e.videoStream[0])||void 0===x?void 0:x.deviceId))){var S,b,j,_;const t=ue(null===(S=e.audioStream[0])||void 0===S?void 0:S.deviceId,"audio")?null===(b=e.audioStream[0])||void 0===b?void 0:b.deviceId:r,a=ue(null===(j=e.videoStream[0])||void 0===j?void 0:j.deviceId,"video")?null===(_=e.videoStream[0])||void 0===_?void 0:_.deviceId:u;(0,pt.gd)(t,a)}}else{var y,C;if(e.videoStream.length>0&&u!==(null===(y=e.videoStream[0])||void 0===y?void 0:y.deviceId)){var k;if(!ue(null===(k=e.videoStream[0])||void 0===k?void 0:k.deviceId,"video"))return void(0,ge.LP)("Unable to find the selected Camera");(async(e,t)=>{(0,H.L4)();const a={localCamera:await(0,H.bp)(e.deviceId),deviceId:e.deviceId};var i;t&&(null===a||void 0===a||null===(i=a.localCamera)||void 0===i||i.getTracks().forEach((e=>{e.stop()}))),P.Z.dispatch((0,ie.Ih)(a))})(e.videoStream[0],N)}if(e.audioStream.length>0&&r!==(null===(C=e.audioStream[0])||void 0===C?void 0:C.deviceId)){var T;if(!ue(null===(T=e.audioStream[0])||void 0===T?void 0:T.deviceId,"audio"))return void(0,ge.LP)("Unable to find the selected Mic");(async(e,t)=>{(0,H.Cw)();const a={localMic:await(0,H.sS)(e.deviceId),deviceId:e.deviceId};var i;t&&(null===a||void 0===a||null===(i=a.localMic)||void 0===i||i.getTracks().forEach((e=>{e.stop()}))),P.Z.dispatch((0,ie.Mh)(a))})(e.audioStream[0],I)}}if(e.speakerOutput.length>0&&v!==(null===(c=e.speakerOutput[0])||void 0===c?void 0:c.deviceId)){var w;if(!ue(null===(w=e.speakerOutput[0])||void 0===w?void 0:w.deviceId,"speaker"))return void(0,ge.LP)("Unable to find the selected Speaker");E=e.speakerOutput[0],P.Z.dispatch((0,ie.yJ)(E))}var E},me=(0,S.yk)(R);return(0,i.useEffect)((()=>{"denied"!==b&&"prompt"!==b||E(!0)}),[b]),(0,i.useEffect)((()=>{"denied"!==j&&"prompt"!==j||T(!0)}),[j]),(0,i.useEffect)((()=>{console.log("participant----1",null===F||void 0===F?void 0:F.participantList),(null===F||void 0===F?void 0:F.participantList.length)>=4?te(!1):te(!0)}),[null===F||void 0===F?void 0:F.participantList.length]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"broadcast_video_btn_group",children:[d&&l&&(0,s.jsx)("div",{className:"action_feild copy_action",children:(0,s.jsxs)("button",{className:"default copy tooltip_black_wraper",onClick:e=>{e.target.blur(),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";navigator.clipboard.writeText(e),(0,ge.Ih)("Copied","copy")}("".concat((0,Q.I5)(X.JW)).concat(vt(z)))},type:"button",children:[(0,s.jsx)(p.vUr,{}),(0,s.jsx)("div",{className:"tooltip_black full",children:"Copy Meeting Link"})]})}),(0,s.jsx)("div",{className:"action_feild",children:(0,s.jsxs)("button",{className:"default mic ".concat(k?"inactive":""," ").concat(x?"_disabled_btn":""," tooltip_black_wraper"),onClick:x?()=>{}:e=>{e.target.blur(),se(e)},type:"button",children:[k?(0,s.jsx)(g.FA,{}):(0,s.jsx)(g.$W,{}),("denied"===j||"prompt"===j)&&(0,s.jsx)("div",{className:"icon_disabled",children:(0,s.jsx)(g.F_,{})}),(0,s.jsx)("div",{className:"tooltip_black full",children:"Audio Mute/Unmute"})]})}),(0,s.jsx)("div",{className:"action_feild",children:(0,s.jsxs)("button",{onClick:x?()=>{}:e=>{e.target.blur(),de(e)},className:"default video ".concat(w?"inactive":""," ").concat(x?"_disabled_btn":""," tooltip_black_wraper"),type:"button",children:[w?(0,s.jsx)(g.yQ,{}):(0,s.jsx)(g.AC,{}),(0,s.jsx)("div",{className:"tooltip_black full",children:"Video on/off"}),("denied"===b||"prompt"===b)&&(0,s.jsx)("div",{className:"icon_disabled",children:(0,s.jsx)(g.F_,{})})]})}),"broadcastView"===m&&(0,s.jsx)(xt,{isScreenShare:C}),(0,s.jsx)("div",{className:"action_feild",children:(0,s.jsxs)("button",{onClick:x?()=>{}:e=>{e.target.blur(),ce(!0)},className:"default setting tooltip_black_wraper ".concat(x?"_disabled_btn":""," ").concat(" "),type:"button",style:{cursor:""},children:[(0,s.jsx)(g.k0,{}),(0,s.jsx)("div",{className:"tooltip_black",children:"Settings"})]})}),u&&f&&(0,s.jsx)("div",{className:"action_feild",children:(0,s.jsxs)("button",{onClick:e=>{e.target.blur(),re(!0)},className:"default setting tooltip_black_wraper ".concat(ee?" ":" _disabled_btn"),type:"button",style:{cursor:ee?"":"default"},children:[(0,s.jsx)(g.Zd,{}),(0,s.jsx)("div",{className:"tooltip_black",style:{whiteSpace:"nowrap"},children:"Add Participants"})]})}),d&&!l?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{style:{display:"none"},className:"action_feild record_action ",children:(0,s.jsxs)("button",{onClick:e=>{e.target.blur(),Z(!1)},className:" default ".concat(L?" active ":" "," tooltip_black_wraper"),type:"button tooltip_black_wraper",children:[L?(0,s.jsx)(g.rA,{}):(0,s.jsx)(g.S,{}),(0,s.jsx)("div",{className:"tooltip_black",children:"Record"})]})})}):null,l&&h&&Object.values(W).length>0&&(0,s.jsx)(nt,{children:(0,s.jsxs)("div",{className:"broadcast_video_record_time ".concat(L?" animate ":" "),children:[(0,s.jsx)("div",{className:"dot_live"}),(0,s.jsx)("div",{className:"time_live",children:l&&h?y:""})]})}),o?(0,s.jsx)("div",{className:"action_feild",children:(0,s.jsxs)("button",{onClick:e=>{e.target.blur(),n()},className:"danger hangup tooltip_black_wraper",type:"button",children:[(0,s.jsx)(g.kL,{}),(0,s.jsx)("div",{className:"tooltip_black",children:"Hangup"})]})}):null]}),D?(0,s.jsx)(tt,{_handleOnOutsideClick:()=>ce(!1),handleDone:e=>ve(e),type:m,isVideoMute:N,isAudioMute:I}):null,A&&u&&ee&&(0,s.jsx)(K.Z,{heading:"Add Participants",tooltipDesc:"Inviting participants so they can make changes to the live stream settings if needed.",_handleGetRegisteredEmails:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];console.log("reg",e)},_handleGetUnRegisteredEmails:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];console.log(e,"updateCreateParticipantToken----0"),(0,U.dk)(e,me,q)},_handleOnOutsideClick:()=>re(!1),participantList:null===F||void 0===F?void 0:F.participantList})]})};var bt=a(98822);const jt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{_participantsData:t={},participantsId:a,videoMute:i,largeVideo:l=!1,getCanvasHeight:n=0,fbBannerStyle:o="",fbBannerBgColor:d="",FbBannerTextColor:c=""}=e;return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"broadcast_particiapant_wrap",children:(0,s.jsx)("div",{width:"474px",height:"329px",className:"broadcast_particiapant large",children:(0,s.jsx)(Ae,{fbBannerBgColor:d,fbBannerStyle:o,FbBannerTextColor:c,largeVideo:l,getCanvasHeight:n,type:"broadcast-participants",participantsData:t[a],wholeParticipantsData:t,videoMute:i},a)})})})},_t=i.memo(jt);var yt=a(64880),Nt=a(23458),It=a(40235),Ct=a(74569),kt=a.n(Ct),Tt=a(44233);function wt(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,a,i){return t+t+a+a+i+i})),t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function Et(e,t,a){const i=[e,t,a].map((function(e){let t=e;return t/=255,t<=.03928?t/12.92:((t+.055)/1.055)**2.4}));return.2126*i[0]+.7152*i[1]+.0722*i[2]}const Dt=function(e){const{FbBannerTopOverlay:t=0}=e,[a,l]=(0,i.useState)(g.mi);return(0,i.useEffect)((()=>{switch(t){case 0:default:l(g.mi);break;case 1:l(g.O1);break;case 2:l(g.Ps);break;case 3:l(g.ik)}}),[t]),(0,s.jsx)("div",{className:"broadcast_video_overlay",children:(0,s.jsx)("img",{src:a,alt:"banner-overlay"})})},Ot=e=>{var t,a,l,n;const[o,d]=(0,i.useState)(""),[c,r]=(0,i.useState)(!0),[v,m]=(0,i.useState)(260),[h,f]=(0,i.useState)(56),[b,j]=(0,i.useState)(0),[_,N]=(0,i.useState)(0),[I,C]=(0,i.useState)(110),[k,T]=(0,i.useState)(""),[E,D]=(0,i.useState)(""),[O,A]=i.useState(!1),[M,L]=(0,i.useState)(!1),[Z,R]=(0,i.useState)(!1),F=(0,yt.k6)(),{isHost:V,leftStage:z=(()=>{}),muteStatus:W,FbData:J={},setIsTimeout:G=(()=>{}),searchData:$={},currentOrg:ee=0,userId:te=0,isTimeout:ae}=e,{fbLayout:le,fbHlsLink:oe,fbGoLive:se,fbBannerText:de,fbBannerStatus:ce,fbBannerBackground:re,fbBannerStyle:ue,fbBannerBgColor:ve,FbBannerTextColor:me,FbBannerTopOverlay:he,fbWarningTime:fe,fbEndTime:xe,FbIsLogoRight:Se}=J,be=(0,i.useRef)(null),[je,_e]=(0,i.useState)(!0),[ye,Ne]=(0,i.useState)(""),[Ie,Te]=(0,i.useState)(!1),[we,Ee]=(0,i.useState)(!1),[Oe,Me]=(0,i.useState)(""),[Le,Ze]=(0,i.useState)(!0),[Re,Pe]=(0,i.useState)(!1),[Fe,Ue]=(0,i.useState)(!1),[Ve,He]=(0,i.useState)(!1),[qe,ze]=(0,i.useState)(!1),[We,Je]=(0,i.useState)(!1),[Ye,Ge]=(0,i.useState)(""),[$e,Ke]=(0,i.useState)(""),[Xe,Qe]=(0,i.useState)(""),[et,tt]=(0,i.useState)(0),[at,it]=(0,i.useState)(""),[lt,nt]=(0,i.useState)(""),[ot,st]=(0,i.useState)(!1),[dt,ct]=(0,i.useState)(!1),[rt,ut]=(0,i.useState)(V?"Brand":"Chat"),[mt,ht]=(0,i.useState)(!0),[gt,ft]=(0,i.useState)(!1),[xt,jt]=(0,i.useState)(!1),[Ct,Ot]=(0,i.useState)(0),[At,Bt]=(0,i.useState)(0),[Mt,Lt]=(0,i.useState)(!1),[Zt,Rt]=(0,i.useState)(!1),Pt=(0,B.v9)((e=>null===e||void 0===e?void 0:e.stageParticipants)),Ft=(0,B.v9)((e=>null===e||void 0===e?void 0:e.stageParticipantsData)),Ut=(0,B.v9)((e=>null===e||void 0===e?void 0:e.awsStageReducer)),Vt=(0,B.v9)((e=>null===e||void 0===e?void 0:e.broadcastKey)),Ht=P.Z.getState(),qt=(0,B.v9)((e=>null===e||void 0===e?void 0:e.broadcastBranding)),zt=(0,B.v9)((e=>null===e||void 0===e?void 0:e.appOnlineStatus)),Wt=(0,B.v9)((e=>null===e||void 0===e?void 0:e.appStatus)),Jt=(0,B.v9)((e=>null===e||void 0===e?void 0:e.broadcastLogo))||g.r6,[Yt,Gt]=(0,i.useState)(!1),[$t,Kt]=(0,i.useState)(Jt),Xt=(0,B.v9)((e=>null===e||void 0===e?void 0:e.commonData)),{getAccessToken:Qt,reconnectAccount:ea,timerPopup:ta}=Xt,[aa,ia]=(0,i.useState)(""),[la,na]=(0,i.useState)([]),[oa,sa]=(0,i.useState)(!1),[da,ca]=(0,i.useState)(!1),[ra,ua]=(0,i.useState)(!1),va=(0,S.yk)(Ut),ma=localStorage.getItem("editStreamSave"),ha=(localStorage.getItem("Select_Media")&&JSON.parse(localStorage.getItem("Select_Media")),window.localStorage.getItem("currntOrgid")?JSON.parse(window.localStorage.getItem("currntOrgid")):{}),pa=(null===qt||void 0===qt?void 0:qt.host)||"",ga=(null===qt||void 0===qt?void 0:qt.postion1)||"",fa=(null===qt||void 0===qt?void 0:qt.postion2)||"",xa=(null===qt||void 0===qt?void 0:qt.postion3)||"",Sa=(null===qt||void 0===qt?void 0:qt.logoDimension)||"",ba=(null===qt||void 0===qt?void 0:qt.isScreenShare)||!1,ja=(null===qt||void 0===qt?void 0:qt.participantCount)||"",_a=(null===qt||void 0===qt?void 0:qt.videoMutedParticipants)||[],ya=(null===qt||void 0===qt?void 0:qt.audioMutedParticipants)||[],Na=(null===qt||void 0===qt?void 0:qt.sessionMemberCount)||[],Ia=(0,B.v9)((e=>null===e||void 0===e?void 0:e.cameraPermissions)),Ca=(0,B.v9)((e=>null===e||void 0===e?void 0:e.micPermissions)),ka=(0,B.v9)((e=>e))||{},Ta=null===ka||void 0===ka||null===(t=ka.facebookData)||void 0===t?void 0:t.facebookPageConnected,wa="create"===Ut.method?(0,Q.yN)(Ut):Ut,{stageArn:Ea="",sessionName:Da=""}=wa,Oa=async()=>{const e=JSON.parse(localStorage.getItem("streamChannelId")),t=JSON.parse(localStorage.getItem("streamInputId"));try{const a=await(0,Tt.HG)("".concat(X.JW,"api/customer/deleteLiveStream?streamChannelId=").concat(e,"&streamInputId=").concat(t),{},!0);console.log("responseStopStream:",a),400===a.status&&(console.log("1q1q 400 responseDeleteStream:",a),e&&Oa()),200===a.status&&(localStorage.removeItem("streamChannelId"),localStorage.removeItem("streamInputId"))}catch(i){var a;console.error("Error fetching deleteStream data:",i),console.log("Response deleteStream data error:",null===i||void 0===i||null===(a=i.response)||void 0===a?void 0:a.data)}},Aa=async e=>{const t=JSON.parse(localStorage.getItem("streamChannelId"))?JSON.parse(localStorage.getItem("streamChannelId")):e;try{const e=await(0,Tt.SO)("".concat(X.JW,"api/customer/stopLiveStreamChannel?streamChannelId=").concat(t),{},!0);if(console.log("responseStopStream:",e),200===(null===e||void 0===e?void 0:e.status)&&(Oa(),(async e=>{console.log("endLiveStream",Xe);const t=null===e||void 0===e?void 0:e.access_token,a={Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"};try{const e="YT"===JSON.parse(localStorage.getItem("Select_Media"))&&await kt().post("".concat(X.pk,"liveBroadcasts/transition?part=id,snippet,contentDetails,status&broadcastStatus=complete&id=").concat(Xe),"",{headers:a});console.log("1q1q Broadcast Status responseBroadcastEndStreamTransition:",e)}catch(l){var i;console.error("Error fetching endLiveStream data:",l),console.log("Response endLiveStream data error:",null===l||void 0===l||null===(i=l.response)||void 0===i?void 0:i.data)}})(null===aa||void 0===aa?void 0:aa.authToken)),400===(null===e||void 0===e?void 0:e.status)){const t=JSON.parse(localStorage.getItem("streamChannelId"));console.log("1q1q 400 responseStopStream:",e),t&&Aa(t)}}catch(i){var a;console.error("Error fetching StopStream data:",i),console.log("Response StopStream data error:",null===i||void 0===i||null===(a=i.response)||void 0===a?void 0:a.data)}},Ba=()=>(0,Tt.dX)("".concat(X.JW,"api/customer/getMediaConfigs?mediaType=YT"),!0).then((e=>{var t,a;P.Z.dispatch((0,It.tM)(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.mediaConfigList[0]))})).catch((e=>{console.error("Error fetching responseGetMediaConfig data:",e)}));(0,i.useEffect)((()=>{Ba(),ia(Qt),localStorage.removeItem("streamChannelId"),localStorage.removeItem("streamInputId"),window.sessionStorage.removeItem("EndSessionPopStatus")}),[]),(0,i.useEffect)((()=>{ia(Qt)}),[Qt]),(0,i.useEffect)((()=>{P.Z.dispatch((0,q.Af)(!0))}),[]),(0,i.useEffect)((()=>{!async function(){await(0,U.NB)((0,S.yk)(Ut))}()}),[]);const Ma=function(){const e=(0,ke.cV)()||{},{data:{firstName:t="",email:a="",organisationName:i}={}}=e;(0,U.Rp)("Broadcast_Hangup",{otfName:t,otfEmail:a,otfOrganisationName:i,otfBroadcastName:Da}),G(!1),F.push({pathname:"/broadcast"}),P.Z.dispatch((0,q.Af)(!1)),P.Z.dispatch((0,It.HY)(!1)),P.Z.dispatch((0,It.O6)(!1)),P.Z.dispatch((0,It.tM)()),P.Z.dispatch((0,It.oc)(!1)),P.Z.dispatch((0,It.fr)(!1)),P.Z.dispatch((0,It.zi)(!1)),localStorage.removeItem("EditConnectedFB"),localStorage.removeItem("editStreamSave"),localStorage.removeItem("Select_Media"),(0,S.O_)();const l=JSON.parse(localStorage.getItem("streamChannelId"))?JSON.parse(localStorage.getItem("streamChannelId")):"";(at||lt&&Xe)&&l&&Aa(l)},La=async e=>{var t,a,i,l;console.log(e,"isVideoPresent---6");const n=null===(t=P.Z.getState())||void 0===t?void 0:t.localStreams,o=null===n||void 0===n||null===(a=n.DeviceIds)||void 0===a?void 0:a.video,s=(0,H.tq)(null===n||void 0===n||null===(i=n.DeviceIds)||void 0===i?void 0:i.video,"video");var d;o!==s&&(0,pt.gd)(null===n||void 0===n||null===(d=n.DeviceIds)||void 0===d?void 0:d.audio,s);sa(e);const c=(0,U.IC)(Pt);(null===(l=Ft[c])||void 0===l?void 0:l.stream).filter((e=>"video"===(null===e||void 0===e?void 0:e.streamType)))[0].setMuted(e)},Za=async e=>{var t,a,i,l;const n=null===(t=P.Z.getState())||void 0===t?void 0:t.localStreams,o=null===n||void 0===n||null===(a=n.DeviceIds)||void 0===a?void 0:a.audio,s=(0,H.tq)(null===n||void 0===n||null===(i=n.DeviceIds)||void 0===i?void 0:i.audio,"audio");var d;o!==s&&(0,pt.gd)(s,null===n||void 0===n||null===(d=n.DeviceIds)||void 0===d?void 0:d.video);ca(e);const c=(0,U.IC)(Pt);(null===(l=Ft[c])||void 0===l?void 0:l.stream).filter((e=>"audio"===(null===e||void 0===e?void 0:e.streamType)))[0].setMuted(e)},Ra=e=>{let t=e;return e.length>1&&(t=(0,S.$w)(e,(0,S.f1)(e,pa.toString()),pa.toString()),t=(0,S.i)(t,(0,S.f1)(e,pa.toString()),ga,fa,xa)),console.log(t,"orderingParticipants"),t},Pa=(e,t)=>(console.log(e,t,"getParticipantInLive---1"),"layout1"===e&&t.length>0?[{...t.filter((e=>null===e||void 0===e?void 0:e.isLocal))[0],position:0}]:Ra(t.map(((e,t)=>({...e,position:t})))));console.log("recordT1",Ht);const Fa=async(e,t,a)=>{try{var i,l,n;const s=await(0,Tt.SO)("".concat(X.JW,"api/customer/startLiveStreamChannel?streamChannelId=").concat(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(l=i.data)||void 0===l||null===(n=l.mediaLiveStreamingResponse)||void 0===n?void 0:n.streamChannelId),{},!0);if(console.log("1q1q responseStartLiveStream:",s),400===(null===s||void 0===s?void 0:s.status))console.log("1q1q 400 responseStartLiveStream:",e),Fa(e,t,a);else if(200===(null===s||void 0===s?void 0:s.status)){var o;console.log("1q1q Broadcast Start responseBroadcastTransition:",t),Ta&&setTimeout((()=>{P.Z.dispatch((0,It.YD)({status:200}))}),4e4);const e="YT"===JSON.parse(localStorage.getItem("Select_Media"))&&await kt().post("".concat(X.pk,"liveBroadcasts/transition?part=id,snippet,contentDetails,status&broadcastStatus=live&id=").concat(null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.id),"",{headers:a});console.log("1q1q Broadcast Status responseBroadcastTransition:",e),P.Z.dispatch((0,It.YD)(e))}}catch(s){console.error("Error fetching StartLiveStream data:",s),console.log("Response StartLiveStream data error:",s.response.data),403===s.response.data.error.code&&Fa(e,t,a)}},Ua=async(e,t,a,i)=>{var l,n,o,s,d,c,r,u;const v={channelArn:null===Vt||void 0===Vt||null===(l=Vt.channel)||void 0===l?void 0:l.channelArn,name:Da,playbackUrl:null===Vt||void 0===Vt||null===(n=Vt.channel)||void 0===n?void 0:n.playbackUrl,rtmpUrl:"YT"===i?null===e||void 0===e||null===(o=e.data)||void 0===o||null===(s=o.cdn)||void 0===s||null===(d=s.ingestionInfo)||void 0===d?void 0:d.rtmpsIngestionAddress:null===e||void 0===e?void 0:e.streaming_url,streamKey:"YT"===i?null===e||void 0===e||null===(c=e.data)||void 0===c||null===(r=c.cdn)||void 0===r||null===(u=r.ingestionInfo)||void 0===u?void 0:u.streamName:null===e||void 0===e?void 0:e.streaming_key};console.log("1q1q mediaStreamDetails",v);try{var m,h;const e=await(0,Tt.SO)("".concat(X.JW,"api/customer/createMediaLiveStream"),v,!0);console.log("1q1q responseMediaLiveStream:",e);const i=null===e||void 0===e||null===(m=e.data)||void 0===m||null===(h=m.data)||void 0===h?void 0:h.mediaLiveStreamingResponse;localStorage.setItem("streamChannelId",JSON.stringify(null===i||void 0===i?void 0:i.streamChannelId)),localStorage.setItem("streamInputId",JSON.stringify(null===i||void 0===i?void 0:i.inputId)),it(null===i||void 0===i?void 0:i.streamChannelId),nt(null===i||void 0===i?void 0:i.inputId),200===(null===e||void 0===e?void 0:e.status)&&(console.log("1q1q responseMediaLiveStream.status:",e.status),Fa(e,t,a))}catch(g){var p;console.error("Error fetching MediaLiveStream data:",g),console.log("Response MediaLiveStream data error:",null===g||void 0===g||null===(p=g.response)||void 0===p?void 0:p.data)}},Va=async e=>{const t=null===e||void 0===e?void 0:e.authToken,a={Authorization:"Bearer ".concat(t),Accept:"application/json","Content-Type":"application/json"},i={snippet:{title:Da,scheduledStartTime:(new Date).toISOString()},contentDetails:{latencyPreference:"ultraLow",monitorStream:{enableMonitorStream:!1}},status:{privacyStatus:"public",selfDeclaredMadeForKids:!1}},l={id:"OTF-".concat((new Date).toISOString()),snippet:{title:"OTF-".concat((new Date).toISOString())},cdn:{format:"",ingestionType:"rtmp",resolution:"variable",frameRate:"variable"}};try{var n,o,s,d;const e=await kt().post("".concat(X.pk,"liveBroadcasts?part=id,snippet,status,contentDetails&key=").concat(X.Lq),i,{headers:a});console.log("Broadcast Status responseBroadcasts:",e),Qe(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.id),localStorage.setItem("broadcastId",JSON.stringify(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.id));const t=await kt().post("".concat(X.pk,"liveStreams?part=id&part=snippet&part=cdn&key=").concat(X.Lq),l,{headers:a});console.log("responseStream Status responseStream:",t);const c=await kt().post("".concat(X.pk,"liveBroadcasts/bind?id=").concat(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.id,"&streamId=").concat(null===t||void 0===t||null===(d=t.data)||void 0===d?void 0:d.id,"&key=").concat(X.Lq),"",{headers:a});console.log("bindStream Status bindStream:",c),200===c.status&&Ua(t,e,a,"YT")}catch(h){var c,r,u,v;if(console.error("Error fetching broadcast data:",h),console.log("Response data broadcast error:",null===h||void 0===h||null===(c=h.response)||void 0===c?void 0:c.data),401===(null===h||void 0===h||null===(r=h.response)||void 0===r||null===(u=r.data)||void 0===u||null===(v=u.error)||void 0===v?void 0:v.code)){var m;const t={media_type:"YT",media_id:null===e||void 0===e?void 0:e.mediaId},a=await(0,Tt.SO)("".concat(X.JW,"simulcast/api/media-config/refresh-token"),t,!0);console.log("qaqa getToken",null===a||void 0===a||null===(m=a.data)||void 0===m?void 0:m.response),Ba()}}},Ha=async()=>{const e=await(0,U.NB)((0,S.yk)(Ut));1!==(null===e||void 0===e?void 0:e.isDelete)?(_e(!je),st(!1),P.Z.dispatch((0,It.oc)(!0))):ze(!0)},qa=()=>(0,Tt.dX)("".concat(X.JW,"simulcast/api/media-config/get-media-list?token_check=true"),!0).then((e=>{200===(null===e||void 0===e?void 0:e.status)?(async()=>{var e;const t=null===Ut||void 0===Ut||null===(e=Ut.stage)||void 0===e?void 0:e.arn;(0,Tt.dX)("".concat(X.JW,"simulcast/api/media-broadcast/list?broadcast_id=").concat(Ea||t),!0).then((e=>{if(200===(null===e||void 0===e?void 0:e.status)){var t;const a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.response[0];let i=Object.values({getMedia:a});Rt(i),2===(null===a||void 0===a?void 0:a.media_status)?(ot&&L(!0),st(!1)):ot&&!M&&Ha()}})).catch((e=>{console.error("Error fetching responseGetMediaConfig data:",e)}))})():ot&&Ha()})).catch((e=>{console.error("Error fetching responseGetMediaConfig data:",e)}));(0,i.useEffect)((()=>{ot&&qa()}),[ot]);(0,i.useEffect)((()=>{console.log("qaqa getYTDetails update",aa),1===(null===aa||void 0===aa?void 0:aa.status)&&ma&&!je&&Object.keys(Vt).length>0&&Va(aa)}),[aa]),(0,i.useEffect)((()=>{qa()}),[]),(0,i.useEffect)((()=>{ea&&qa()}),[ea]),(0,i.useEffect)((()=>{"errored"===Wt&&(F.push("/broadcast"),P.Z.dispatch((0,q.Af)(!1)))}),[Wt]),(0,i.useEffect)((()=>{$t!==Jt&&(Gt(!0),setTimeout((()=>{Kt(Jt)}),1e3),setTimeout((()=>{Gt(!1)}),2e3))}),[Jt,h,v]),(0,i.useEffect)((()=>{var e;const t=null===(e=P.Z.getState())||void 0===e?void 0:e.localStreams;if(V&&!ba)Ke(le);else if(!V&&!ba){var a;async function i(){await(0,pt.Ti)()}null!==t&&void 0!==t&&null!==(a=t.screenShare)&&void 0!==a&&a.active&&!Z&&y.kl.infoToastblue((0,s.jsxs)("div",{className:"customToast",children:[(0,s.jsx)("i",{className:"info",children:(0,s.jsx)(p.Zog,{})}),(0,s.jsx)("p",{children:"Host has stopped your screen share for everyone in the ".concat(oe?" live stream":" broadcast ")})]})),i(),Ke(le)}}),[ba]);(0,i.useEffect)((()=>{var e,t;V&&((0,Q.q5)(Pt,Ft)&&ba?!xt&&(0,S.Wd)(Pt).length>1&&(0,ne.VK)((0,S.fv)(),(0,S.yk)(Ut),"layout2"):(console.log((0,Q.q5)(Pt,Ft),ba,"ayoutAltered && filterSSDate"),!xt&&(0,S.Wd)(Pt).length>1&&Ke("layout2")),(0,S.Wd)(Pt).length>1&&jt(!0),1===(null===(e=(0,S.Wd)(Pt))||void 0===e?void 0:e.length)&&"layout2"===$e&&((0,Q.q5)(Pt,Ft)&&ba?((0,ne.VK)((0,S.fv)(),(0,S.yk)(Ut),"layout"+(0,S.Wd)(Pt).length),Ke("layout-share")):(Ke("layout"+(0,S.Wd)(Pt).length),jt(!1))),(null===(t=(0,S.Wd)(Pt))||void 0===t?void 0:t.length)>0&&na(Pa($e,(0,S.Wd)(Pt))));if(V||((0,Q.q5)(Pt,Ft)&&ba?(console.log($e,"fbLayout--0"),Ke("layout-share")):(0,S.f1)((0,S.Wd)(Pt),pa.toString())?(console.log($e,"fbLayout--2"),Ke(le)):(console.log($e,"fbLayout--1"),(0,S.Wd)(Pt).length>1?Ke("layout2"):Ke("layout1"))),(0,U.Qr)(Ft)||Ie||setTimeout((()=>{La(!(null===W||void 0===W||!W.isVideoMute)),Za(!(null===W||void 0===W||!W.isAudioMute)),Te(!0),Ee(!0)}),[1500]),(0,S.Wd)(Pt).length>0&&P.Z.dispatch((0,ie.EE)(Nt.RY)),!V&&!Mt){const e=(0,S.Wd)(Pt).filter((e=>e.userId!==pa)).length;Lt(e)}(()=>{var e,t,a;null===(e=Ft[null===(a=Pt.find((e=>e.isLocal)))||void 0===a?void 0:a.id])||void 0===e||null===(t=e.stream)||void 0===t||t.map((e=>{switch(null===e||void 0===e?void 0:e.streamType){case"video":(null===e||void 0===e?void 0:e.isMute)!==oa&&(null===e||void 0===e||e.setMuted(oa));break;case"audio":(null===e||void 0===e?void 0:e.isMute)!==da&&(null===e||void 0===e||e.setMuted(da))}}))})(),(0,Q.q5)(Pt,Ft)&&ba&&Ke("layout-share")}),[Pt,Ft]),console.log($e,"getLaytoutType---getLaytoutType"),(0,i.useEffect)((()=>{if(!V){var e,t,a;if(""!==ga&&""!==fa&&""!==xa){const e=[ga,fa,xa];!(-1!==(null===e||void 0===e?void 0:e.findIndex((e=>e===parseInt((0,S.rc)())))))&&Ut&&ja>=0&&((0,ne.qe)((0,S.fv)(),(0,S.yk)(Ut),ja+1>3?3:ja+1),(0,ne.RK)((0,S.fv)(),(0,S.yk)(Ut),ja+1>3?3:ja+1))}if(_a.includes((0,S.rc)())){oa||(La(!0),y.kl.infoToastblue((0,s.jsxs)("div",{className:"customToast",children:[(0,s.jsx)("i",{className:"info",children:(0,s.jsx)(p.Zog,{})}),(0,s.jsx)("p",{children:"Host has tuned off your camera for everyone in the ".concat(oe?"  live stream":" broadcast ")})]})));const e=null===_a||void 0===_a?void 0:_a.filter((e=>e!==(0,S.rc)()));(0,ne.mZ)((0,S.fv)(),(0,S.yk)(Ut),e)}if(ya.includes((0,S.rc)())){da||(Za(!0),y.kl.infoToastblue((0,s.jsxs)("div",{className:"customToast",children:[(0,s.jsx)("i",{className:"info",children:(0,s.jsx)(p.Zog,{})}),(0,s.jsx)("p",{children:"Host muted you for everyone in the ".concat(oe?" live stream":" broadcast ")})]})));const e=null===ya||void 0===ya?void 0:ya.filter((e=>e!==(0,S.rc)()));(0,ne.OC)((0,S.fv)(),(0,S.yk)(Ut),e)}V||Na===(null===(e=P.Z.getState())||void 0===e||null===(t=e.participantListReducer)||void 0===t||null===(a=t.participantList)||void 0===a?void 0:a.length)||P.Z.dispatch((0,Ce.z)(Ea))}}),[qt]),(0,i.useEffect)((()=>{(null===Pt||void 0===Pt?void 0:Pt.length)>0&&(na(Pa($e,Pt)),console.log($e,"getLaytoutType---1"),V&&"layout-share"!==$e&&(0,ne.VK)((0,S.fv)(),(0,S.yk)(Ut),$e)),V&&!je&&"layout-share"===$e&&(0,pe.NC)()}),[$e]),(0,i.useEffect)((()=>{V||(ba?Ke("layout-share"):Pt.length>1?Ke(le):Ke("layout1"))}),[le]),(0,i.useEffect)((()=>{je||et&&xt&&(0,pe.y_)($e,la,de,ce,ve,Ut)}),[et]),(0,i.useEffect)((()=>{je||(P.Z.dispatch((0,ie.bI)({stageArn:Ea,sessionName:Da,organisationId:null===ha||void 0===ha?void 0:ha.organisationId})),P.Z.dispatch((0,ie.m1)({stageArn:Ea,callStatus:"on-live",duration:At.toString()})),console.log("updatetime---9",At.toString()),(0,ne.BF)((0,S.fv)(),(0,S.yk)(Ut),"on-live"),P.Z.dispatch((0,ie.EE)(Nt.bT)))}),[je]);const za=async()=>{var e;const t=null===Vt||void 0===Vt||null===(e=Vt.channel)||void 0===e?void 0:e.channelArn,a=await(0,Tt.dX)("".concat(X.JW,"api/customer/getMediaLiveStreams?channelArn=").concat(t),!0);if(400===(null===a||void 0===a?void 0:a.status))(async()=>{var e,t,a,i,l,n,o,s;const d={media_type:"FB",media_id:null!==(e=Zt[0])&&void 0!==e&&e.media_id?null===(t=Zt[0])||void 0===t?void 0:t.media_id:null===(a=Ta[0])||void 0===a?void 0:a.media_id,config_id:null!==(i=Zt[0])&&void 0!==i&&i.config_id?null===(l=Zt[0])||void 0===l?void 0:l.config_id:null===(n=Ta[0])||void 0===n?void 0:n.config_id,config_type:"page",title:Da,description:Da},c=await(0,Tt.SO)("".concat(X.JW,"simulcast/api/casting/connect-stream"),d,!0);console.log("qaqa getToken",null===c||void 0===c||null===(o=c.data)||void 0===o?void 0:o.response);const r=null===c||void 0===c||null===(s=c.data)||void 0===s?void 0:s.response;var u;200===(null===c||void 0===c?void 0:c.status)?(localStorage.setItem("Facebook_Live_Url",JSON.stringify(null===r||void 0===r?void 0:r.live_url)),Ua(r,"","","FB")):(P.Z.dispatch((0,It.YD)({status:200})),(0,ge.LP)(null===c||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message))})();else if(200===(null===a||void 0===a?void 0:a.status)){var i,l,n,o,s,d,c,r;P.Z.dispatch((0,It.YD)({status:200})),console.log("getFBLivegetFBLive",null===a||void 0===a?void 0:a.data),localStorage.setItem("streamChannelId",JSON.stringify(null===a||void 0===a||null===(i=a.data)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.channelId)),localStorage.setItem("streamInputId",JSON.stringify(null===a||void 0===a||null===(n=a.data)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.inputId)),it(null===a||void 0===a||null===(s=a.data)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.channelId),nt(null===a||void 0===a||null===(c=a.data)||void 0===c||null===(r=c.data)||void 0===r?void 0:r.inputId)}};(0,i.useEffect)((()=>{if(!je&&Object.keys(Vt).length>0){var e;(0,pe.u2)($e,Vt,la,ce,de,ue,ve);const t=JSON.parse(localStorage.getItem("Select_Media"));1===(null===aa||void 0===aa?void 0:aa.status)&&ma&&"YT"===t&&Va(aa),console.log("handleSaveYTHeader && mediaSelection",ma,t),ma&&"FB"===t&&za();async function a(e){var t;const a=await vt(JSON.stringify(e),null===Vt||void 0===Vt||null===(t=Vt.channel)||void 0===t?void 0:t.channelArn);Me(a),(0,ne.QP)((0,S.fv)(),(0,S.yk)(Ut),a)}a({playbackUrl:null===Vt||void 0===Vt||null===(e=Vt.channel)||void 0===e?void 0:e.playbackUrl,sessionName:Da})}}),[Vt]),(0,i.useEffect)((()=>{const e="create"===(null===Ut||void 0===Ut?void 0:Ut.method)?(0,Q.yN)(Ut):Ut;null!==e&&void 0!==e&&e.stageArn&&(console.log(e,"fbLiveListener---1"),(0,ne.tU)(null===e||void 0===e?void 0:e.orgId,null===e||void 0===e?void 0:e.stageArn))}),[V]),(0,i.useEffect)((()=>{const e="create"===(null===Ut||void 0===Ut?void 0:Ut.method)?(0,Q.yN)(Ut):Ut;(null===Jt||void 0===Jt?void 0:Jt.length)>0&&(0,pe.oV)(Jt,null===e||void 0===e?void 0:e.stageArn)}),[Jt,Se]),(0,i.useEffect)((()=>{let e="";const t=e=>{var t,a;R(!0);const i=null===(t=P.Z.getState())||void 0===t||null===(a=t.recordedTimeReducer)||void 0===a?void 0:a.recordedTime;(0,pt.Ti)(),V&&(P.Z.dispatch((0,ie.m1)({stageArn:Ea,callStatus:"pending",duration:i.toString()})),P.Z.dispatch((0,q.Ov)()),(0,ne.BF)((0,S.fv)(),(0,S.yk)(Ut),"ended"),(0,ne.QP)((0,S.fv)(),(0,S.yk)(Ut),""),(0,ne.d0)((0,S.fv)(),(0,S.yk)(Ut),!1),(0,ne.vf)((0,S.fv)(),(0,S.yk)(Ut),!1)),P.Z.dispatch((0,q.Af)(!0)),P.Z.dispatch((0,ie.rc)({userId:te,orgId:ee,searchData:{page:1,searchTerm:"",size:10},position:"Upcoming"})),P.Z.dispatch({type:"ENABLE_BROADCAST",loading:!0}),P.Z.dispatch((0,ie.fm)({userId:te,orgId:ee,position:"Past"})),P.Z.dispatch({type:"ENABLE_BROADCAST",loading:!0}),V||(0,S.wL)(Ut)},a=setTimeout((()=>{window.sessionStorage.setItem("EndSessionPopStatus",!0),Pe(!0),P.Z.dispatch((0,It.qd)(!1)),(0,ne.vf)((0,S.fv)(),(0,S.yk)(Ut),!0)}),[X.Bd]),i=V&&setTimeout((async()=>{var t,a,i;G(!0),await(0,pt.Ti)(),await(0,pt.kQ)(),(0,U.o)(),(0,ne._F)((0,S.fv)(),(null===Ut||void 0===Ut?void 0:Ut.stageArn)||(null===Ut||void 0===Ut||null===(t=Ut.stage)||void 0===t?void 0:t.arn)),(0,H.bA)(),!V&&(0,S.wL)(Ut);const l=null===(a=P.Z.getState())||void 0===a||null===(i=a.recordedTimeReducer)||void 0===i?void 0:i.recordedTime;V&&((()=>{P.Z.dispatch((0,It.HY)(!1)),P.Z.dispatch((0,It.O6)(!1)),P.Z.dispatch((0,It.oc)(!1)),P.Z.dispatch((0,It.fr)(!1)),P.Z.dispatch((0,It.zi)(!1)),localStorage.removeItem("EditConnectedFB"),localStorage.removeItem("editStreamSave"),localStorage.removeItem("Select_Media"),P.Z.dispatch((0,It.YD)());const e=JSON.parse(localStorage.getItem("streamChannelId"))?JSON.parse(localStorage.getItem("streamChannelId")):"";e&&Aa(e)})(),P.Z.dispatch((0,ie.m1)({stageArn:Ea,callStatus:"ended",duration:l.toString()})),P.Z.dispatch((0,q.Ov)()),console.log("updatetime",l.toString()),(0,ne.BF)((0,S.fv)(),(0,S.yk)(Ut),"timeout"),Je(!0),(0,ne.d0)((0,S.fv)(),(0,S.yk)(Ut),!0)),P.Z.dispatch((0,q.Af)(!1)),setTimeout((()=>{P.Z.dispatch((0,ie.rc)({userId:te,orgId:ee,searchData:{page:1,searchTerm:"",size:10},position:"Upcoming"}))}),500),P.Z.dispatch({type:"ENABLE_BROADCAST",loading:!0}),setTimeout((()=>{P.Z.dispatch((0,ie.fm)({userId:te,orgId:ee,position:"Past"}))}),500),P.Z.dispatch({type:"ENABLE_BROADCAST",loading:!0}),P.Z.dispatch((0,ie.EE)("")),ut(!1),_e(!0),(0,Q.LM)(),Ge("ended"),e="ended"}),[X.Ki]);return window.addEventListener("beforeunload",t),async()=>{var e,l;const n=null===(e=P.Z.getState())||void 0===e||null===(l=e.recordedTimeReducer)||void 0===l?void 0:l.recordedTime;var o;ae||(V&&clearTimeout(a),V&&clearTimeout(i),(0,H.bA)(),await(0,pt.Ti)(),await(0,pt.kQ)(),(0,U.o)(),(0,ne._F)((0,S.fv)(),(null===Ut||void 0===Ut?void 0:Ut.stageArn)||(null===Ut||void 0===Ut||null===(o=Ut.stage)||void 0===o?void 0:o.arn)),window.removeEventListener("beforeunload",t),!V&&(0,S.wL)(Ut),V&&(P.Z.dispatch((0,ie.m1)({stageArn:Ea,callStatus:"ended",duration:n.toString()})),P.Z.dispatch((0,q.Ov)()),P.Z.dispatch((0,q.Af)(!1)),(0,ne.BF)((0,S.fv)(),(0,S.yk)(Ut),"ended"),(0,ne.d0)((0,S.fv)(),(0,S.yk)(Ut),!0)),setTimeout((()=>{P.Z.dispatch((0,ie.rc)({userId:te,orgId:ee,searchData:{page:1,searchTerm:"",size:10},position:"Upcoming"}))}),500),P.Z.dispatch({type:"ENABLE_BROADCAST",loading:!0}),setTimeout((()=>{P.Z.dispatch((0,ie.fm)({userId:te,orgId:ee,position:"Past"}))}),500),P.Z.dispatch({type:"ENABLE_BROADCAST",loading:!0}),P.Z.dispatch((0,ie.EE)("")),z(),ut(!1),_e(!0),(0,Q.LM)())}}),[]),(0,i.useEffect)((()=>{"denied"!==Ia&&"prompt"!==Ia||(La(!0),ua(!0))}),[Ia]),(0,i.useEffect)((()=>{console.log(Ca,"micPermissionsmicPermissions"),"denied"!==Ca&&"prompt"!==Ca||(Za(!0),ua(!0))}),[Ca]);const Wa=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";ai(),ht(rt!==e||!mt),ut(e),"Chat"===e&&setTimeout((()=>{document.getElementById("typingContainer").focus()}),600)},Ja=function(){mt?(ht(!1),ut(rt||"Brand")):(ht(!0),ut(rt||"Brand"),"Chat"===rt&&setTimeout((()=>{document.getElementById("typingContainer").focus()}),600))},Ya=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";navigator.clipboard.writeText(e),(0,ge.Ih)("Copied","copy")},[Ga,$a]=(0,i.useState)({getCaption:de,getColor:"",getBannerStatus:!1,getBannerNewContent:""}),{getColor:Ka,getCaption:Xa,getBannerStatus:Qa,getBannerNewContent:ei}=Ga;(0,i.useEffect)((()=>()=>{P.Z.dispatch((0,It.HY)(!1)),P.Z.dispatch((0,It.O6)(!1)),P.Z.dispatch((0,It.oc)(!1)),P.Z.dispatch((0,It.fr)(!1)),P.Z.dispatch((0,It.zi)(!1)),localStorage.removeItem("EditConnectedFB"),localStorage.removeItem("editStreamSave"),localStorage.removeItem("Select_Media"),P.Z.dispatch((0,It.YD)())}),[]),(0,i.useEffect)((()=>()=>{if(at&&lt&&Xe){P.Z.dispatch((0,It.HY)(!1)),P.Z.dispatch((0,It.O6)(!1)),P.Z.dispatch((0,It.oc)(!1)),P.Z.dispatch((0,It.fr)(!1)),P.Z.dispatch((0,It.zi)(!1)),localStorage.removeItem("EditConnectedFB"),localStorage.removeItem("editStreamSave"),localStorage.removeItem("Select_Media"),P.Z.dispatch((0,It.YD)());const e=JSON.parse(localStorage.getItem("streamChannelId"))?JSON.parse(localStorage.getItem("streamChannelId")):"";e&&Aa(e)}}),[at,lt,Xe]),(0,i.useEffect)((()=>{window.matchMedia("(max-width: 1365px)").matches&&setTimeout((()=>{Ja(!1)}),500)}),[]);(0,i.useEffect)((()=>{zt||ct(!0)}),[zt]),(0,i.useEffect)((()=>{"/broadcast"===window.location.pathname&&""===window.location.search&&z()}),[window.location.search]);const ti=document.getElementById("video_parent");function ai(){const e=document.getElementById("small_video_wraper"),t=document.getElementById("broadcast_layouts");if(e&&t){const a="16:9",i=a.split(":")[0],l=a.split(":")[1],n=null===ti||void 0===ti?void 0:ti.offsetWidth;C(null===e||void 0===e?void 0:e.offsetHeight);const o=(null===ti||void 0===ti?void 0:ti.offsetHeight)-(null===e||void 0===e?void 0:e.offsetHeight)-(null===t||void 0===t?void 0:t.offsetHeight);D(o);const s=i*o/l,c=l*n/i;n>s&&o>c?(d(s),T(c)):n<s&&o>c?(d(i*c/l),T(c)):n>s&&o<c&&(d(i*o/l),T(o))}}(0,i.useEffect)((()=>{const e=Sa?Sa[0]:v,t=Sa?Sa[1]:h;j(o/3>e?e:.3*o),N(o/3>t?t:.3*k)}),[v,Sa,o]),(0,i.useEffect)((()=>{setTimeout((()=>{ai()}),400)}),[Ft,mt,rt,null===ti||void 0===ti?void 0:ti.offsetWidth,O]),(0,i.useLayoutEffect)((()=>{setTimeout((()=>{ai()}),200);const e=()=>{ai()};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]);const ii=()=>{var e,t;return(0,s.jsx)("div",{style:{opacity:Le?1:0},className:"broadcast_banner_text banner_component ".concat(null!==(e=(0,Q.RN)((0,Q.D1)(V,Pt,Ft),"video"))&&void 0!==e&&e.isMuted?"with_img":" with_vdo "),children:(0,s.jsxs)("span",{style:(t=!0,{borderTopLeftRadius:""===ue&&t?"calc(calc(1.25/100) * ".concat(k,"px) calc(calc(1.25/100) * ").concat(k,"px)"):null,borderBottomLeftRadius:""===ue&&t?"calc(calc(1.25/100) * ".concat(k,"px) calc(calc(1.25/100) * ").concat(k,"px)"):null,marginLeft:t?"calc(calc(.5/100) * ".concat(k,"px)"):null,borderLeftWidth:t?"calc(calc(2/100) * ".concat(k,"px)"):null,fontSize:t?"calc(calc(3.46/100) * ".concat(k,"px)"):null,padding:t?"calc(calc(1.4/100) * ".concat(k,"px) calc(calc(2.8/100) * ").concat(k,"px)"):null,borderLeftColor:""===ue?ve:"",background:""===ue?" ":ve,color:(0,S.Ic)(ue,ve,me)}),className:"broadcast_particiapant_badge ".concat(""===ue?"default":"style"+ue),id:"dpName-broadcast-participants-".concat(Ft.id),children:[de," "]})})};(0,i.useEffect)((()=>{switch(re){case 0:Ne(g.XP);break;case 1:Ne(g.C2);break;case 2:Ne(g.dl);break;case 3:Ne(g.rV);break;default:Ne(g.mi)}}),[re]),(0,i.useEffect)((()=>{$a({...Ga,getColor:ve}),localStorage.setItem("fbBannerBgColor",JSON.stringify(ve)),ce?((0,pe.ix)(de,va,ce),(0,pe.Vw)(de,ue,ve,va)):(0,pe.V8)(Pt,$e)}),[ve]),(0,i.useEffect)((()=>{localStorage.setItem("fbBannerStyle",JSON.stringify(ue)),ce?(0,pe.Vw)(de,ue,ve,va):(console.log("useEffect else updateParticipantBannerStyle"),(0,pe.V8)(Pt,$e))}),[ue]),(0,i.useEffect)((()=>{Ka.length>3&&S.fz.test(Ka)&&((0,ne.tC)((0,S.fv)(),va,Ka),(0,ne.pO)((0,S.fv)(),va,function(e,t){if(null!==e&&null!==t&&(e.length>2||e.length>5)&&(t.length>2||t.length>5)){const a=wt(e),i=wt(t);if(null!==a&&null!==i){const e=Et(a.r,a.g,a.b),t=Et(i.r,i.g,i.b);return(e>t?(t+.05)/(e+.05):(e+.05)/(t+.05))<1/4.5}}}(Ka,"#fff")))}),[Ka]),(0,i.useEffect)((()=>{(0,pe.Eg)(Qa,Pt,$e)}),[Qa,Xa]);const li=()=>{Ue(!1),F.push("/broadcast"),P.Z.dispatch((0,q.Af)(!1)),P.Z.dispatch((0,It.HY)(!1)),P.Z.dispatch((0,It.O6)(!1)),P.Z.dispatch((0,It.fr)(!1)),P.Z.dispatch((0,It.zi)(!1)),localStorage.removeItem("EditConnectedFB"),localStorage.removeItem("editStreamSave"),localStorage.removeItem("Select_Media"),P.Z.dispatch((0,It.tM)())};return(0,i.useEffect)((()=>{He(fe),P.Z.dispatch((0,It.qd)(!0))}),[fe]),(0,i.useEffect)((()=>{Ue(xe)}),[xe]),(0,i.useEffect)((()=>{window.sessionStorage.removeItem("EndSessionPopStatus"),He(!1),P.Z.dispatch((0,It.qd)(!1));const e=w()(),t=e.milliseconds()+1e3*(e.seconds()+60*(e.minutes()+60*e.hours()));(0,ne.QS)((0,S.fv)(),(0,S.yk)(Ut),t)}),[]),(0,i.useEffect)((()=>{const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};9!==(e.keyCode||e.which)&&"Tab"!==e.key||e.preventDefault()};return(Re||Fe||Ve||We)&&window.addEventListener("keydown",e,!1),(Fe||We)&&(0,H.bA)(),()=>{window.removeEventListener("keydown",e)}}),[We,Ve,Fe,Re]),i.useEffect((()=>{function e(){Ze(!1),setTimeout((()=>{Ze(!0)}),1e3),A(Boolean(document.fullscreenElement))}return document.addEventListener("fullscreenchange",e),()=>{Ze(!1),setTimeout((()=>{Ze(!0)}),1e3),document.removeEventListener("fullscreenchange",e)}}),[]),(0,s.jsxs)("div",{className:"broadcast_video_view",children:[(0,s.jsxs)("div",{className:"broadcast_video_inner",children:[(0,s.jsxs)("div",{className:"broadcast_video_call",children:[(0,s.jsxs)("div",{id:"video_parent",style:{height:"".concat(E,"px")},className:"broadcast_video_player",children:[(0,s.jsxs)("div",{style:{width:"".concat(o,"px"),height:"".concat(k,"px"),minHeight:"".concat(k,"px")},id:"big_video_wraper",className:"broadcast_video_canvas",children:[V&&c?(0,s.jsxs)("div",{className:" ".concat(c?" active ":" "," broadcast_30_minutes"),children:[(0,s.jsxs)("div",{className:"broadcast_30_minutes_inner",children:[(0,s.jsx)("i",{children:(0,s.jsx)(p.ct9,{})}),(0,s.jsx)("p",{children:"This broadcast is valid for 30 minutes only."})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{r(!1)},className:"broadcast_30_action",children:(0,s.jsx)(p.kLi,{})})]}):null,(0,s.jsx)("div",{id:"full_screen_wraper",className:"full_screen_wraper",children:(0,s.jsx)("div",{style:{backgroundImage:"url(".concat(ye,")")},id:"full_screen_wraper_inner",className:"full_screen_wraper_inner",children:(0,s.jsxs)("div",{className:"video",children:["no-image"!==$t&&(0,s.jsx)("div",{style:{opacity:Le?1:0,maxWidth:"".concat(b,"px"),maxHeight:"".concat(_,"px"),left:Se?"":"calc(calc(5/100) * ".concat(k,"px)"),right:Se?"calc(calc(5/100) * ".concat(k,"px)"):"",top:"calc(calc(5/100) * ".concat(k,"px)")},className:"broadcast_video_logo",children:Yt?(0,s.jsx)(p.AE_,{}):(0,s.jsx)("img",{style:{maxWidth:"".concat(185,"px"),maxHeight:"".concat(_,"px")},id:"broadcast-logo",src:Jt,alt:"logo"})}),(0,Q.q5)(Pt,Ft)&&"layout-share"===$e&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"layout1 screen_share",children:(0,s.jsx)(Ae,{_getZoom:Le,fbBannerBgColor:ve,fbBannerStyle:ue,FbBannerTextColor:me,largeVideo:!0,_getBannerStatus:Ga.getBannerStatus,_getBannerText:Ga.getCaption,getCanvasHeight:k,type:"screen-share",screenShareId:ba,participantsData:(0,Q.q5)(Pt,Ft),wholeParticipantsData:Ft,videoMute:!1},null===(a=(0,Q.q5)(Pt,Ft))||void 0===a?void 0:a.id)})}),Ie&&we&&"layout1"===$e&&!(0,bt.yD)(Object.keys((0,Q.D1)(V,Pt,Ft)))&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"layout1 ",children:(0,s.jsx)(Ae,{_getZoom:Le,fbBannerBgColor:ve,fbBannerStyle:ue,FbBannerTextColor:me,largeVideo:!0,_getBannerStatus:Ga.getBannerStatus,_getBannerText:Ga.getCaption,getCanvasHeight:k,type:"broadcast-participants",participantsData:(0,Q.D1)(V,Pt,Ft),wholeParticipantsData:Ft,videoMute:(0,Q.RN)((0,Q.D1)(V,Pt,Ft),"video").isMuted},null===(l=(0,Q.D1)(V,Pt,Ft))||void 0===l?void 0:l.id)})}),Ie&&we&&"layout2"===$e?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"layout layout".concat(Pt.length>2?"3":Pt.length," ").concat("layout2_1"===$e?" full_view ":" ","  ").concat(""===rt?" open ":" "),children:[Ra(Pt).length>1&&Ra(Pt).map((e=>{let t;return null!==e&&void 0!==e&&e.isLocal?t=oa:Ft[null===e||void 0===e?void 0:e.id]&&(t=(0,Q.RN)(Ft[null===e||void 0===e?void 0:e.id],"video").isMuted),(0,s.jsx)(_t,{fbBannerBgColor:ve,fbBannerStyle:ue,FbBannerTextColor:me,largeVideo:!0,getCanvasHeight:k,_participantsData:Ft,participantsId:null===e||void 0===e?void 0:e.id,imgSrc:g.C,participantName:"Morrison venz",videoMute:t},null===e||void 0===e?void 0:e.id)})),ce?ii():null]})}):null,"layout3"===$e?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"layout layout3",children:[(0,s.jsx)(_t,{videoMute:!0,imgSrc:g.M6,participantName:" Harsha Sai"}),(0,s.jsxs)("div",{className:"layout3_inner",children:[(0,s.jsx)(_t,{videoMute:!0,imgSrc:g.M6,participantName:" Harsha Sai"}),(0,s.jsx)(_t,{videoMute:!0,imgSrc:g.M6,participantName:" Harsha Sai"})]}),ce?ii():null]})}):null,"layout4"===$e?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"layout layout4",children:[(0,s.jsx)(_t,{videoMute:!0,imgSrc:g.M6,participantName:" Harsha Sai"}),(0,s.jsx)(_t,{videoMute:!0,imgSrc:g.M6,participantName:" Harsha Sai"}),(0,s.jsx)(_t,{videoMute:!0,imgSrc:g.C,participantName:"Morrison venz"}),(0,s.jsx)(_t,{videoMute:!0,imgSrc:g.M6,participantName:" Harsha Sai"}),(0,s.jsx)(_t,{videoMute:!0,imgSrc:g.C,participantName:"Morrison venz"}),(0,s.jsx)(_t,{videoMute:!0,imgSrc:g.M6,participantName:" Harsha Sai"}),ce?ii():null]})}):null,"layout5"===$e||"layout6"===$e?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"layout layout5",children:[(0,s.jsx)(_t,{videoMute:!0,imgSrc:g.M6,participantName:" Harsha Sai"}),"layout5"===$e?(0,s.jsx)("div",{className:"layout5_inner",children:(0,s.jsx)(_t,{videoMute:!0,imgSrc:g.M6,participantName:" Harsha Sai"})}):null,ce?ii():null]})}):null,0!==he?(0,s.jsx)(Dt,{FbBannerTopOverlay:he}):null,ce?ii():null,(0,s.jsx)("button",{title:" Full screen ",className:"full_screen",onClick:()=>(()=>{const e=document&&document.getElementById("full_screen_wraper");e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()})(),type:"button",children:(0,s.jsx)(g.TV,{className:"maximize"})}),(0,s.jsxs)("button",{title:" Exit full screen ",className:"full_screen minimize",onClick:()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},type:"button",children:[(0,s.jsx)(g.s5,{className:"minimize"})," "]})]})})}),null]}),(0,s.jsx)("div",{id:"broadcast_layouts",style:{display:V?null:"none",width:"".concat(o,"px"),minHeight:k<200?"0px":null,height:k<200?"0px":null},className:"broadcast_layouts",children:V&&k>200?(0,s.jsx)(Y,{handleLayoutViewType:(e,t)=>{!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(e,"layoutType---1"),"initial"===t?Pt.length>1?Ke("layout2"):Ke("layout1"):Ke(e)}(e,t)},currentLayout:$e,layoutCount:Pt.length,isUserChanged:e=>tt(et+1),isScreenShare:(0,Q.q5)(Pt,Ft)&&"layout-share"===$e}):null}),(0,s.jsx)("div",{id:"small_video_wraper",className:"broadcast_video_particiapants",children:(0,s.jsx)("div",{style:{height:"".concat(I,"px")},className:"",children:Ie&&we&&!(0,bt.yD)(Object.keys(Ft))&&(0,s.jsx)(Be,{participants:Ra((0,S.Wd)(Pt)),participantsData:Ft,localMuteStatus:{videoMute:oa,audioMute:da}})})}),(0,s.jsx)("div",{className:"flex-grow"})]}),(0,s.jsx)("div",{className:"broadcast_video_action",children:(0,s.jsxs)("div",{className:"broadcast_video_action_inner",children:[!je&&Oe&&V&&(0,s.jsxs)("div",{className:"broadcast_video_link_copy",children:[(0,s.jsx)("span",{ref:be,children:"".concat(X.bu).concat(Oe)}),(0,s.jsx)("div",{className:"copy_btn",children:(0,s.jsx)("button",{onClick:()=>Ya(be.current.textContent),className:"",type:"button",children:(0,s.jsx)(p.vUr,{})})})]}),oe&&"on-live"===se&&!V&&(0,s.jsxs)("div",{className:"broadcast_video_link_copy",children:[(0,s.jsx)("span",{ref:be,children:"".concat(X.bu).concat(oe)}),(0,s.jsx)("div",{className:"copy_btn",children:(0,s.jsx)("button",{onClick:()=>Ya(be.current.textContent),className:"",type:"button",children:(0,s.jsx)(p.vUr,{})})})]}),(0,s.jsx)(St,{_getGoLive:!je,enableAddParticipants:!0,enableAdditionAction:!0,_handleAudioMute:e=>Za(e),_handleVideoMute:e=>La(e),handleHangup:()=>ft(!0),_handleTimeUpdate:e=>{console.log("updatetime@@",e),Bt(1e3*e),P.Z.dispatch((0,q.xX)(1e3*e));const t=Math.floor(e/3600).toString().padStart(2,"0"),a=Math.floor(e%3600/60).toString().padStart(2,"0"),i=(e%60).toString().padStart(2,"0");Ot("".concat(t,":").concat(a,":").concat(i))},formattedTime:Ct,muteStatus:W,type:"broadcastView",_liveHls:Oe,_isHost:V,handleCameraPermissions:Ia,handleMicPermissions:Ca,isVideoMute:oa,isAudioMute:da,isScreenShare:(0,Q.q5)(Pt,Ft)&&"layout-share"===$e}),Object.keys(Ft).length>0&&V&&(0,s.jsx)("div",{className:"broadcast_video_record",children:je?(0,s.jsx)("button",{className:"blue",onClick:async()=>{st(!0)},type:"button",children:"Go Live"}):(0,s.jsx)("div",{className:"live_status_wraper",children:(0,s.jsx)("div",{className:"live_status",children:(0,s.jsx)(u(),{className:"icon_animate",animationData:g.$o,loop:!0})})})}),"on-live"===se&&!V&&(0,s.jsx)("div",{className:"broadcast_video_record",children:(0,s.jsx)("div",{className:"live_status_wraper",children:(0,s.jsx)("div",{className:"live_status",children:(0,s.jsx)(u(),{className:"icon_animate",animationData:g.$o,loop:!0})})})})]})})]}),(0,s.jsx)(De,{_handleMenusOpen:()=>Ja(!1),getBannerText:Ga,handleResizedImage:(e,t)=>{Gt(!0),m(e),f(t)},handleInput:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{name:t="",value:a=""}=e.target;console.log("inputvalue",a,Xa,Qa,ei),$a({...Ga,[t]:a})},videoId:"video-broadcast-participants-".concat((0,Q.D1)(V,Pt,Ft).id),getGoLive:je,_handleAudioMute:e=>Za(e),_handleVideoMute:e=>La(e),getMenusOpen:mt,currentLayout:"",muteStatus:W,getMenus:rt,isHost:V,getvideoDetailsEle:{title:"temp",createdAt:123123123},getSelectedUrl:null===Vt||void 0===Vt||null===(n=Vt.channel)||void 0===n?void 0:n.playbackUrl,playData:JSON.stringify(Oe),disableClick:Re||We||dt||gt||ra}),(0,s.jsxs)("div",{className:"broadcast_video_layout",children:[(0,s.jsxs)("div",{className:"broadcast_layout_top",children:[V&&(0,s.jsx)("button",{title:"Banner Customization",type:"button",onClick:()=>Wa("Brand"),className:"".concat("Brand"===rt?" active ":" "),children:(0,s.jsx)(g.dc,{})}),(0,s.jsx)("button",{title:"Participants",type:"button",onClick:()=>Wa("Participants"),className:"".concat("Participants"===rt?" active ":" "),children:(0,s.jsx)(g.m0,{})}),!je&&Oe&&(0,s.jsx)("button",{style:{display:""},title:"Share",type:"button",onClick:()=>Wa("Share"),className:"".concat("Share"===rt?" active ":" "),children:(0,s.jsx)(g._,{})}),(0,s.jsxs)("button",{title:"Private Chat",type:"button",onClick:()=>Wa("Chat"),className:"".concat("Chat"===rt?" active ":" "),children:[(0,s.jsx)(g.Su,{}),!1]})]}),(0,s.jsx)("div",{className:"broadcast_layout_bottom",children:(0,s.jsx)("button",{title:"Hide/Show",className:" ".concat(""===rt||mt?"active":""," "),onClick:()=>Ja(!1),type:"button   ",children:(0,s.jsx)(g.oG,{})})})]})]}),Re&&V?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>(Pe(!1),P.Z.dispatch((0,It.qd)(!1)),void setTimeout((()=>{window.sessionStorage.setItem("EndSessionPopStatus",!1),window.sessionStorage.removeItem("EndSessionPopStatus"),window.sessionStorage.clear()}),300)),type:"warning"}):null,Ve&&!V?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>(He(!1),void P.Z.dispatch((0,It.qd)(!1))),type:"Cohostwarning"}):null,Fe&&!V&&oe?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>{Ve&&(He(!1),P.Z.dispatch((0,It.qd)(!1))),li()},type:"cohostCallEnd"}):null,!Fe||V||oe?null:(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>{Ve&&(He(!1),P.Z.dispatch((0,It.qd)(!1))),li()},type:"cohostCallEndWithoutLive"}),We&&V?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>{Re&&(Pe(!1),P.Z.dispatch((0,It.qd)(!1))),Je(!1),li()},type:"timeOut"}):null,dt?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>{zt?(0,x.ZM)():console.log("offline")},type:"offline"}):null,gt?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>{ft(!1)},handleExit:()=>{Ma(),ft(!1)},type:"callExit"}):null,ra?(0,s.jsx)(K.Z,{handleExit:()=>{ua(!1),Ma()},cameraPermissions:Ia,micPermissions:Ca,_handleRefreshPage:()=>{"denied"!==Ca&&"prompt"!==Ca&&"denied"!==Ia&&"prompt"!==Ia&&window.location.reload()},type:"DeviceChanege"}):null,qe?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>ze(!1),handleExit:()=>{Ma()},type:"joinDeletePopup"}):null,M&&(0,s.jsx)(K.Z,{_handleOnOutsideClick:ta?()=>{}:()=>L(!1),handleExit:()=>L(!1),type:"socialAccountAccess",mediaDetails:Zt[0]})]})};var At=a(47374),Bt=a(15430);const Mt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{t:t}=(0,l.$)(),{handleEntering:a=(()=>{}),handleMuteStatus:n=(()=>{}),_handleBack:o=(()=>{})}=e,d=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.BroadcastScreenBackReducer)||void 0===t?void 0:t.broadcastScreenBackStatus})),c=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.BroadcastScreenReducer)||void 0===t?void 0:t.broadcastScreenStatus})),[r,v]=(0,i.useState)(!0),[m,h]=(0,i.useState)(!0),[f,b]=(0,i.useState)(!1),[j,_]=(0,i.useState)(!0),[y,N]=(0,i.useState)(!1),[I,C]=(0,i.useState)(!1),[k,T]=(0,i.useState)(!1),[w,E]=(0,i.useState)(!1),[D,O]=(0,i.useState)(!1),A=(0,B.v9)((e=>null===e||void 0===e?void 0:e.awsStageReducer)),M=(0,B.v9)((e=>null===e||void 0===e?void 0:e.localStreams)),L=(0,B.v9)((e=>null===e||void 0===e?void 0:e.cameraPermissions)),Z=(0,B.v9)((e=>null===e||void 0===e?void 0:e.micPermissions)),R=(0,B.v9)((e=>null===e||void 0===e?void 0:e.broadcastBranding)),F=(0,B.v9)((e=>null===e||void 0===e?void 0:e.tempStreams)),V=(0,B.v9)((e=>null===e||void 0===e?void 0:e.awsStageReducer)),z="create"===V.method?(0,Q.yN)(V):V,{sessionName:W=""}=z;let J,Y;const G=async(e,t)=>{const a=document.getElementById("test-video-element");a.srcObject=new MediaStream;const i=new MediaStream(e);a.srcObject=i},$=async e=>{const{localCamera:t}=M;if(e){if(t.getTracks().forEach((e=>{e.stop()})),J){J.getTracks().forEach((e=>{e.stop()}))}}else J=await(0,H.oM)("VIDEO"),G(J);v(!e),!1===e&&(b(!0),setTimeout((()=>{h(!e),b(!1)}),600)),n("VIDEO",e)},X=async e=>{const{localMic:t}=M;if(e){if(t.getTracks().forEach((e=>{e.stop()})),Y){Y.getTracks().forEach((e=>{e.stop()}))}}else Y=await(0,H.oM)("AUDIO"),qe(Y);_(!e),n("AUDIO",e)};return(0,i.useEffect)((()=>(P.Z.dispatch((0,ie.EE)(Nt.c6)),n("VIDEO",!r),n("AUDIO",!j),P.Z.dispatch((0,q.Af)(!0)),()=>{if(J){J.getTracks().forEach((e=>{e.stop()}))}if(Y){Y.getTracks().forEach((e=>{e.stop()}))}})),[]),(0,i.useEffect)((()=>{"denied"!==L&&"prompt"!==L||$(!0)}),[L]),(0,i.useEffect)((()=>{"denied"!==Z&&"prompt"!==Z||X(!0)}),[Z]),(0,i.useEffect)((()=>{null!==A&&void 0!==A&&A.orgId&&null!==A&&void 0!==A&&A.stageArn&&(0,ne.tU)(null===A||void 0===A?void 0:A.orgId,null===A||void 0===A?void 0:A.stageArn)}),[A]),(0,i.useEffect)((()=>{const{localCamera:e,localMic:t}=M;t&&j&&qe(t),M&&(null===e||void 0===e?void 0:e.id)!==I&&(r&&G(e),C(null===e||void 0===e?void 0:e.id))}),[M,F]),(0,i.useEffect)((()=>{P.Z.dispatch((0,q.O$)(!0))}),[]),(0,i.useEffect)((()=>{!d&&c&&o()}),[d,c]),(0,s.jsxs)("div",{className:"entering_stream_wraper",children:[(0,s.jsxs)("div",{className:"entering_stream_inner",children:[!k&&(0,s.jsxs)("button",{onClick:()=>o(),className:"action_back_btn",type:"button",children:[(0,s.jsx)(g.ed,{}),t("COMMON.BACK")]}),(0,s.jsx)("div",{className:"entering_stream_head",children:(0,s.jsx)("h1",{children:"Entering Stream..."})}),(0,s.jsxs)("div",{className:"entering_stream_body",children:[(0,s.jsx)("div",{className:"entering_stream_customize border-none",children:D?(0,s.jsx)("div",{className:"entering_stream_graphics",children:(0,s.jsx)("img",{width:"520px",height:"268px",src:g.rc,alt:"entering"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"entering_stream_customize_mic",children:[(0,s.jsx)("i",{children:(0,s.jsx)(g.lE,{})}),(0,s.jsx)("canvas",{id:"mic_volume",className:"mic_volume mic_volume_off mic_0 mic_30 mic_60 mic_90"}),(0,s.jsx)("span",{className:" ".concat(j?"mic_on":"mic_off"),children:j?"Mic is working ":"Turn on the mic"})]}),(0,s.jsx)("div",{className:"entering_stream_customize_video",children:(0,s.jsxs)("div",{className:"entering_stream_video",children:[(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("video",{className:"video_mirror",id:"test-video-element",style:{display:r?"block":"none",opacity:m?1:0},autoPlay:!0}),f&&r?(0,s.jsx)("div",{className:"video_res_loader",children:(0,s.jsx)(p.pAw,{fill:"#fff"})}):null]}),(0,s.jsx)("img",{width:"117px",height:"117px",style:{"z:index":"100",display:r?"none":"block"},src:g.C,alt:"profile"})]})})]})}),(0,s.jsxs)("div",{className:"entering_stream_note",children:[(0,s.jsx)("strong",{children:"Note: "}),(0,s.jsx)("p",{children:"Max 4 persons can be joined in the live streaming"})]})]}),(0,s.jsx)("div",{className:"entering_stream_foot",children:(0,s.jsxs)("div",{className:"entering_stream_actions",children:[(0,s.jsx)(St,{enableHangup:!1,_handleAudioMute:e=>X(e),_handleVideoMute:e=>$(e),_enteringStatus:k,handleCameraPermissions:L,handleMicPermissions:Z,isVideoMute:!r,isAudioMute:!j}),D?(0,s.jsxs)("div",{className:"icon_loader_wraper",children:[(0,s.jsx)(u(),{className:"icon_loader",animationData:g._7,loop:!0}),(0,s.jsx)("span",{children:"Loading"})]}):(0,s.jsxs)("button",{onClick:async()=>{var e,t,i;const l=(0,ke.cV)()||{},{data:{firstName:n="",email:o="",organisationName:s}={}}=l;if((0,U.s9)())return void(0,ge.lL)(Bt.G.INTERNET_ERROR);if("denied"===Z||"prompt"===Z||"denied"===L||"prompt"===L)return N(!0),void(0,U.Rp)("Enter_Stream_Failure",{otfName:n,otfEmail:o,otfOrganisationName:s,otfBroadcastName:W,OtfError:Z});const d=await(0,U.NB)((0,S.yk)(A));if(1===(null===d||void 0===d?void 0:d.isDelete))return E(!0),void(0,U.Rp)("Enter_Stream_Failure",{otfName:n,otfEmail:o,otfOrganisationName:s,otfBroadcastName:W,OtfError:"Stage Deleted"});(0,U.Rp)("Enter_Stream_Success",{otfName:n,otfEmail:o,otfOrganisationName:s,otfBroadcastName:W}),O(!0);const c={CamId:null===M||void 0===M||null===(e=M.DeviceIds)||void 0===e?void 0:e.video,MicId:null===M||void 0===M||null===(t=M.DeviceIds)||void 0===t?void 0:t.audio,SpeakerId:null===M||void 0===M||null===(i=M.DeviceIds)||void 0===i?void 0:i.speaker};(0,ot.KP)(c),T(!0),!(0,S.MD)(A)&&(()=>{const{participantCount:e=0}=R;(0,ne.qe)((0,S.fv)(),(0,S.yk)(A),e+1),(0,ne.RK)((0,S.fv)(),(0,S.yk)(A),e+1)})(),setTimeout((async()=>{(0,pt.Mx)(A,{isVideoMute:!r,isAudioMute:!j}),O(!1),a(A),P.Z.dispatch((0,ie.EE)(Nt.RY))}),2e3)},type:"button",className:"entering_stream_enter",children:["Enter Stream"," "]})]})}),w?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>E(!1),type:"joinDeletePopup",handleExit:()=>{(0,x.ZM)()}}):null]}),y?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>N(!1),type:"assertAccess"}):null]})};var Lt=a(93993),Zt=a(17904),Rt=a(54248),Pt=a(83478);var Ft=a(55872),Ut=a(763),Vt=a(96492);const Ht=function(){const e=(0,B.I0)(),t=(0,yt.k6)(),a=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.CusPage)||void 0===t?void 0:t.customerDtls})),l=(0,B.v9)((e=>null===e||void 0===e?void 0:e.sessionInfo)),n=(0,B.v9)((e=>e))||{},{loader:{isLoadingEdit:o=!1}={}}=n,d=(0,B.v9)((e=>null===e||void 0===e?void 0:e.awsStageReducer)),c=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.sessionPastRecordReducer)||void 0===t?void 0:t.totalRecords})),r=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.sessionUpcomingRecordReducer)||void 0===t?void 0:t.totalRecords})),u=(0,B.v9)((e=>null===e||void 0===e?void 0:e.sessionTotalRecordReducer)),v=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.currentOrganisationReducer)||void 0===t?void 0:t.currentOrganisation})),m=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.deleteReducer)||void 0===t?void 0:t.deleteMsg})),h=(0,B.v9)((e=>null===e||void 0===e?void 0:e.broadcastBranding)),p=(0,B.v9)((e=>{var t;return null===e||void 0===e||null===(t=e.BroadcastScreenReducer)||void 0===t?void 0:t.broadcastScreenStatus})),g="create"===d.method?(0,Q.yN)(d):d,{sessionName:f=""}=g,b=(null===h||void 0===h?void 0:h.layout)||"",j=(null===h||void 0===h?void 0:h.hlsLink)||"",_=(null===h||void 0===h?void 0:h.goliveStatus)||"",y=(null===h||void 0===h?void 0:h.callWaringTime)||"",N=(null===h||void 0===h?void 0:h.callEndTime)||"",I=(null===h||void 0===h?void 0:h.callStartTime)||"",C=(null===h||void 0===h?void 0:h.bannerText)||"",k=(null===h||void 0===h?void 0:h.bannerStatus)||"",T=(null===h||void 0===h?void 0:h.bannerBackground)||0,w=(null===h||void 0===h?void 0:h.bannerStyle)||"",E=(null===h||void 0===h?void 0:h.bannerBgColor)||"",D=(null===h||void 0===h?void 0:h.bannerTextColor)||"",O=(null===h||void 0===h?void 0:h.bannerTopOverlay)||0,A=(null===h||void 0===h?void 0:h.removeParticipant)||!1,M={fbLayout:b,fbHlsLink:j,fbGoLive:_,fbBannerText:C,fbBannerStatus:k,fbBannerBackground:T,fbBannerStyle:w,fbBannerBgColor:E,FbBannerTextColor:D,FbBannerTopOverlay:O,fbWarningTime:y,fbEndTime:N,fbCallStartTime:I,FbIsLogoRight:(null===h||void 0===h?void 0:h.isLogoRight)||!1},[Z,R]=(0,i.useState)(!1),[F,z]=(0,i.useState)(!1),[Y,G]=(0,i.useState)(!1),[$,ee]=(0,i.useState)(!1),[te,ae]=(0,i.useState)(!1),[le,oe]=(0,i.useState)({isVideoMute:!1,isAudioMute:!1}),[se,de]=(0,i.useState)(!1),[ce,re]=(0,i.useState)(!0),[ue,ve]=(0,i.useState)(!1),[me,he]=(0,i.useState)([]),[pe,fe]=(0,i.useState)([]),[xe,Se]=(0,i.useState)(!1),[be,_e]=(0,i.useState)(!1),[ye,Ne]=(0,i.useState)(!1),[Ie,Te]=(0,i.useState)(!0),[we,Ee]=(0,i.useState)(!1),[De,Oe]=(0,i.useState)("Upcoming"),[Ae,Be]=(0,i.useState)(!1),[Me,Le]=(0,i.useState)(!1),[Ze,Re]=(0,i.useState)(!1),[Pe,Fe]=(0,i.useState)(!1),[Ue,Ve]=(0,i.useState)({getBroadcastInitialshow:!0,getBroadcastTableShow:!1,getEnteringStreamShow:!1,getCreateLiveStreaming:!1,getVideoViewShow:!1}),He=(0,ke.cV)()||{},[qe,ze]=(0,i.useState)({page:1,searchTerm:"",size:10}),{page:We=1}=qe,Je=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{target:{name:a="",value:i=""}={}}=t;if(e){const e={...qe,[a]:i,page:1};ze(e)}else{const e={...qe,[a]:i};ze(e)}},Ye=e=>{let a;var i,l;(G(!0),"create"===e.method)?(a=null===e||void 0===e||null===(i=e.stage)||void 0===i?void 0:i.arn,Ne(!0),P.Z.dispatch((0,Ce.z)(null===e||void 0===e||null===(l=e.stage)||void 0===l?void 0:l.arn)),G(!1)):(a=null===e||void 0===e?void 0:e.stageArn,Ne(0===e.hostId),P.Z.dispatch((0,Ce.z)(null===e||void 0===e?void 0:e.stageArn)),G(!1));P.Z.dispatch((0,It.HY)(!0)),Ve({getBroadcastInitialshow:!1,getBroadcastTableShow:!1,getEnteringStreamShow:!1,getCreateLiveStreaming:!1,getVideoViewShow:!0}),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.push({pathname:"/broadcast",search:e})}(mt(a))},Ge=window.localStorage.getItem("currntOrgid")?JSON.parse(window.localStorage.getItem("currntOrgid")):{};(0,i.useEffect)((()=>{Me&&Ve({...Ue,getCreateLiveStreaming:!0})}),[Me]),(0,i.useEffect)((async()=>{const e=window.localStorage.getItem("userDetails")?JSON.parse(window.localStorage.getItem("userDetails")):{},{data:{firstName:t="",email:a=""}={}}=e,i=a.replace(/[^A-Z0-9]/gi,"").toLowerCase();Se(i),_e(t)}),[]),(0,i.useEffect)((()=>{if(0===Object.keys(a).length){const e=(0,ke.cV)()||{},{data:{userId:t=0}={}}=e;(0,Lt.U)(t),P.Z.dispatch((0,Zt.I2)(a.data))}const e=t.location.search.replace("?","");var i,n;0===Object.keys(v).length&&0===Object.keys(Ge).length||Ge.organisationId===He.data.organisationId?(3===(null===a||void 0===a?void 0:a.userRoleId)&&Ve({getBroadcastInitialshow:!((null===l||void 0===l?void 0:l.length)>0||""!==qe.searchTerm||c>0||r>0),getBroadcastTableShow:(null===l||void 0===l?void 0:l.length)>0||""!==qe.searchTerm||c>0||r>0,getEnteringStreamShow:!1,getCreateLiveStreaming:!1,getVideoViewShow:!1}),P.Z.dispatch((0,Zt.I2)(He.data)),P.Z.dispatch((0,Rt.wp)({customerId:He.data.userId})),P.Z.dispatch({type:"DO_LOADING_LOGIN_PAGE",loading:!0}),P.Z.dispatch((0,ie.rc)({userId:null===He||void 0===He||null===(i=He.data)||void 0===i?void 0:i.userId,orgId:null===Ge||void 0===Ge?void 0:Ge.organisationId,searchData:qe,position:De})),P.Z.dispatch({type:"ENABLE_BROADCAST",loading:!0}),P.Z.dispatch((0,Pt.x)())):(e.length<1&&(3!==(null===Ge||void 0===Ge?void 0:Ge.userRoleId)&&3!==(null===Ge||void 0===Ge?void 0:Ge.invitedUserRoleId)||Ve({getBroadcastInitialshow:!((null===l||void 0===l?void 0:l.length)>0||""!==qe.searchTerm||c>0||r>0),getBroadcastTableShow:(null===l||void 0===l?void 0:l.length)>0||""!==qe.searchTerm||c>0||r>0,getEnteringStreamShow:!1,getCreateLiveStreaming:!1,getVideoViewShow:!1})),P.Z.dispatch((0,Zt.I2)(Ge)),P.Z.dispatch((0,ie.rc)({userId:null===He||void 0===He||null===(n=He.data)||void 0===n?void 0:n.userId,orgId:null===Ge||void 0===Ge?void 0:Ge.organisationId,searchData:qe,position:De})),P.Z.dispatch({type:"ENABLE_BROADCAST",loading:!0}),P.Z.dispatch((0,Pt.x)()))}),[v,qe,De]),(0,i.useEffect)((()=>{ze({page:1,searchTerm:"",size:10})}),[v,De]),(0,i.useEffect)((()=>{p||(Oe("Upcoming"),ze({page:1,searchTerm:"",size:10}))}),[p]),(0,i.useEffect)((()=>{var e,t;!ye&&null!==Ue&&void 0!==Ue&&Ue.getBroadcastTableShow&&(P.Z.dispatch((0,ie.rc)({userId:null===He||void 0===He||null===(e=He.data)||void 0===e?void 0:e.userId,orgId:null===Ge||void 0===Ge?void 0:Ge.organisationId,searchData:qe,position:"Upcoming"})),P.Z.dispatch({type:"ENABLE_BROADCAST",loading:!0}),P.Z.dispatch((0,ie.fm)({userId:null===He||void 0===He||null===(t=He.data)||void 0===t?void 0:t.userId,orgId:null===Ge||void 0===Ge?void 0:Ge.organisationId,searchData:qe,position:"Past"})),P.Z.dispatch({type:"ENABLE_BROADCAST",loading:!0}))}),[A]),(0,i.useEffect)((()=>{(null===l||void 0===l?void 0:l.length)<=0&&c<=0&&r<=0&&Oe("Upcoming")}),[v]),(0,i.useEffect)((()=>{navigator.permissions.query({name:"camera"}).then((function(e){console.log("camera permission >>>>",e.state),e.onchange=function(){console.log("camera permission >>>>  : vh",e.state),P.Z.dispatch((0,ie.Ig)(e.state))}})),navigator.permissions.query({name:"microphone"}).then((function(e){console.log("microphone permission >>>>",e.state),e.onchange=function(){console.log("microphone permission >>>>  : vh",e.state),P.Z.dispatch((0,ie.$h)(e.state))}})),P.Z.dispatch((0,q.Af)(!1))}),[]),(0,i.useEffect)((()=>{400===(null===m||void 0===m?void 0:m.status)&&Re(!0)}),[m]),(0,i.useEffect)((()=>{var e,t;P.Z.dispatch((0,ie.Iw)({userId:null===He||void 0===He||null===(e=He.data)||void 0===e?void 0:e.userId,orgId:null===Ge||void 0===Ge?void 0:Ge.organisationId,searchData:qe,position:"Upcoming"})),P.Z.dispatch({type:"ENABLE_BROADCAST",loading:!0}),P.Z.dispatch((0,ie.fm)({userId:null===He||void 0===He||null===(t=He.data)||void 0===t?void 0:t.userId,orgId:null===Ge||void 0===Ge?void 0:Ge.organisationId,searchData:qe,position:"Past"})),P.Z.dispatch({type:"ENABLE_BROADCAST",loading:!0})}),[De,v]),(0,i.useEffect)((()=>()=>{ae(!1),P.Z.dispatch((0,Ce.W)())}),[]),(0,i.useEffect)((()=>{if((null===l||void 0===l?void 0:l.length)>0||""!==qe.searchTerm||c>0||r>0){const a=t.location.search.replace("?",""),i=(0,Ut.isArray)(l)&&(null===l||void 0===l?void 0:l.filter((e=>mt(null===e||void 0===e?void 0:e.stageArn)===a)));if(a.length>0&&1===(null===i||void 0===i?void 0:i.length)){if(ae(!1),ce&&!F){async function n(){await(async()=>{const e=await(0,H.PW)();P.Z.dispatch((0,ie.Fs)(e));const t=(0,ot.vS)(),a=await dt(null===t||void 0===t?void 0:t.CamId,null===t||void 0===t?void 0:t.MicId,null===t||void 0===t?void 0:t.SpeakerId);console.log(a,"localStreamUpdate>>>2"),P.Z.dispatch((0,ie._6)({...a}))})(),await(0,pt.Mx)(i[0])}e((0,ie.gR)(i[0])),n(),Ye(i[0]),re(!1)}}else a.length>0&&0===i.length?!F&&(0,Ut.isArray)(l)&&ae(!0):Ve({getBroadcastInitialshow:!1,getBroadcastTableShow:!0,getEnteringStreamShow:!1,getCreateLiveStreaming:!1,getVideoViewShow:!1})}else{const o=t.location.search.replace("?",""),s=(0,Ut.isArray)(l)&&(null===l||void 0===l?void 0:l.filter((e=>mt(null===e||void 0===e?void 0:e.stageArn)===o)));o.length>0&&0===(null===s||void 0===s?void 0:s.length)?!F&&(0,Ut.isArray)(l)&&ae(!0):Ve({getBroadcastInitialshow:!0,getBroadcastTableShow:!1,getEnteringStreamShow:!1,getCreateLiveStreaming:!1,getVideoViewShow:!1})}setTimeout((()=>{G(!1)}),2500)}),[l,c]),(0,i.useEffect)((()=>{3===(null===a||void 0===a?void 0:a.userRoleId)&&Ve({getBroadcastInitialshow:!((null===l||void 0===l?void 0:l.length)>0||""!==qe.searchTerm||c>0||r>0),getBroadcastTableShow:(null===l||void 0===l?void 0:l.length)>0||""!==qe.searchTerm||c>0||r>0,getEnteringStreamShow:!1,getCreateLiveStreaming:!1,getVideoViewShow:!1})}),[a]);const{getBroadcastInitialshow:$e,getCreateLiveStreaming:Ke,getBroadcastTableShow:Xe,getEnteringStreamShow:Qe,getVideoViewShow:et}=Ue,tt=()=>{const e=(0,ke.cV)()||{},{data:{firstName:t="",email:a="",organisationName:i}={}}=e;(0,U.Rp)("Create_Broadcast",{otfName:t,otfEmail:a,otfOrganisationName:i,otfBroadcastName:f}),localStorage.removeItem("Select_Media"),Ve({...Ue,getCreateLiveStreaming:!Ue.getCreateLiveStreaming})},at=async function(t,i,l,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";const s=(0,ke.cV)()||{},{data:{firstName:d="",email:c="",organisationName:r}={}}=s;(0,U.Rp)("Join_Broadcast",{otfName:d,otfEmail:c,otfOrganisationName:r,otfBroadcastName:f}),G(!0);const{camera:u="",mic:v=""}=await st();if((0,U.s9)())return G(!1),void(0,ge.lL)(Bt.G.INTERNET_ERROR);if("Update"===o){var m,h;const{membersdata:e=[],scheduledData:a={}}=t;console.log(t,"stageDatastageDatastageData");const o=null===e||void 0===e||null===(m=e.filter((e=>(null===e||void 0===e?void 0:e.userId)!==(0,S.rc)())))||void 0===m?void 0:m.filter((e=>(null===pe||void 0===pe?void 0:pe.findIndex((t=>(null===t||void 0===t?void 0:t.emailId)===(null===e||void 0===e?void 0:e.userEmail))))<0)),s=null===pe||void 0===pe?void 0:pe.filter((t=>(null===e||void 0===e?void 0:e.findIndex((e=>(null===e||void 0===e?void 0:e.userEmail)===(null===t||void 0===t?void 0:t.emailId))))<0)),d=o.map((e=>""===(null===e||void 0===e?void 0:e.stageParticipantId)?{stageArn:null===e||void 0===e?void 0:e.stageArn,participantIds:[],userMailIds:[null===e||void 0===e?void 0:e.userEmail]}:{stageArn:null===e||void 0===e?void 0:e.stageArn,participantIds:[null===e||void 0===e?void 0:e.stageParticipantId],userMailIds:[]}));if(await d.map((async e=>{await(0,ut.JJ)(e)})),console.log(a,"scheduledDatascheduledData"),await(0,ut.js)({updatedArray:s,addFromBroadcast:!0,invitedMailIds:[],stageArn:null===(h=e[0])||void 0===h?void 0:h.stageArn,type:"UPDATE",scheduledData:a}),i){var p;const t=null===e||void 0===e?void 0:e.filter((e=>0===e.isHost));(0,S.pC)(null===(p=t[0])||void 0===p?void 0:p.stageArn,i,l,n)}setTimeout((()=>{R(!1)}),1e3),fe([]),Ve({...Ue,getCreateLiveStreaming:!1}),setTimeout((()=>{G(!1)}),2500)}var g,x,b;"Schedule"===o&&(Oe("Upcoming"),e((0,ie.ei)({...t,membersdata:pe,scheduledTime:null===t||void 0===t||null===(g=t.scheduledData)||void 0===g?void 0:g.scheduledTime,hostScheduledTime:null===t||void 0===t||null===(x=t.scheduledData)||void 0===x?void 0:x.hostScheduledTime,scheduledTimeZone:null===t||void 0===t||null===(b=t.scheduledData)||void 0===b?void 0:b.scheduledTimeZone,select:i,selectedId:l,broadcastId:n})),setTimeout((()=>{R(!1),ze({page:1,searchTerm:"",size:10})}),1e3),fe([]),Ve({...Ue,getCreateLiveStreaming:!1}));if("completed"!==t.callStatus){if("create"===o)e((0,ie.ei)({...t,membersdata:pe,select:i,selectedId:l,broadcastId:n})),setTimeout((()=>{R(!1)}),1e3),Te(!1);else{var j,_;const a=await(0,U.NB)(t.stageArn);if(1===(null===a||void 0===a||null===(j=a.data)||void 0===j||null===(_=j.stageDetails)||void 0===_?void 0:_.isDelete))return Be(!0),void setTimeout((()=>{G(!1)}),2500);if(e((0,ie.gR)(t)),setTimeout((()=>{G(!1)}),2500),"You'r not associated with this stage"===(null===a||void 0===a?void 0:a.message))return"Schedule"!==o&&"Update"!==o&&Fe(!0),void setTimeout((()=>{G(!1)}),2500)}"denied"!==u&&"denied"!==v||(ee(!0),setTimeout((()=>{G(!1)}),2500),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}));const s=await(async()=>{const e=await(0,H.PW)();P.Z.dispatch((0,ie.Fs)(e));const{videoDevices:t=[],audioDevices:a=[],audioOutputDevices:i=[]}=e;if(t.length<1||a.length<1)return"NO_DEVICE_CONNECTED";const l=i.length?i[0].deviceId:null,n=await dt(t[0].deviceId,a[0].deviceId,l);P.Z.dispatch((0,ie._6)({...n}))})();if(await(async()=>{navigator.mediaDevices.addEventListener("devicechange",(async function(e){const t=await(0,H.PW)();P.Z.dispatch((0,ie.Fs)(t))}))})(),"NO_DEVICE_CONNECTED"===s)return void Ee(!0);Ve({...Ue,getBroadcastTableShow:!1,getBroadcastInitialshow:!1,getCreateLiveStreaming:!1,getEnteringStreamShow:!0}),"join"!==o||ye||(G(!1),(0,ne.kr)(null===t||void 0===t?void 0:t.orgId,null===t||void 0===t?void 0:t.stageArn,a)),setTimeout((()=>{G(!1)}),10),P.Z.dispatch((0,q.O$)(!0))}he([]),fe([])},it=()=>{t.push({pathname:"/broadcast"}),ae(!1),P.Z.dispatch((0,ie.rc)({userId:He.data.userId,orgId:Ge.organisationId,searchData:qe,position:De})),P.Z.dispatch({type:"ENABLE_BROADCAST",loading:!0})};return(0,i.useEffect)((()=>{0===l.length&&qe.page>1&&ze((e=>({...e,page:qe.page-1||1})))}),[l]),(0,s.jsxs)(s.Fragment,{children:[o?(0,s.jsx)(V.Z,{type:"fixed overlay"}):null,(0,s.jsx)("div",{className:"WrapperSection MainWrapper",children:(0,s.jsxs)("div",{className:"broadcast_wrapper w-full h-full",children:[Xe?(0,s.jsx)(W,{sessionInfo:l,handleBroadcastInfo:()=>{Ve({...Ue,getBroadcastTableShow:!1,getEnteringStreamShow:!0})},userRoleId:Ge.invitedUserRoleId||Ge.userRoleId,handleJoinMeeting:at,_handleTableBroadcastCreate:tt,resetMuiltipleClick:ue,searchTerm:qe.searchTerm,_onChangeData:e=>{Je(!0,e),de(!0)},initialPage:We,pageSizeChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{name:t="",value:a=10}=L()(e,"target",{});ze({...qe,page:1,[t]:a})},changePageactive:function(){Je(!1,{target:{name:"page",value:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1}})},bottomDetails:{size:qe.size,totalPages:null===u||void 0===u?void 0:u.totalPages,totalRecords:null===u||void 0===u?void 0:u.totalRecords,page:qe.page},searchEnable:se,currentOrg:Ge.organisationId,setSearchEnable:e=>de(e),setNoDeviceFound:we,_userRoleId:Ge.invitedUserRoleId||Ge.userRoleId,handleTableType:e=>{Oe(e)},userId:He.data.userId,enableEdits:e=>(async e=>{var t,a,i,l;const n={data:null===e||void 0===e?void 0:e.stageArn},o=await(0,Vt.v)(n)||[],s=null===o||void 0===o||null===(t=o.data)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.participantsList.map((e=>({fullName:null===e||void 0===e?void 0:e.userName,userId:null===e||void 0===e?void 0:e.userId,emailId:null===e||void 0===e?void 0:e.userEmail,organisationId:null===e||void 0===e?void 0:e.orgId,emailVerified:null!==e&&void 0!==e&&e.userId?1:0}))).filter((e=>(null===e||void 0===e?void 0:e.userId)!==(0,S.rc)()));console.log(s,"participantList----participantList"),fe(s),Le({...e,editSession:!0,participantList:null===o||void 0===o||null===(i=o.data)||void 0===i||null===(l=i.data)||void 0===l?void 0:l.participantsList})})(e),_searchData:qe}):null,$e?(0,s.jsx)(J,{handleCreateStreaming:tt,userRoleId:Ge.invitedUserRoleId||Ge.userRoleId}):null,Ke?(0,s.jsx)(Ft.rg,{clientId:X.eZ,children:(0,s.jsx)(At.Z,{_getUnRegisteredEmails:pe,_getRegisteredEmails:me,_handleCreateBroadcast:(e,t,a,i,l)=>at(e,t,a,i,l),_handleAddCohost:e=>function(){R(arguments.length>0&&void 0!==arguments[0]&&arguments[0])}(e),_handleConnectAccount:e=>function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch(e){case"FacebookPage":case"FacebookProfile":case"FacebookGroup":case"YoutubeChannel":case"LinkedInPage":case"LinkedInProfile":return console.log(e);default:return""}}(e),_handleOnOutsideClick:Z?()=>{}:()=>(Ve({...Ue,getCreateLiveStreaming:!1}),he([]),void fe([])),userRoleId:null===a||void 0===a?void 0:a.userRoleId,unmountHandler:()=>Te(!0),editSessionCreated:Me,isUpdateunmount:()=>Le(!1),_handleSaveYTAccount:(e,t,a)=>_handleEditStream(e,t,a,!1)})}):null,Qe?(0,s.jsx)(Mt,{handleEntering:Ye,handleMuteStatus:(e,t)=>{return i=t,void("VIDEO"===(a=e)?oe({...le,isVideoMute:i}):"AUDIO"===a&&oe({...le,isAudioMute:i}));var a,i},_handleBack:()=>(()=>{var e;P.Z.dispatch((0,q.Af)(!1)),Oe("Upcoming"),(0,H.Lj)(),(0,U.Vc)(),P.Z.dispatch((0,ie.EE)("")),P.Z.dispatch((0,ie.rc)({userId:He.data.userId,orgId:Ge.organisationId,searchData:qe,position:"Upcoming"})),P.Z.dispatch({type:"ENABLE_BROADCAST",loading:!0}),P.Z.dispatch((0,ie.Iw)({userId:null===He||void 0===He||null===(e=He.data)||void 0===e?void 0:e.userId,orgId:null===Ge||void 0===Ge?void 0:Ge.organisationId,searchData:qe,position:"Upcoming"})),P.Z.dispatch({type:"ENABLE_BROADCAST",loading:!0}),Ve({getBroadcastInitialshow:0===(null===l||void 0===l?void 0:l.length)||""!==qe.searchTerm||0===c||r>0,getBroadcastTableShow:0!==(null===l||void 0===l?void 0:l.length)||""!==qe.searchTerm||0!==c||r>0,getEnteringStreamShow:!1,getCreateLiveStreaming:!1,getVideoViewShow:!1})})()}):null,et?(0,s.jsx)(Ot,{FbData:M,isHost:ye,leftStage:()=>{oe({isVideoMute:!1,isAudioMute:!1}),3===(null===a||void 0===a?void 0:a.userRoleId)?Ve({getBroadcastInitialshow:!1,getBroadcastTableShow:!0,getEnteringStreamShow:!1,getCreateLiveStreaming:!1,getVideoViewShow:!1}):Ve({getBroadcastInitialshow:0===(null===l||void 0===l?void 0:l.length)||""!==qe.searchTerm||0===c||r>0,getBroadcastTableShow:0!==(null===l||void 0===l?void 0:l.length)||""!==qe.searchTerm||0!==c||r>0,getEnteringStreamShow:!1,getCreateLiveStreaming:!1,getVideoViewShow:!1})},muteStatus:le,setIsTimeout:e=>z(e),isTimeout:F,searchData:qe,currentOrg:Ge.organisationId,userId:He.data.userId}):null]})}),Z&&Ie?(0,s.jsx)(K.Z,{_handleGetRegisteredEmails:function(){he(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])},_handleGetUnRegisteredEmails:function(){fe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])},_handleOnOutsideClick:()=>{R(!1)},seletedEmailArray:pe,editSessionCreated:Me}):null,$?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>{ee(!1),ve(!ue),setTimeout((()=>(0,U.Vc)()),[2e3])},type:"assertAccess"}):null,te?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>{it()},handleExit:()=>{it()},type:"pastEnded"}):null,we?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>{G(!1),Ee(!1)},type:"noDeviceFound"}):null,Ae?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>Be(!1),handleExit:()=>{(0,x.ZM)()},type:"joinDeletePopup"}):null,Pe?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>Fe(!1),handleExit:()=>{(0,x.ZM)()},type:"joinRemovePopup"}):null,Ze?(0,s.jsx)(K.Z,{_handleOnOutsideClick:()=>Re(!1),handleExit:()=>{(0,x.ZM)()},type:"DeletePopup"}):null,Y&&(0,s.jsx)(V.Z,{type:"fixed overlay"}),xe&&(0,s.jsx)(je.m_,{licenseKey:X.Ju,userIdentifier:xe,profileName:be})]})},qt=(0,i.memo)(Ht)},49112:(e,t,a)=>{a.d(t,{Z:()=>s});a(72791);var i=a(26831),l=a(77344),n=a(5060),o=a(80184);const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{getvideoDetailsEle:t={},getSelectedUrl:a="",getSelectedThumb:s="",_handleAction:d=(()=>{}),_handleClose:c=(()=>{}),playData:r=""}=e;return(0,o.jsxs)(l.Z,{textActionButton:"Done",enableCancelButton:!1,handleAction:d,parentClass:"share_video_modal",onExited:()=>c(!1),handleClose:()=>c(!1),children:[(0,o.jsxs)("div",{className:"action_head",children:[(0,o.jsx)("i",{className:"delete",children:(0,o.jsx)(n.AC,{})}),(0,o.jsx)("strong",{children:"Share Video"})]}),(0,o.jsx)(i.Z,{getvideoDetailsEle:t,getSelectedUrl:a,getSelectedThumb:s,playData:r})]})}},27202:(e,t,a)=>{a.d(t,{Z:()=>r});var i=a(72791),l=a(80184);const n=e=>{const{playbackUrl:t="",getSelectedThumb:a="",livePlayer:n=!1}=e;console.log("PlayBackHls",e),(0,i.useEffect)((()=>(d(t),()=>{d("")})),[]);const o=["play-large","restart","play","seasons","mute","volume","captions","fullscreen","heart"],s=["play-large","restart","rewind","play","fast-forward","progress","seasons","mute","volume","captions","fullscreen","heart","duration","current-time"];function d(e){var t;const a=null===(t=window)||void 0===t?void 0:t.Plyr;let i=!1;const l=new a("#player",{max_resolution:720,debug:!0,autoplay:!0,title:"",invertTime:!0,hls:{enabled:!0,src:e},storage:{enabled:!0,key:"gudsho-check"},ads:{enabled:!1,tagUrl:"https://gudsho-newsaas-qa.s3.amazonaws.com/gudsho-ads/VASUKI/pvt-tom-and-jerrysubs-1/1684934099801-advertisement.xml"},keyboard:{global:!0},controls:n?o:s,settings:["quality","captions"],tooltips:{controls:!0},captions:{active:!0,update:!0},liveDetails:{enabled:n,connected:n}});function d(){if(i&&l.loading){l.stop();document.querySelector(".plyr--loading").classList.remove("plyr--loading"),l.fullscreen&&l.fullscreen.exit()}}l.setNextEpisodes=!0,l.setNextPromo=!0,l.on("next-episodes",(e=>{console.log("next-episodes",e.detail.plyr.nextEpisodes)})),l.on("help",(e=>{console.log("help",e.detail.plyr.helpPopup)})),l.on("seasons",(e=>{console.log("seasons",e.detail.plyr.seasonsPopup)})),l.on("next-promo",(e=>{console.log("next-promosss",e.detail.plyr.nextPromo)})),l.on("restart",(e=>{console.log("restart",e)})),l.on("adsimpression",(e=>{document.querySelector(".plyr__ads").classList.add("is-ads-player-show"),console.log("adsimpression:::",e)})),l.on("adscomplete",(e=>{document.querySelector(".plyr__ads").classList.remove("is-ads-player-show"),console.log("adscomplete:::",e)})),l.on("404",(e=>{console.log(e),i=!0,d()})),l.on("timeupdate",(e=>{d()}))}return(0,l.jsx)("video",{poster:a,className:"allrites-player","data-id":"89188",id:"player",controls:!0})};var o=a(42997),s=a(5060),d=a(49112),c=a(80180);const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{controlerHeight:t=0,playbackUrl:a="",livePlayer:r=!1,enableHeader:u="",createdAt:v="",title:m="",_handlePopup:h=(()=>{}),_handleBack:p=(()=>{}),getSelectedThumb:g=""}=e,[f,x]=(0,i.useState)({eleWidth:0,eleHeight:0,getVideoShare:!1}),{eleWidth:S=0,eleHeight:b=0,getVideoShare:j=!1}=f,_=()=>{x({...f,getVideoShare:!1})},y=()=>{console.log("handleResizeByVideoSize resize by video size");const e="16:9",a=e.split(":")[0],i=e.split(":")[1],l=document.getElementById("container-custom-vplayer"),n=document.getElementById("video_parent_top"),o=l.offsetWidth,s=l.offsetHeight-n.offsetHeight-t,d=a*s/i,c=i*o/a;o>d&&s>c?x({...f,eleWidth:d,eleHeight:c}):o<d&&s>c?x({...f,eleWidth:a*c/i,eleHeight:c}):o>d&&s<c&&x({...f,eleWidth:a*s/i,eleHeight:s})};return(0,i.useEffect)((()=>(y(),window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y)})),[]),(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{style:{display:!1===u?"none":""},id:"video_parent_top",className:"broadcasted_videos_head",children:[(0,l.jsx)("div",{className:"action_1",children:(0,l.jsx)("button",{title:"Close",onClick:p,className:"action_back",type:"button",children:(0,l.jsx)(c.luM,{})})}),(0,l.jsxs)("div",{style:{width:"".concat(Math.round(S),"px"),visibility:"hidden"},className:"action_2",children:[(0,l.jsxs)("div",{className:"action_2_left",children:[(0,l.jsx)("h2",{children:m}),(0,l.jsx)("span",{children:(0,o.tO)(v)})]}),(0,l.jsxs)("div",{className:"action_2_right relative",children:[(0,l.jsx)("div",{className:"relative",children:(0,l.jsxs)("button",{className:"action_download",type:"button",children:[(0,l.jsx)("span",{children:"Download"}),(0,l.jsx)(s.AK,{})]})}),(0,l.jsx)("button",{onClick:h,className:"",type:"button",children:"Share"})]})]})]}),(0,l.jsx)("div",{className:"video_parent_wraper",children:(0,l.jsx)("div",{className:"broadcasted_videos_body",children:(0,l.jsx)("div",{id:"big_video_wraper",className:"broadcasted_video",children:(0,l.jsx)("div",{className:"viewers_broadcast_video",children:(0,l.jsx)("div",{id:"container-custom-vplayer",className:"container-custom-vplayer",children:(0,l.jsx)("div",{style:{width:"".concat(Math.round(S),"px"),height:"".concat(Math.round(b),"px")},className:"video-container",id:"video-container",children:(0,l.jsx)(n,{livePlayer:r,getSelectedThumb:g,playbackUrl:a})})})})})})}),j&&(0,l.jsx)(d.Z,{_handleAction:()=>{_()},_handleClose:()=>{_()}})]})}},26831:(e,t,a)=>{a.d(t,{Z:()=>m});var i=a(72791),l=a(52024),n=a(22020),o=a(72764),s=a(5060),d=a(80180),c=a(86299),r=a(16030),u=a(27202),v=a(80184);const m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=/^[0-9\b]+$/,{_videoId:a="",getSelectedUrl:m="",shareLiveUrl:h=!1,getvideoDetailsEle:p="",getSelectedThumb:g=""}=e,[f,x]=(0,i.useState)(!1),S=()=>{x(!f)},b=(0,r.v9)((e=>null===e||void 0===e?void 0:e.awsStageReducer)),j=(0,r.v9)((e=>null===e||void 0===e?void 0:e.broadcastBranding)),{sessionName:_=""}=b,[y,N]=(0,i.useState)(560),[I,C]=(0,i.useState)(315),[k,T]=(0,i.useState)(""),[w,E]=(0,i.useState)(""),[D,O]=(0,i.useState)(!0),[A,B]=(0,i.useState)(f?"100%":"px"),[M,L]=(0,i.useState)(f?"100%":"px"),Z=(null===j||void 0===j?void 0:j.hlsLink)||"",{t:R}=(0,n.$)();return(0,i.useEffect)((()=>{if(a&&document&&document.getElementById(a)){const e=(()=>{const e=document.createElement("canvas");e.style.display="none";const t=document.getElementById(a);return e.width=348,e.height=196,e.getContext("2d").drawImage(t,0,0,e.width,e.height),e.toDataURL("image/png")})();E(e)}}),[]),(0,v.jsx)(v.Fragment,{children:(0,v.jsxs)("div",{className:"broadcaste_video_share_wraper",children:[(0,v.jsxs)("div",{className:"playback_video_wraper",children:[""===k&&(0,v.jsx)("div",{className:"overlay",children:(0,v.jsx)("button",{className:"play_button",onClick:()=>(O(!1),void setTimeout((()=>{T(m),O(!0)}),5e3)),type:"button",children:D?(0,v.jsx)(s.JF,{fill:"#fff"}):(0,v.jsx)(d.AE_,{fill:"#1367F2"})})}),""!==k?(0,v.jsx)(u.Z,{livePlayer:!0,shareLiveUrl:h,staticControl:!1,controlerHeight:0,playbackUrl:k,enableHeader:!1,getSelectedThumb:g||w||s.as,getvideoDetailsEle:p}):(0,v.jsx)("img",{src:g||w||s.as,alt:"poster"})]}),h?null:(0,v.jsx)("fieldset",{children:(0,v.jsx)(c.Z,{readOnly:!0,enableCopyIcon:!0,type:"text",caps:!1,mustFill:!1,value:"".concat(o.$Y).concat(Z),name:"share_video",palceholder:h?"Viewer Joining Link":"Copy Video Link",_onBlur:()=>{},_onchange:()=>{},customClass:"",error:!1,className:" mb-0 "})}),(0,v.jsx)("div",{className:"common-input-wrapper copy_icon_hover_top mb-0",children:(0,v.jsx)(l.ld,{textAreaType2:!0,enableCopyIcon:!(!y||!I),mustFill:!1,type:"textarea",palceholder:"Embed",className:"mb-0",disabled:!1,value:'<iframe style="border: none" width="'.concat(f?"100":y).concat(f?"%":A,'"\nheight="').concat(f?"100":I).concat(f?"%":M,'" src="').concat(o.$Y).concat(Z,'"\ntitle="').concat(_,'" frameborder="0"></iframe>'),name:"embeded",id:"embed-value",_onClick:e=>{var t;null===e||void 0===e||null===(t=e.target)||void 0===t||t.select()},customClass:"commonTextarea min-h custom_bg  ".concat(""),_onchange:()=>{},_onBlur:()=>{},error:!1,readOnly:!0,children:(0,v.jsxs)("div",{className:"radio_custom_check",children:[(0,v.jsxs)("div",{className:"radio-custom",children:[(0,v.jsxs)("label",{className:"radio",children:[(0,v.jsx)("input",{type:"radio",id:"responsive_size",value:f,onChange:S,checked:f}),(0,v.jsx)("label",{})]}),(0,v.jsx)("label",{htmlFor:"responsive_size",className:"label",children:R("BROADCAST.LAYOUT_OPTIONS.RESPONSIVE_SIZE")})]}),(0,v.jsxs)("div",{className:"radio-custom",children:[(0,v.jsxs)("label",{className:"radio",children:[(0,v.jsx)("input",{type:"radio",id:"fixed_size",value:!f,onChange:S,checked:!f}),(0,v.jsx)("label",{})]}),(0,v.jsx)("label",{htmlFor:"fixed_size",className:"label",children:R("BROADCAST.LAYOUT_OPTIONS.FIXED_SIZE")})]}),!f&&(0,v.jsxs)("div",{className:"fixed_size_input ",children:[(0,v.jsxs)("fieldset",{className:"mb-0",children:[(0,v.jsx)("input",{placeholder:"width",type:"text",name:"width",maxLength:4,value:y,onChange:e=>{(""===e.target.value||t.test(e.target.value))&&N(e.target.value)}}),(0,v.jsx)("div",{className:"floating_action",children:(0,v.jsx)("button",{onClick:()=>function(){B("%"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"%")?"px":"%")}(A),type:"button",className:"",children:(0,v.jsx)("span",{children:A})})})]}),(0,v.jsxs)("fieldset",{className:"mb-0",children:[(0,v.jsx)("input",{placeholder:"height",type:"text",name:"height",maxLength:4,value:I,onChange:e=>{(""===e.target.value||t.test(e.target.value))&&C(e.target.value)}}),(0,v.jsx)("div",{className:"floating_action",children:(0,v.jsx)("button",{onClick:()=>function(){L("%"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"%")?"px":"%")}(M),type:"button",className:"",children:(0,v.jsx)("span",{children:M})})})]})]})]})})})]})})}}}]);
//# sourceMappingURL=581.8e85733f.chunk.js.map